!function(a,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):a.c3=t()}(this,function(){"use strict";function V(a,t){var e=this;e.component=a,e.params=t||{},e.d3=a.d3,e.scale=e.d3.scale.linear(),e.range,e.orient="bottom",e.innerTickSize=6,e.outerTickSize=this.params.withOuterTick?6:0,e.tickPadding=3,e.tickValues=null,e.tickFormat,e.tickArguments,e.tickOffset=0,e.tickCulling=!0,e.tickCentered,e.tickTextCharSize,e.tickTextRotate=e.params.tickTextRotate,e.tickLength,e.axis=e.generateAxis()}function G(a,t,e){this.owner=a,c.chart.internal[t]=e}function P(a){var t=this.internal=new C(this);t.loadConfig(a),t.beforeInit(a),t.init(),t.afterInit(a),function r(t,e,i){Object.keys(t).forEach(function(n){e[n]=t[n].bind(i),0<Object.keys(t[n]).length&&r(t[n],e[n],i)})}(n,this,this)}function C(a){var t=this;t.d3=window.d3?window.d3:"undefined"==typeof require?void 0:require("d3"),t.api=a,t.config=t.getDefaultConfig(),t.data={},t.cache={},t.axes={}}var L,w,E=Math.abs,I=Math.cos,R=Math.sqrt,k=Math.pow,O=Math.sin,D=Math.PI,F=Math.max,X=Math.min,z=Math.ceil,Y={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",eventRects:"c3-event-rects",eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",focused:"c3-focused",defocused:"c3-defocused",region:"c3-region",regions:"c3-regions",title:"c3-title",tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcLabelLine:"c3-arc-label-line",arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",gridLines:"c3-grid-lines",xgrid:"c3-xgrid",xgrids:"c3-xgrids",xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",ygridLines:"c3-ygrid-lines",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",legendItemFocused:"c3-legend-item-focused",dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"},H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B=function(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")},a=function(a,i){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&("object"==typeof i||"function"==typeof i)?i:a},M=function(e){return e||0===e},N=function(e){return"function"==typeof e},s=function(e){return Array.isArray(e)},o=function(e){return"string"==typeof e},U=function(e){return void 0===e},W=function(e){return void 0!==e},r=function(e){return 10*z(e/10)},d=function(e){return z(e)+.5},Q=function(e){return e[1]-e[0]},g=function(e){return null==e||o(e)&&0===e.length||"object"===(void 0===e?"undefined":H(e))&&0===Object.keys(e).length},f=function(e){return!p.isEmpty(e)},j=function(a,t,e){return W(a[t])?a[t]:e},i=function(a,t){var e=!1;return Object.keys(a).forEach(function(i){a[i]===t&&(e=!0)}),e},_=function(e){return"string"==typeof e?e.replace(/</g,"&lt;").replace(/>/g,"&gt;"):e},x=function(a){var t=a.getBoundingClientRect(),e=[a.pathSegList.getItem(0),a.pathSegList.getItem(1)];return{x:e[0].x,y:X(e[0].y,e[1].y),width:t.width,height:t.height}};(w=V.prototype).axisX=function(a,r,e){a.attr("transform",function(a){return"translate("+z(r(a)+e)+", 0)"})},w.axisY=function(a,i){a.attr("transform",function(e){return"translate(0,"+z(i(e))+")"})},w.scaleExtent=function(a){var t=a[0],e=a[a.length-1];return t<e?[t,e]:[e,t]},w.generateTicks=function(a){var t,e,i=[];if(a.ticks)return a.ticks.apply(a,this.tickArguments);for(e=a.domain(),t=z(e[0]);t<e[1];t++)i.push(t);return 0<i.length&&0<i[0]&&i.unshift(i[0]-(i[1]-i[0])),i},w.copyScale=function(){var a,t=this.scale.copy();return this.params.isCategory&&(a=this.scale.domain(),t.domain([a[0],a[1]-1])),t},w.textFormatted=function(a){var t=this.tickFormat?this.tickFormat(a):a;return void 0===t?"":t},w.updateRange=function(){var e=this;return e.range=e.scale.rangeExtent?e.scale.rangeExtent():e.scaleExtent(e.scale.range()),e.range},w.updateTickTextCharSize=function(a){var o=this;if(o.tickTextCharSize)return o.tickTextCharSize;var e={h:11.5,w:5.5};return a.select("text").text(function(e){return o.textFormatted(e)}).each(function(i){var t=this.getBoundingClientRect(),n=o.textFormatted(i),a=t.height,r=n?t.width/n.length:void 0;a&&r&&(e.h=a,e.w=r)}).text(""),o.tickTextCharSize=e,e},w.transitionise=function(e){return this.params.withoutTransition?e:this.d3.transition(e)},w.isVertical=function(){return"left"===this.orient||"right"===this.orient},w.tspanData=function(r,s,t,i){var n=this.params.tickMultiline?this.splitTickText(r,t,i):[].concat(this.textFormatted(r));return n.map(function(a){return{index:s,splitted:a,length:n.length}})},w.splitTickText=function(d,t,e){var l,n,a,r=this,i=r.textFormatted(d),s=r.params.tickWidth;return"[object Array]"===Object.prototype.toString.call(i)?i:((!s||0>=s)&&(s=r.isVertical()?95:r.params.isCategory?z(e(t[1])-e(t[0]))-12:110),function d(t,e){n=void 0;for(var i=1;i<e.length;i++)if(" "===e.charAt(i)&&(n=i),l=e.substr(0,i+1),a=r.tickTextCharSize.w*l.length,s<a)return d(t.concat(e.substr(0,n||i)),e.slice(n?n+1:i));return t.concat(e)}([],i+""))},w.updateTickLength=function(){this.tickLength=F(this.innerTickSize,0)+this.tickPadding},w.lineY2=function(a){var t=this,e=t.scale(a)+(t.tickCentered?0:t.tickOffset);return t.range[0]<e&&e<t.range[1]?t.innerTickSize:0},w.textY=function(){var e=this.tickTextRotate;return e?11.5-2.5*(e/15)*(0<e?1:-1):this.tickLength},w.textTransform=function(){var e=this.tickTextRotate;return e?"rotate("+e+")":""},w.textTextAnchor=function(){var e=this.tickTextRotate;return e?0<e?"start":"end":"middle"},w.tspanDx=function(){var e=this.tickTextRotate;return e?8*O(D*(e/180)):0},w.tspanDy=function(a,t){var e=this.tickTextCharSize.h;return 0===t&&(e=this.isVertical()?-((a.length-1)*(this.tickTextCharSize.h/2)-3):".71em"),e},w.generateAxis=function(){function T(e){e.each(function(){var e,a,i,r=T.g=t.select(this),n=this.__chart__||A.scale,s=this.__chart__=A.copyScale(),o=A.tickValues?A.tickValues:A.generateTicks(s),d=r.selectAll(".tick").data(o,s),l=d.enter().insert("g",".domain").attr("class","tick").style("opacity",1e-6),c=d.exit().remove(),g=A.transitionise(d).style("opacity",1);b.isCategory?(A.tickOffset=z((s(1)-s(0))/2),a=A.tickCentered?0:A.tickOffset,i=A.tickCentered?A.tickOffset:0):A.tickOffset=a=0,l.append("line"),l.append("text"),A.updateRange(),A.updateTickLength(),A.updateTickTextCharSize(r.select(".tick"));var h=g.select("line"),p=g.select("text"),_=d.select("text").selectAll("tspan").data(function(t,e){return A.tspanData(t,e,o,s)});_.enter().append("tspan"),_.exit().remove(),_.text(function(e){return e.splitted});var x=r.selectAll(".domain").data([0]),u=(x.enter().append("path").attr("class","domain"),A.transitionise(x));switch(A.orient){case"bottom":e=A.axisX,h.attr("x1",a).attr("x2",a).attr("y2",function(t,e){return A.lineY2(t,e)}),p.attr("x",0).attr("y",function(t,e){return A.textY(t,e)}).attr("transform",function(t,e){return A.textTransform(t,e)}).style("text-anchor",function(t,e){return A.textTextAnchor(t,e)}),_.attr("x",0).attr("dy",function(t,e){return A.tspanDy(t,e)}).attr("dx",function(t,e){return A.tspanDx(t,e)}),u.attr("d","M"+A.range[0]+","+A.outerTickSize+"V0H"+A.range[1]+"V"+A.outerTickSize);break;case"top":e=A.axisX,h.attr("x1",a).attr("x2",a).attr("y2",function(t,e){return-1*A.lineY2(t,e)}),p.attr("x",0).attr("y",function(t,e){return-1*A.textY(t,e)-(b.isCategory?2:A.tickLength-2)}).attr("transform",function(t,e){return A.textTransform(t,e)}).style("text-anchor",function(t,e){return A.textTextAnchor(t,e)}),_.attr("x",0).attr("dy",function(t,e){return A.tspanDy(t,e)}).attr("dx",function(t,e){return A.tspanDx(t,e)}),u.attr("d","M"+A.range[0]+","+-A.outerTickSize+"V0H"+A.range[1]+"V"+-A.outerTickSize);break;case"left":e=A.axisY,h.attr("x2",-A.innerTickSize).attr("y1",i).attr("y2",i),p.attr("x",-A.tickLength).attr("y",A.tickOffset).style("text-anchor","end"),_.attr("x",-A.tickLength).attr("dy",function(t,e){return A.tspanDy(t,e)}),u.attr("d","M"+-A.outerTickSize+","+A.range[0]+"H0V"+A.range[1]+"H"+-A.outerTickSize);break;case"right":e=A.axisY,h.attr("x2",A.innerTickSize).attr("y1",i).attr("y2",i),p.attr("x",A.tickLength).attr("y",A.tickOffset).style("text-anchor","start"),_.attr("x",A.tickLength).attr("dy",function(t,e){return A.tspanDy(t,e)}),u.attr("d","M"+A.outerTickSize+","+A.range[0]+"H0V"+A.range[1]+"H"+A.outerTickSize);}if(s.rangeBand){var m=s,y=m.rangeBand()/2;n=s=function(e){return m(e)+y}}else n.rangeBand?n=s:c.call(e,s,A.tickOffset);l.call(e,n,A.tickOffset),g.call(e,s,A.tickOffset)})}var A=this,t=A.d3,b=A.params;return T.scale=function(t){return arguments.length?(A.scale=t,T):A.scale},T.orient=function(t){return arguments.length?(A.orient=t in{top:1,right:1,bottom:1,left:1}?t+"":"bottom",T):A.orient},T.tickFormat=function(t){return arguments.length?(A.tickFormat=t,T):A.tickFormat},T.tickCentered=function(t){return arguments.length?(A.tickCentered=t,T):A.tickCentered},T.tickOffset=function(){return A.tickOffset},T.tickInterval=function(){var t;return(t=b.isCategory?2*A.tickOffset:(T.g.select("path.domain").node().getTotalLength()-2*A.outerTickSize)/T.g.selectAll("line").size())===1/0?0:t},T.ticks=function(){return arguments.length?(A.tickArguments=arguments,T):A.tickArguments},T.tickCulling=function(t){return arguments.length?(A.tickCulling=t,T):A.tickCulling},T.tickValues=function(t){if("function"==typeof t)A.tickValues=function(){return t(A.scale.domain())};else{if(!arguments.length)return A.tickValues;A.tickValues=t}return T},T};var l=function(){function r(n){B(this,r);var i={fn:L,internal:{fn:w}},s=a(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,n,"axis",i));return s.d3=n.d3,s.internal=V,s}return function(a,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function, not "+typeof i);a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(a,i):a.__proto__=i)}(r,G),r}();(L=l.prototype).init=function(){var a=this.owner,t=a.config,e=a.main;a.axes.x=e.append("g").attr("class",Y.axis+" "+Y.axisX).attr("clip-path",t.axis_x_inner?"":a.clipPathForXAxis).attr("transform",a.getTranslate("x")).style("visibility",t.axis_x_show?"visible":"hidden"),a.axes.x.append("text").attr("class",Y.axisXLabel).attr("transform",t.axis_rotated?"rotate(-90)":"").style("text-anchor",this.textAnchorForXAxisLabel.bind(this)),a.axes.y=e.append("g").attr("class",Y.axis+" "+Y.axisY).attr("clip-path",t.axis_y_inner?"":a.clipPathForYAxis).attr("transform",a.getTranslate("y")).style("visibility",t.axis_y_show?"visible":"hidden"),a.axes.y.append("text").attr("class",Y.axisYLabel).attr("transform",t.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForYAxisLabel.bind(this)),a.axes.y2=e.append("g").attr("class",Y.axis+" "+Y.axisY2).attr("transform",a.getTranslate("y2")).style("visibility",t.axis_y2_show?"visible":"hidden"),a.axes.y2.append("text").attr("class",Y.axisY2Label).attr("transform",t.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForY2AxisLabel.bind(this))},L.getXAxis=function(p,t,e,i,_,h,x){var s=this.owner,o=s.config,c={isCategory:s.isCategorized(),withOuterTick:_,tickMultiline:o.axis_x_tick_multiline,tickWidth:o.axis_x_tick_width,tickTextRotate:x?0:o.axis_x_tick_rotate,withoutTransition:h},d=new this.internal(this,c).axis.scale(p).orient(t);return s.isTimeSeries()&&i&&"function"!=typeof i&&(i=i.map(function(e){return s.parseDate(e)})),d.tickFormat(e).tickValues(i),s.isCategorized()&&(d.tickCentered(o.axis_x_tick_centered),g(o.axis_x_tick_culling)&&(o.axis_x_tick_culling=!1)),d},L.updateXAxisTickValues=function(r,t){var e,i=this.owner,n=i.config;return(n.axis_x_tick_fit||n.axis_x_tick_count)&&(e=this.generateTickValues(i.mapTargetsToUniqueXs(r),n.axis_x_tick_count,i.isTimeSeries())),t?t.tickValues(e):(i.xAxis.tickValues(e),i.subXAxis.tickValues(e)),e},L.getYAxis=function(g,t,e,i,n,p,_){var s=this.owner,o=s.config,c={withOuterTick:n,withoutTransition:p,tickTextRotate:_?0:o.axis_y_tick_rotate},d=new this.internal(this,c).axis.scale(g).orient(t).tickFormat(e);return s.isTimeSeriesY()?d.ticks(s.d3.time[o.axis_y_tick_time_value],o.axis_y_tick_time_interval):d.tickValues(i),d},L.getId=function(a){var t=this.owner.config;return a in t.data_axes?t.data_axes[a]:"y"},L.getXAxisTickFormat=function(){var a=this.owner,t=a.config,r=a.isTimeSeries()?a.defaultAxisTimeFormat:a.isCategorized()?a.categoryName:function(e){return 0>e?e.toFixed(0):e};return t.axis_x_tick_format&&(N(t.axis_x_tick_format)?r=t.axis_x_tick_format:a.isTimeSeries()&&(r=function(e){return e?a.axisTimeFormat(t.axis_x_tick_format)(e):""})),N(r)?function(t){return r.call(a,t)}:r},L.getTickValues=function(a,t){return a||(t?t.tickValues():void 0)},L.getXAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_x_tick_values,this.owner.xAxis)},L.getYAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)},L.getY2AxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)},L.getLabelOptionByAxisId=function(a){var t,e=this.owner.config;return"y"===a?t=e.axis_y_label:"y2"===a?t=e.axis_y2_label:"x"===a&&(t=e.axis_x_label),t},L.getLabelText=function(a){var t=this.getLabelOptionByAxisId(a);return o(t)?t:t?t.text:null},L.setLabelText=function(a,t){var e=this.owner.config,i=this.getLabelOptionByAxisId(a);o(i)?"y"===a?e.axis_y_label=t:"y2"===a?e.axis_y2_label=t:"x"===a&&(e.axis_x_label=t):i&&(i.text=t)},L.getLabelPosition=function(r,t){var e=this.getLabelOptionByAxisId(r),i=e&&"object"===(void 0===e?"undefined":H(e))&&e.position?e.position:t;return{isInner:0<=i.indexOf("inner"),isOuter:0<=i.indexOf("outer"),isLeft:0<=i.indexOf("left"),isCenter:0<=i.indexOf("center"),isRight:0<=i.indexOf("right"),isTop:0<=i.indexOf("top"),isMiddle:0<=i.indexOf("middle"),isBottom:0<=i.indexOf("bottom")}},L.getXAxisLabelPosition=function(){return this.getLabelPosition("x",this.owner.config.axis_rotated?"inner-top":"inner-right")},L.getYAxisLabelPosition=function(){return this.getLabelPosition("y",this.owner.config.axis_rotated?"inner-right":"inner-top")},L.getY2AxisLabelPosition=function(){return this.getLabelPosition("y2",this.owner.config.axis_rotated?"inner-right":"inner-top")},L.getLabelPositionById=function(e){return"y2"===e?this.getY2AxisLabelPosition():"y"===e?this.getYAxisLabelPosition():this.getXAxisLabelPosition()},L.textForXAxisLabel=function(){return this.getLabelText("x")},L.textForYAxisLabel=function(){return this.getLabelText("y")},L.textForY2AxisLabel=function(){return this.getLabelText("y2")},L.xForAxisLabel=function(a,t){var e=this.owner;return a?t.isLeft?0:t.isCenter?e.width/2:e.width:t.isBottom?-e.height:t.isMiddle?-e.height/2:0},L.dxForAxisLabel=function(a,t){return a?t.isLeft?"0.5em":t.isRight?"-0.5em":"0":t.isTop?"-0.5em":t.isBottom?"0.5em":"0"},L.textAnchorForAxisLabel=function(a,t){return a?t.isLeft?"start":t.isCenter?"middle":"end":t.isBottom?"start":t.isMiddle?"middle":"end"},L.xForXAxisLabel=function(){return this.xForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},L.xForYAxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},L.xForY2AxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},L.dxForXAxisLabel=function(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},L.dxForYAxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},L.dxForY2AxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},L.dyForXAxisLabel=function(){var a=this.owner,t=a.config,e=this.getXAxisLabelPosition();return t.axis_rotated?e.isInner?"1.2em":-25-(a.config.axis_x_inner?0:this.getMaxTickWidth("x")):e.isInner?"-0.5em":t.axis_x_height?t.axis_x_height-10:"3em"},L.dyForYAxisLabel=function(){var a=this.owner,t=this.getYAxisLabelPosition();return a.config.axis_rotated?t.isInner?"-0.5em":"3em":t.isInner?"1.2em":-10-(a.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)},L.dyForY2AxisLabel=function(){var a=this.owner,t=this.getY2AxisLabelPosition();return a.config.axis_rotated?t.isInner?"1.2em":"-2.2em":t.isInner?"-0.5em":15+(a.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)},L.textAnchorForXAxisLabel=function(){var e=this.owner;return this.textAnchorForAxisLabel(!e.config.axis_rotated,this.getXAxisLabelPosition())},L.textAnchorForYAxisLabel=function(){var e=this.owner;return this.textAnchorForAxisLabel(e.config.axis_rotated,this.getYAxisLabelPosition())},L.textAnchorForY2AxisLabel=function(){var e=this.owner;return this.textAnchorForAxisLabel(e.config.axis_rotated,this.getY2AxisLabelPosition())},L.getMaxTickWidth=function(d,t){var e,i,n,a,r=this.owner,s=r.config,o=0;return t&&r.currentMaxTickWidths[d]?r.currentMaxTickWidths[d]:(r.svg&&(e=r.filterTargetsToShow(r.data.targets),"y"===d?(i=r.y.copy().domain(r.getYDomain(e,"y")),n=this.getYAxis(i,r.yOrient,s.axis_y_tick_format,r.yAxisTickValues,!1,!0,!0)):"y2"===d?(i=r.y2.copy().domain(r.getYDomain(e,"y2")),n=this.getYAxis(i,r.y2Orient,s.axis_y2_tick_format,r.y2AxisTickValues,!1,!0,!0)):(i=r.x.copy().domain(r.getXDomain(e)),n=this.getXAxis(i,r.xOrient,r.xAxisTickFormat,r.xAxisTickValues,!1,!0,!0),this.updateXAxisTickValues(e,n)),(a=r.d3.select("body").append("div").classed("c3",!0)).append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0).append("g").call(n).each(function(){r.d3.select(this).selectAll("text").each(function(){var e=this.getBoundingClientRect();o<e.width&&(o=e.width)}),a.remove()})),r.currentMaxTickWidths[d]=0>=o?r.currentMaxTickWidths[d]:o,r.currentMaxTickWidths[d])},L.updateLabels=function(i){var t=this.owner,e=t.main.select("."+Y.axisX+" ."+Y.axisXLabel),n=t.main.select("."+Y.axisY+" ."+Y.axisYLabel),a=t.main.select("."+Y.axisY2+" ."+Y.axisY2Label);(i?e.transition():e).attr("x",this.xForXAxisLabel.bind(this)).attr("dx",this.dxForXAxisLabel.bind(this)).attr("dy",this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this)),(i?n.transition():n).attr("x",this.xForYAxisLabel.bind(this)).attr("dx",this.dxForYAxisLabel.bind(this)).attr("dy",this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this)),(i?a.transition():a).attr("x",this.xForY2AxisLabel.bind(this)).attr("dx",this.dxForY2AxisLabel.bind(this)).attr("dy",this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this))},L.getPadding=function(r,s,e,i){var n="number"==typeof r?r:r[s];return M(n)?"ratio"===r.unit?r[s]*i:this.convertPixelsToAxisPadding(n,i):e},L.convertPixelsToAxisPadding=function(a,t){var e=this.owner;return t*(a/(e.config.axis_rotated?e.width:e.height))},L.generateTickValues=function(o,t,e){var i,n,g,r,s,c,d,l=o;if(t)if(1===(i=N(t)?t():t))l=[o[0]];else if(2===i)l=[o[0],o[o.length-1]];else if(2<i){for(r=i-2,n=o[0],s=((g=o[o.length-1])-n)/(r+1),l=[n],c=0;c<r;c++)d=+n+s*(c+1),l.push(e?new Date(d):d);l.push(g)}return e||(l=l.sort(function(a,t){return a-t})),l},L.generateTransitions=function(a){var t=this.owner.axes;return{axisX:a?t.x.transition().duration(a):t.x,axisY:a?t.y.transition().duration(a):t.y,axisY2:a?t.y2.transition().duration(a):t.y2,axisSubX:a?t.subx.transition().duration(a):t.subx}},L.redraw=function(a,t){var e=this.owner;e.axes.x.style("opacity",t?0:1),e.axes.y.style("opacity",t?0:1),e.axes.y2.style("opacity",t?0:1),e.axes.subx.style("opacity",t?0:1),a.axisX.call(e.xAxis),a.axisY.call(e.yAxis),a.axisY2.call(e.y2Axis),a.axisSubX.call(e.subXAxis)};var n,p,c={version:"0.4.22"};return c.generate=function(e){return new P(e)},c.chart={fn:P.prototype,internal:{fn:C.prototype}},n=c.chart.fn,(p=c.chart.internal.fn).beforeInit=function(){},p.afterInit=function(){},p.init=function(){var a=this,t=a.config;if(a.initParams(),t.data_url)a.convertUrlToData(t.data_url,t.data_mimeType,t.data_headers,t.data_keys,a.initWithData);else if(t.data_json)a.initWithData(a.convertJsonToData(t.data_json,t.data_keys));else if(t.data_rows)a.initWithData(a.convertRowsToData(t.data_rows));else{if(!t.data_columns)throw Error("url or json or rows or columns is required.");a.initWithData(a.convertColumnsToData(t.data_columns))}},p.initParams=function(){var a=this,t=a.d3,e=a.config;a.clipId="c3-"+ +new Date+"-clip",a.clipIdForXAxis=a.clipId+"-xaxis",a.clipIdForYAxis=a.clipId+"-yaxis",a.clipIdForGrid=a.clipId+"-grid",a.clipIdForSubchart=a.clipId+"-subchart",a.clipPath=a.getClipPath(a.clipId),a.clipPathForXAxis=a.getClipPath(a.clipIdForXAxis),a.clipPathForYAxis=a.getClipPath(a.clipIdForYAxis),a.clipPathForGrid=a.getClipPath(a.clipIdForGrid),a.clipPathForSubchart=a.getClipPath(a.clipIdForSubchart),a.dragStart=null,a.dragging=!1,a.flowing=!1,a.cancelClick=!1,a.mouseover=!1,a.transiting=!1,a.color=a.generateColor(),a.levelColor=a.generateLevelColor(),a.dataTimeFormat=e.data_xLocaltime?t.time.format:t.time.format.utc,a.axisTimeFormat=e.axis_x_localtime?t.time.format:t.time.format.utc,a.defaultAxisTimeFormat=a.axisTimeFormat.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%-m/%-d",function(e){return e.getDay()&&1!==e.getDate()}],["%-m/%-d",function(e){return 1!==e.getDate()}],["%-m/%-d",function(e){return e.getMonth()}],["%Y/%-m/%-d",function(){return!0}]]),a.hiddenTargetIds=[],a.hiddenLegendIds=[],a.focusedTargetIds=[],a.defocusedTargetIds=[],a.xOrient=e.axis_rotated?e.axis_x_inner?"right":"left":e.axis_x_inner?"top":"bottom",a.yOrient=e.axis_rotated?e.axis_y_inner?"top":"bottom":e.axis_y_inner?"right":"left",a.y2Orient=e.axis_rotated?e.axis_y2_inner?"bottom":"top":e.axis_y2_inner?"left":"right",a.subXOrient=e.axis_rotated?"left":"bottom",a.isLegendRight="right"===e.legend_position,a.isLegendInset="inset"===e.legend_position,a.isLegendTop="top-left"===e.legend_inset_anchor||"top-right"===e.legend_inset_anchor,a.isLegendLeft="top-left"===e.legend_inset_anchor||"bottom-left"===e.legend_inset_anchor,a.legendStep=0,a.legendItemWidth=0,a.legendItemHeight=0,a.currentMaxTickWidths={x:0,y:0,y2:0},a.rotated_padding_left=30,a.rotated_padding_right=e.axis_rotated&&!e.axis_x_show?0:30,a.rotated_padding_top=5,a.withoutFadeIn={},a.intervalForObserveInserted=void 0,a.axes.subx=t.selectAll([])},p.initChartElements=function(){this.initBar&&this.initBar(),this.initLine&&this.initLine(),this.initArc&&this.initArc(),this.initGauge&&this.initGauge(),this.initText&&this.initText()},p.initWithData=function(i){var t,e,n=this,a=n.d3,r=n.config,s=!0;n.axis=new l(n),n.initPie&&n.initPie(),n.initBrush&&n.initBrush(),n.initZoom&&n.initZoom(),n.selectChart=r.bindto?"function"==typeof r.bindto.node?r.bindto:a.select(r.bindto):a.selectAll([]),n.selectChart.empty()&&(n.selectChart=a.select(document.createElement("div")).style("opacity",0),n.observeInserted(n.selectChart),s=!1),n.selectChart.html("").classed("c3",!0),n.data.xs={},n.data.targets=n.convertDataToTargets(i),r.data_filter&&(n.data.targets=n.data.targets.filter(r.data_filter)),r.data_hide&&n.addHiddenTargetIds(!0===r.data_hide?n.mapToIds(n.data.targets):r.data_hide),r.legend_hide&&n.addHiddenLegendIds(!0===r.legend_hide?n.mapToIds(n.data.targets):r.legend_hide),n.updateSizes(),n.updateScales(),n.x.domain(a.extent(n.getXDomain(n.data.targets))),n.y.domain(n.getYDomain(n.data.targets,"y")),n.y2.domain(n.getYDomain(n.data.targets,"y2")),n.subX.domain(n.x.domain()),n.subY.domain(n.y.domain()),n.subY2.domain(n.y2.domain()),n.orgXDomain=n.x.domain(),n.brush&&n.brush.scale(n.subX),r.zoom_enabled&&n.zoom.scale(n.x),n.svg=n.selectChart.append("svg").style("overflow","hidden").on("mouseenter",function(){return r.onmouseover.call(n)}).on("mouseleave",function(){return r.onmouseout.call(n)}),n.config.svg_classname&&n.svg.attr("class",n.config.svg_classname),t=n.svg.append("defs"),n.clipChart=n.appendClip(t,n.clipId),n.clipXAxis=n.appendClip(t,n.clipIdForXAxis),n.clipYAxis=n.appendClip(t,n.clipIdForYAxis),n.clipGrid=n.appendClip(t,n.clipIdForGrid),n.clipSubchart=n.appendClip(t,n.clipIdForSubchart),n.updateSvgSize(),e=n.main=n.svg.append("g").attr("transform",n.getTranslate("main")),n.initSubchart&&n.initSubchart(),n.initTooltip&&n.initTooltip(),n.initLegend&&n.initLegend(),n.initTitle&&n.initTitle(),e.append("text").attr("class",Y.text+" "+Y.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),n.initRegion(),n.initGrid(),e.append("g").attr("clip-path",n.clipPath).attr("class",Y.chart),r.grid_lines_front&&n.initGridLines(),n.initEventRect(),n.initChartElements(),e.insert("rect",r.zoom_privileged?null:"g."+Y.regions).attr("class",Y.zoomRect).attr("width",n.width).attr("height",n.height).style("opacity",0).on("dblclick.zoom",null),r.axis_x_extent&&n.brush.extent(n.getDefaultExtent()),n.axis.init(),n.updateTargets(n.data.targets),s&&(n.updateDimension(),n.config.oninit.call(n),n.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1})),n.bindResize(),n.api.element=n.selectChart.node()},p.smoothLines=function(a,t){var s=this;"grid"===t&&a.each(function(){var i=s.d3.select(this),t=i.attr("x1"),e=i.attr("x2"),n=i.attr("y1"),a=i.attr("y2");i.attr({x1:z(t),x2:z(e),y1:z(n),y2:z(a)})})},p.updateSizes=function(){var d=this,t=d.config,e=d.legend?d.getLegendHeight():0,i=d.legend?d.getLegendWidth():0,n=d.isLegendRight||d.isLegendInset?0:e,a=d.hasArcType(),l=t.axis_rotated||a?0:d.getHorizontalAxisHeight("x"),s=t.subchart_show&&!a?t.subchart_size_height+l:0;d.currentWidth=d.getCurrentWidth(),d.currentHeight=d.getCurrentHeight(),d.margin=t.axis_rotated?{top:d.getHorizontalAxisHeight("y2")+d.getCurrentPaddingTop(),right:a?0:d.getCurrentPaddingRight(),bottom:d.getHorizontalAxisHeight("y")+n+d.getCurrentPaddingBottom(),left:s+(a?0:d.getCurrentPaddingLeft())}:{top:4+d.getCurrentPaddingTop(),right:a?0:d.getCurrentPaddingRight(),bottom:l+s+n+d.getCurrentPaddingBottom(),left:a?0:d.getCurrentPaddingLeft()},d.margin2=t.axis_rotated?{top:d.margin.top,right:NaN,bottom:20+n,left:d.rotated_padding_left}:{top:d.currentHeight-s-n,right:NaN,bottom:l+n,left:d.margin.left},d.margin3={top:0,right:NaN,bottom:0,left:0},d.updateSizeForLegend&&d.updateSizeForLegend(e,i),d.width=d.currentWidth-d.margin.left-d.margin.right,d.height=d.currentHeight-d.margin.top-d.margin.bottom,0>d.width&&(d.width=0),0>d.height&&(d.height=0),d.width2=t.axis_rotated?d.margin.left-d.rotated_padding_left-d.rotated_padding_right:d.width,d.height2=t.axis_rotated?d.height:d.currentHeight-d.margin2.top-d.margin2.bottom,0>d.width2&&(d.width2=0),0>d.height2&&(d.height2=0),d.arcWidth=d.width-(d.isLegendRight?i+10:0),d.arcHeight=d.height-(d.isLegendRight?0:10),d.hasType("gauge")&&!t.gauge_fullCircle&&(d.arcHeight+=d.height-d.getGaugeLabelHeight()),d.updateRadius&&d.updateRadius(),d.isLegendRight&&a&&(d.margin3.left=d.arcWidth/2+1.1*d.radiusExpanded)},p.updateTargets=function(a){var t=this;t.updateTargetsForText(a),t.updateTargetsForBar(a),t.updateTargetsForLine(a),t.hasArcType()&&t.updateTargetsForArc&&t.updateTargetsForArc(a),t.updateTargetsForSubchart&&t.updateTargetsForSubchart(a),t.showTargets()},p.showTargets=function(){var a=this;a.svg.selectAll("."+Y.target).filter(function(t){return a.isTargetToShow(t.id)}).transition().duration(a.config.transition_duration).style("opacity",1)},p.redraw=function(i,t){var e,n,a,r,s,o,c,d,l,x,h,g,u,p,f,N,U,W,Q,v,b,T,A,P,C,L,V,G,Z,K=this,I=K.main,R=K.d3,k=K.config,D=K.getShapeIndices(K.isAreaType),F=K.getShapeIndices(K.isBarType),X=K.getShapeIndices(K.isLineType),M=K.hasArcType(),z=K.filterTargetsToShow(K.data.targets),q=K.xv.bind(K);if(e=j(i=i||{},"withY",!0),n=j(i,"withSubchart",!0),a=j(i,"withTransition",!0),o=j(i,"withTransform",!1),c=j(i,"withUpdateXDomain",!1),d=j(i,"withUpdateOrgXDomain",!1),l=j(i,"withTrimXDomain",!0),u=j(i,"withUpdateXAxis",c),x=j(i,"withLegend",!1),h=j(i,"withEventRect",!0),g=j(i,"withDimension",!0),r=j(i,"withTransitionForExit",a),s=j(i,"withTransitionForAxis",a),Q=a?k.transition_duration:0,v=r?Q:0,b=s?Q:0,t=t||K.axis.generateTransitions(b),x&&k.legend_show?K.updateLegend(K.mapToIds(K.data.targets),i,t):g&&K.updateDimension(!0),K.isCategorized()&&0===z.length&&K.x.domain([0,K.axes.x.selectAll(".tick").size()]),z.length?(K.updateXDomain(z,c,d,l),k.axis_x_tick_values||(P=K.axis.updateXAxisTickValues(z))):(K.xAxis.tickValues([]),K.subXAxis.tickValues([])),k.zoom_rescale&&!i.flow&&(V=K.x.orgDomain()),K.y.domain(K.getYDomain(z,"y",V)),K.y2.domain(K.getYDomain(z,"y2",V)),!k.axis_y_tick_values&&k.axis_y_tick_count&&K.yAxis.tickValues(K.axis.generateTickValues(K.y.domain(),k.axis_y_tick_count)),!k.axis_y2_tick_values&&k.axis_y2_tick_count&&K.y2Axis.tickValues(K.axis.generateTickValues(K.y2.domain(),k.axis_y2_tick_count)),K.axis.redraw(t,M),K.axis.updateLabels(a),(c||u)&&z.length)if(k.axis_x_tick_culling&&P){for(C=1;C<P.length;C++)if(P.length/C<k.axis_x_tick_culling_max){L=C;break}K.svg.selectAll("."+Y.axisX+" .tick text").each(function(a){var t=P.indexOf(a);0<=t&&R.select(this).style("display",t%L?"none":"block")})}else K.svg.selectAll("."+Y.axisX+" .tick text").style("display","block");p=K.generateDrawArea?K.generateDrawArea(D,!1):void 0,f=K.generateDrawBar?K.generateDrawBar(F):void 0,N=K.generateDrawLine?K.generateDrawLine(X,!1):void 0,U=K.generateXYForText(D,F,X,!0),W=K.generateXYForText(D,F,X,!1),e&&(K.subY.domain(K.getYDomain(z,"y")),K.subY2.domain(K.getYDomain(z,"y2"))),K.updateXgridFocus(),I.select("text."+Y.text+"."+Y.empty).attr("x",K.width/2).attr("y",K.height/2).text(k.data_empty_label_text).transition().style("opacity",z.length?0:1),K.updateGrid(Q),K.updateRegion(Q),K.updateBar(v),K.updateLine(v),K.updateArea(v),K.updateCircle(),K.hasDataLabel()&&K.updateText(v),K.redrawTitle&&K.redrawTitle(),K.redrawArc&&K.redrawArc(Q,v,o),K.redrawSubchart&&K.redrawSubchart(n,t,Q,v,D,F,X),I.selectAll("."+Y.selectedCircles).filter(K.isBarType.bind(K)).selectAll("circle").remove(),k.interaction_enabled&&!i.flow&&h&&(K.redrawEventRect(),K.updateZoom&&K.updateZoom()),K.updateCircleY(),G=(K.config.axis_rotated?K.circleY:K.circleX).bind(K),Z=(K.config.axis_rotated?K.circleX:K.circleY).bind(K),i.flow&&(A=K.generateFlow({targets:z,flow:i.flow,duration:i.flow.duration,drawBar:f,drawLine:N,drawArea:p,cx:G,cy:Z,xv:q,xForText:U,yForText:W})),(Q||A)&&K.isTabVisible()?R.transition().duration(Q).each(function(){var a=[];[K.redrawBar(f,!0),K.redrawLine(N,!0),K.redrawArea(p,!0),K.redrawCircle(G,Z,!0),K.redrawText(U,W,i.flow,!0),K.redrawRegion(!0),K.redrawGrid(!0)].forEach(function(e){e.forEach(function(e){a.push(e)})}),T=K.generateWait(),a.forEach(function(e){T.add(e)})}).call(T,function(){A&&A(),k.onrendered&&k.onrendered.call(K)}):(K.redrawBar(f),K.redrawLine(N),K.redrawArea(p),K.redrawCircle(G,Z),K.redrawText(U,W,i.flow),K.redrawRegion(),K.redrawGrid(),k.onrendered&&k.onrendered.call(K)),K.mapToIds(K.data.targets).forEach(function(e){K.withoutFadeIn[e]=!0})},p.updateAndRedraw=function(a){var t,e=this,i=e.config;(a=a||{}).withTransition=j(a,"withTransition",!0),a.withTransform=j(a,"withTransform",!1),a.withLegend=j(a,"withLegend",!1),a.withUpdateXDomain=!0,a.withUpdateOrgXDomain=!0,a.withTransitionForExit=!1,a.withTransitionForTransform=j(a,"withTransitionForTransform",a.withTransition),e.updateSizes(),a.withLegend&&i.legend_show||(t=e.axis.generateTransitions(a.withTransitionForAxis?i.transition_duration:0),e.updateScales(),e.updateSvgSize(),e.transformAll(a.withTransitionForTransform,t)),e.redraw(a,t)},p.redrawWithoutRescale=function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})},p.isTimeSeries=function(){return"timeseries"===this.config.axis_x_type},p.isCategorized=function(){return 0<=this.config.axis_x_type.indexOf("categor")},p.isCustomX=function(){var e=this.config;return!this.isTimeSeries()&&(e.data_x||f(e.data_xs))},p.isTimeSeriesY=function(){return"timeseries"===this.config.axis_y_type},p.getTranslate=function(r){var t,e,i=this,n=i.config;return"main"===r?(t=d(i.margin.left),e=d(i.margin.top)):"context"===r?(t=d(i.margin2.left),e=d(i.margin2.top)):"legend"===r?(t=i.margin3.left,e=i.margin3.top):"x"===r?(t=0,e=n.axis_rotated?0:i.height):"y"===r?(t=0,e=n.axis_rotated?i.height:0):"y2"===r?(t=n.axis_rotated?0:i.width,e=n.axis_rotated?1:0):"subx"===r?(t=0,e=n.axis_rotated?0:i.height2):"arc"===r&&(t=i.arcWidth/2,e=i.arcHeight/2-(i.hasType("gauge")?6:0)),"translate("+t+","+e+")"},p.initialOpacity=function(e){return null!==e.value&&this.withoutFadeIn[e.id]?1:0},p.initialOpacityForCircle=function(e){return null!==e.value&&this.withoutFadeIn[e.id]?this.opacityForCircle(e):0},p.opacityForCircle=function(a){var t=(N(this.config.point_show)?this.config.point_show(a):this.config.point_show)?1:0;return M(a.value)?this.isScatterType(a)?.5:t:0},p.opacityForText=function(){return this.hasDataLabel()?1:0},p.xx=function(e){return e?this.x(e.x):null},p.xv=function(a){var t=this,e=a.value;return t.isTimeSeries()?e=t.parseDate(a.value):t.isCategorized()&&"string"==typeof a.value&&(e=t.config.axis_x_categories.indexOf(a.value)),z(t.x(e))},p.yv=function(a){var t=a.axis&&"y2"===a.axis?this.y2:this.y;return z(t(a.value))},p.subxx=function(e){return e?this.subX(e.x):null},p.transformMain=function(i,t){var e,n,a,r=this;t&&t.axisX?e=t.axisX:(e=r.main.select("."+Y.axisX),i&&(e=e.transition())),t&&t.axisY?n=t.axisY:(n=r.main.select("."+Y.axisY),i&&(n=n.transition())),t&&t.axisY2?a=t.axisY2:(a=r.main.select("."+Y.axisY2),i&&(a=a.transition())),(i?r.main.transition():r.main).attr("transform",r.getTranslate("main")),e.attr("transform",r.getTranslate("x")),n.attr("transform",r.getTranslate("y")),a.attr("transform",r.getTranslate("y2")),r.main.select("."+Y.chartArcs).attr("transform",r.getTranslate("arc"))},p.transformAll=function(a,t){var e=this;e.transformMain(a,t),e.config.subchart_show&&e.transformContext(a,t),e.legend&&e.transformLegend(a)},p.updateSvgSize=function(){var a=this,t=a.svg.select(".c3-brush .background");a.svg.attr("width",a.currentWidth).attr("height",a.currentHeight),a.svg.selectAll(["#"+a.clipId,"#"+a.clipIdForGrid]).select("rect").attr("width",a.width).attr("height",a.height),a.svg.select("#"+a.clipIdForXAxis).select("rect").attr("x",a.getXAxisClipX.bind(a)).attr("y",a.getXAxisClipY.bind(a)).attr("width",a.getXAxisClipWidth.bind(a)).attr("height",a.getXAxisClipHeight.bind(a)),a.svg.select("#"+a.clipIdForYAxis).select("rect").attr("x",a.getYAxisClipX.bind(a)).attr("y",a.getYAxisClipY.bind(a)).attr("width",a.getYAxisClipWidth.bind(a)).attr("height",a.getYAxisClipHeight.bind(a)),a.svg.select("#"+a.clipIdForSubchart).select("rect").attr("width",a.width).attr("height",t.size()?t.attr("height"):0),a.svg.select("."+Y.zoomRect).attr("width",a.width).attr("height",a.height),a.selectChart.style("max-height",a.currentHeight+"px")},p.updateDimension=function(a){var t=this;a||(t.config.axis_rotated?(t.axes.x.call(t.xAxis),t.axes.subx.call(t.subXAxis)):(t.axes.y.call(t.yAxis),t.axes.y2.call(t.y2Axis))),t.updateSizes(),t.updateScales(),t.updateSvgSize(),t.transformAll(!1)},p.observeInserted=function(a){var t,e=this;"undefined"==typeof MutationObserver?window.console.error("MutationObserver not defined."):(t=new MutationObserver(function(i){i.forEach(function(i){"childList"===i.type&&i.previousSibling&&(t.disconnect(),e.intervalForObserveInserted=window.setInterval(function(){a.node().parentNode&&(window.clearInterval(e.intervalForObserveInserted),e.updateDimension(),e.brush&&e.brush.update(),e.config.oninit.call(e),e.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),a.transition().style("opacity",1))},10))})})).observe(a.node(),{attributes:!0,childList:!0,characterData:!0})},p.bindResize=function(){var a=this,t=a.config;if(a.resizeFunction=a.generateResize(),a.resizeFunction.add(function(){t.onresize.call(a)}),t.resize_auto&&a.resizeFunction.add(function(){void 0!==a.resizeTimeout&&window.clearTimeout(a.resizeTimeout),a.resizeTimeout=window.setTimeout(function(){delete a.resizeTimeout,a.api.flush()},100)}),a.resizeFunction.add(function(){t.onresized.call(a)}),a.resizeIfElementDisplayed=function(){null!=a.api&&a.api.element.offsetParent&&a.resizeFunction()},window.attachEvent)window.attachEvent("onresize",a.resizeIfElementDisplayed);else if(window.addEventListener)window.addEventListener("resize",a.resizeIfElementDisplayed,!1);else{var e=window.onresize;e?e.add&&e.remove||(e=a.generateResize()).add(window.onresize):e=a.generateResize(),e.add(a.resizeFunction),window.onresize=function(){a.api.element.offsetParent&&e()}}},p.generateResize=function(){function a(){r.forEach(function(e){e()})}var r=[];return a.add=function(t){r.push(t)},a.remove=function(t){for(var e=0;e<r.length;e++)if(r[e]===t){r.splice(e,1);break}},a},p.endall=function(a,t){var e=0;a.each(function(){++e}).each("end",function(){--e||t.apply(this,arguments)})},p.generateWait=function(){var a=[],t=function(t,r){var i=setInterval(function(){var n=0;a.forEach(function(e){if(e.empty())n+=1;else try{e.transition()}catch(e){n+=1}}),n===a.length&&(clearInterval(i),r&&r())},10)};return t.add=function(t){a.push(t)},t},p.parseDate=function(a){var i;return a instanceof Date?i=a:"string"==typeof a?i=this.dataTimeFormat(this.config.data_xFormat).parse(a):"object"===(void 0===a?"undefined":H(a))?i=new Date(+a):"number"!=typeof a||isNaN(a)||(i=new Date(+a)),i&&!isNaN(+i)||window.console.error("Failed to parse x '"+a+"' to Date object"),i},p.isTabVisible=function(){var e;return void 0===document.hidden?void 0===document.mozHidden?void 0===document.msHidden?void 0!==document.webkitHidden&&(e="webkitHidden"):e="msHidden":e="mozHidden":e="hidden",!document[e]},p.isValue=M,p.isFunction=N,p.isString=o,p.isUndefined=U,p.isDefined=W,p.ceil10=r,p.asHalfPixel=d,p.diffDomain=Q,p.isEmpty=g,p.notEmpty=f,p.notEmpty=f,p.getOption=j,p.hasValue=i,p.sanitise=_,p.getPathBox=x,p.CLASS=Y,Function.prototype.bind||(Function.prototype.bind=function(r){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),e=this,i=function(){},n=function(){return e.apply(this instanceof i?this:r,t.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,n.prototype=new i,n}),"SVGPathSeg"in window||(window.SVGPathSeg=function(a,t,e){this.pathSegType=a,this.pathSegTypeAsLetter=t,this._owningPathSegList=e},window.SVGPathSeg.prototype.classname="SVGPathSeg",window.SVGPathSeg.PATHSEG_UNKNOWN=0,window.SVGPathSeg.PATHSEG_CLOSEPATH=1,window.SVGPathSeg.PATHSEG_MOVETO_ABS=2,window.SVGPathSeg.PATHSEG_MOVETO_REL=3,window.SVGPathSeg.PATHSEG_LINETO_ABS=4,window.SVGPathSeg.PATHSEG_LINETO_REL=5,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS=6,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL=7,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS=8,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL=9,window.SVGPathSeg.PATHSEG_ARC_ABS=10,window.SVGPathSeg.PATHSEG_ARC_REL=11,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS=12,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL=13,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS=14,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL=15,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS=16,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL=17,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS=18,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL=19,window.SVGPathSeg.prototype._segmentChanged=function(){this._owningPathSegList&&this._owningPathSegList.segmentChanged(this)},window.SVGPathSegClosePath=function(e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CLOSEPATH,"z",e)},window.SVGPathSegClosePath.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegClosePath.prototype.toString=function(){return"[object SVGPathSegClosePath]"},window.SVGPathSegClosePath.prototype._asPathString=function(){return this.pathSegTypeAsLetter},window.SVGPathSegClosePath.prototype.clone=function(){return new window.SVGPathSegClosePath(void 0)},window.SVGPathSegMovetoAbs=function(a,t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_MOVETO_ABS,"M",a),this._x=t,this._y=e},window.SVGPathSegMovetoAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegMovetoAbs.prototype.toString=function(){return"[object SVGPathSegMovetoAbs]"},window.SVGPathSegMovetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegMovetoAbs.prototype.clone=function(){return new window.SVGPathSegMovetoAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegMovetoRel=function(a,t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_MOVETO_REL,"m",a),this._x=t,this._y=e},window.SVGPathSegMovetoRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegMovetoRel.prototype.toString=function(){return"[object SVGPathSegMovetoRel]"},window.SVGPathSegMovetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegMovetoRel.prototype.clone=function(){return new window.SVGPathSegMovetoRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegMovetoRel.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegMovetoRel.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoAbs=function(a,t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_ABS,"L",a),this._x=t,this._y=e},window.SVGPathSegLinetoAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoAbs.prototype.toString=function(){return"[object SVGPathSegLinetoAbs]"},window.SVGPathSegLinetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegLinetoAbs.prototype.clone=function(){return new window.SVGPathSegLinetoAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoRel=function(a,t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_REL,"l",a),this._x=t,this._y=e},window.SVGPathSegLinetoRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoRel.prototype.toString=function(){return"[object SVGPathSegLinetoRel]"},window.SVGPathSegLinetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegLinetoRel.prototype.clone=function(){return new window.SVGPathSegLinetoRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegLinetoRel.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegLinetoRel.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicAbs=function(o,t,e,i,n,a,r){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS,"C",o),this._x=t,this._y=e,this._x1=i,this._y1=n,this._x2=a,this._y2=r},window.SVGPathSegCurvetoCubicAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicAbs]"},window.SVGPathSegCurvetoCubicAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicAbs(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x1",{get:function(){return this._x1},set:function(e){this._x1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y1",{get:function(){return this._y1},set:function(e){this._y1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x2",{get:function(){return this._x2},set:function(e){this._x2=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y2",{get:function(){return this._y2},set:function(e){this._y2=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicRel=function(o,t,e,i,n,a,r){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL,"c",o),this._x=t,this._y=e,this._x1=i,this._y1=n,this._x2=a,this._y2=r},window.SVGPathSegCurvetoCubicRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicRel]"},window.SVGPathSegCurvetoCubicRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicRel(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x1",{get:function(){return this._x1},set:function(e){this._x1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y1",{get:function(){return this._y1},set:function(e){this._y1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x2",{get:function(){return this._x2},set:function(e){this._x2=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y2",{get:function(){return this._y2},set:function(e){this._y2=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticAbs=function(r,t,e,i,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS,"Q",r),this._x=t,this._y=e,this._x1=i,this._y1=n},window.SVGPathSegCurvetoQuadraticAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticAbs]"},window.SVGPathSegCurvetoQuadraticAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"x1",{get:function(){return this._x1},set:function(e){this._x1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"y1",{get:function(){return this._y1},set:function(e){this._y1=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticRel=function(r,t,e,i,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL,"q",r),this._x=t,this._y=e,this._x1=i,this._y1=n},window.SVGPathSegCurvetoQuadraticRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticRel]"},window.SVGPathSegCurvetoQuadraticRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticRel.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticRel(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"x1",{get:function(){return this._x1},set:function(e){this._x1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"y1",{get:function(){return this._y1},set:function(e){this._y1=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcAbs=function(d,t,e,i,n,a,r,s){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_ARC_ABS,"A",d),this._x=t,this._y=e,this._r1=i,this._r2=n,this._angle=a,this._largeArcFlag=r,this._sweepFlag=s},window.SVGPathSegArcAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegArcAbs.prototype.toString=function(){return"[object SVGPathSegArcAbs]"},window.SVGPathSegArcAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},window.SVGPathSegArcAbs.prototype.clone=function(){return new window.SVGPathSegArcAbs(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(window.SVGPathSegArcAbs.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"r1",{get:function(){return this._r1},set:function(e){this._r1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"r2",{get:function(){return this._r2},set:function(e){this._r2=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"angle",{get:function(){return this._angle},set:function(e){this._angle=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(e){this._largeArcFlag=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(e){this._sweepFlag=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcRel=function(d,t,e,i,n,a,r,s){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_ARC_REL,"a",d),this._x=t,this._y=e,this._r1=i,this._r2=n,this._angle=a,this._largeArcFlag=r,this._sweepFlag=s},window.SVGPathSegArcRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegArcRel.prototype.toString=function(){return"[object SVGPathSegArcRel]"},window.SVGPathSegArcRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},window.SVGPathSegArcRel.prototype.clone=function(){return new window.SVGPathSegArcRel(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(window.SVGPathSegArcRel.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"r1",{get:function(){return this._r1},set:function(e){this._r1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"r2",{get:function(){return this._r2},set:function(e){this._r2=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"angle",{get:function(){return this._angle},set:function(e){this._angle=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(e){this._largeArcFlag=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(e){this._sweepFlag=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalAbs=function(a,t){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS,"H",a),this._x=t},window.SVGPathSegLinetoHorizontalAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoHorizontalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalAbs]"},window.SVGPathSegLinetoHorizontalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},window.SVGPathSegLinetoHorizontalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalAbs(void 0,this._x)},Object.defineProperty(window.SVGPathSegLinetoHorizontalAbs.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalRel=function(a,t){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL,"h",a),this._x=t},window.SVGPathSegLinetoHorizontalRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoHorizontalRel.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalRel]"},window.SVGPathSegLinetoHorizontalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},window.SVGPathSegLinetoHorizontalRel.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalRel(void 0,this._x)},Object.defineProperty(window.SVGPathSegLinetoHorizontalRel.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalAbs=function(a,t){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS,"V",a),this._y=t},window.SVGPathSegLinetoVerticalAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoVerticalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalAbs]"},window.SVGPathSegLinetoVerticalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},window.SVGPathSegLinetoVerticalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoVerticalAbs(void 0,this._y)},Object.defineProperty(window.SVGPathSegLinetoVerticalAbs.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalRel=function(a,t){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL,"v",a),this._y=t},window.SVGPathSegLinetoVerticalRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoVerticalRel.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalRel]"},window.SVGPathSegLinetoVerticalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},window.SVGPathSegLinetoVerticalRel.prototype.clone=function(){return new window.SVGPathSegLinetoVerticalRel(void 0,this._y)},Object.defineProperty(window.SVGPathSegLinetoVerticalRel.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothAbs=function(r,t,e,i,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS,"S",r),this._x=t,this._y=e,this._x2=i,this._y2=n},window.SVGPathSegCurvetoCubicSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothAbs]"},window.SVGPathSegCurvetoCubicSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicSmoothAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"x2",{get:function(){return this._x2},set:function(e){this._x2=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"y2",{get:function(){return this._y2},set:function(e){this._y2=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothRel=function(r,t,e,i,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL,"s",r),this._x=t,this._y=e,this._x2=i,this._y2=n},window.SVGPathSegCurvetoCubicSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothRel]"},window.SVGPathSegCurvetoCubicSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"x2",{get:function(){return this._x2},set:function(e){this._x2=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"y2",{get:function(){return this._y2},set:function(e){this._y2=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothAbs=function(a,t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS,"T",a),this._x=t,this._y=e},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothAbs]"},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothRel=function(a,t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL,"t",a),this._x=t,this._y=e},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothRel]"},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),window.SVGPathElement.prototype.createSVGPathSegClosePath=function(){return new window.SVGPathSegClosePath(void 0)},window.SVGPathElement.prototype.createSVGPathSegMovetoAbs=function(a,t){return new window.SVGPathSegMovetoAbs(void 0,a,t)},window.SVGPathElement.prototype.createSVGPathSegMovetoRel=function(a,t){return new window.SVGPathSegMovetoRel(void 0,a,t)},window.SVGPathElement.prototype.createSVGPathSegLinetoAbs=function(a,t){return new window.SVGPathSegLinetoAbs(void 0,a,t)},window.SVGPathElement.prototype.createSVGPathSegLinetoRel=function(a,t){return new window.SVGPathSegLinetoRel(void 0,a,t)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs=function(s,t,e,i,n,a){return new window.SVGPathSegCurvetoCubicAbs(void 0,s,t,e,i,n,a)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel=function(s,t,e,i,n,a){return new window.SVGPathSegCurvetoCubicRel(void 0,s,t,e,i,n,a)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs=function(a,t,e,i){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,a,t,e,i)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel=function(a,t,e,i){return new window.SVGPathSegCurvetoQuadraticRel(void 0,a,t,e,i)},window.SVGPathElement.prototype.createSVGPathSegArcAbs=function(o,t,e,i,n,a,r){return new window.SVGPathSegArcAbs(void 0,o,t,e,i,n,a,r)},window.SVGPathElement.prototype.createSVGPathSegArcRel=function(o,t,e,i,n,a,r){return new window.SVGPathSegArcRel(void 0,o,t,e,i,n,a,r)},window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs=function(e){return new window.SVGPathSegLinetoHorizontalAbs(void 0,e)},window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel=function(e){return new window.SVGPathSegLinetoHorizontalRel(void 0,e)},window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs=function(e){return new window.SVGPathSegLinetoVerticalAbs(void 0,e)},window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel=function(e){return new window.SVGPathSegLinetoVerticalRel(void 0,e)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs=function(a,t,e,i){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,a,t,e,i)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel=function(a,t,e,i){return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,a,t,e,i)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs=function(a,t){return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,a,t)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel=function(a,t){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,a,t)},"getPathSegAtLength"in window.SVGPathElement.prototype||(window.SVGPathElement.prototype.getPathSegAtLength=function(a){if(void 0===a||!isFinite(a))throw"Invalid arguments.";var t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d",this.getAttribute("d"));var e=t.pathSegList.numberOfItems-1;if(0>=e)return 0;do{if(t.pathSegList.removeItem(e),a>t.getTotalLength())break;e--}while(0<e);return e})),"SVGPathSegList"in window||(window.SVGPathSegList=function(e){this._pathElement=e,this._list=this._parsePath(this._pathElement.getAttribute("d")),this._mutationObserverConfig={attributes:!0,attributeFilter:["d"]},this._pathElementMutationObserver=new MutationObserver(this._updateListFromPathMutations.bind(this)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},window.SVGPathSegList.prototype.classname="SVGPathSegList",Object.defineProperty(window.SVGPathSegList.prototype,"numberOfItems",{get:function(){return this._checkPathSynchronizedToList(),this._list.length},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"pathSegList",{get:function(){return this._pathSegList||(this._pathSegList=new window.SVGPathSegList(this)),this._pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"normalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"animatedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"animatedNormalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),window.SVGPathSegList.prototype._checkPathSynchronizedToList=function(){this._updateListFromPathMutations(this._pathElementMutationObserver.takeRecords())},window.SVGPathSegList.prototype._updateListFromPathMutations=function(a){if(this._pathElement){var i=!1;a.forEach(function(e){"d"==e.attributeName&&(i=!0)}),i&&(this._list=this._parsePath(this._pathElement.getAttribute("d")))}},window.SVGPathSegList.prototype._writeListToPath=function(){this._pathElementMutationObserver.disconnect(),this._pathElement.setAttribute("d",window.SVGPathSegList._pathSegArrayAsString(this._list)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},window.SVGPathSegList.prototype.segmentChanged=function(){this._writeListToPath()},window.SVGPathSegList.prototype.clear=function(){this._checkPathSynchronizedToList(),this._list.forEach(function(e){e._owningPathSegList=null}),this._list=[],this._writeListToPath()},window.SVGPathSegList.prototype.initialize=function(e){return this._checkPathSynchronizedToList(),this._list=[e],e._owningPathSegList=this,this._writeListToPath(),e},window.SVGPathSegList.prototype._checkValidIndex=function(e){if(isNaN(e)||0>e||e>=this.numberOfItems)throw"INDEX_SIZE_ERR"},window.SVGPathSegList.prototype.getItem=function(e){return this._checkPathSynchronizedToList(),this._checkValidIndex(e),this._list[e]},window.SVGPathSegList.prototype.insertItemBefore=function(a,t){return this._checkPathSynchronizedToList(),t>this.numberOfItems&&(t=this.numberOfItems),a._owningPathSegList&&(a=a.clone()),this._list.splice(t,0,a),a._owningPathSegList=this,this._writeListToPath(),a},window.SVGPathSegList.prototype.replaceItem=function(a,t){return this._checkPathSynchronizedToList(),a._owningPathSegList&&(a=a.clone()),this._checkValidIndex(t),this._list[t]=a,a._owningPathSegList=this,this._writeListToPath(),a},window.SVGPathSegList.prototype.removeItem=function(a){this._checkPathSynchronizedToList(),this._checkValidIndex(a);var t=this._list[a];return this._list.splice(a,1),this._writeListToPath(),t},window.SVGPathSegList.prototype.appendItem=function(e){return this._checkPathSynchronizedToList(),e._owningPathSegList&&(e=e.clone()),this._list.push(e),e._owningPathSegList=this,this._writeListToPath(),e},window.SVGPathSegList._pathSegArrayAsString=function(a){var r="",e=!0;return a.forEach(function(a){e?(e=!1,r+=a._asPathString()):r+=" "+a._asPathString()}),r},window.SVGPathSegList.prototype._parsePath=function(o){if(!o||0==o.length)return[];var d=this,e=function(){this.pathSegList=[]};e.prototype.appendSegment=function(e){this.pathSegList.push(e)};var i=function(e){this._string=e,this._currentIndex=0,this._endIndex=this._string.length,this._previousCommand=window.SVGPathSeg.PATHSEG_UNKNOWN,this._skipOptionalSpaces()};i.prototype._isCurrentSpace=function(){var e=this._string[this._currentIndex];return" ">=e&&(" "==e||"\n"==e||"\t"==e||"\r"==e||"\f"==e)},i.prototype._skipOptionalSpaces=function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex++;return this._currentIndex<this._endIndex},i.prototype._skipOptionalSpacesOrDelimiter=function(){return(!(this._currentIndex<this._endIndex)||this._isCurrentSpace()||","==this._string.charAt(this._currentIndex))&&(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&","==this._string.charAt(this._currentIndex)&&(this._currentIndex++,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)},i.prototype.hasMoreData=function(){return this._currentIndex<this._endIndex},i.prototype.peekSegmentType=function(){var e=this._string[this._currentIndex];return this._pathSegTypeFromChar(e)},i.prototype._pathSegTypeFromChar=function(e){return"Z"===e||"z"===e?window.SVGPathSeg.PATHSEG_CLOSEPATH:"M"===e?window.SVGPathSeg.PATHSEG_MOVETO_ABS:"m"===e?window.SVGPathSeg.PATHSEG_MOVETO_REL:"L"===e?window.SVGPathSeg.PATHSEG_LINETO_ABS:"l"===e?window.SVGPathSeg.PATHSEG_LINETO_REL:"C"===e?window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:"c"===e?window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:"Q"===e?window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:"q"===e?window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:"A"===e?window.SVGPathSeg.PATHSEG_ARC_ABS:"a"===e?window.SVGPathSeg.PATHSEG_ARC_REL:"H"===e?window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:"h"===e?window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:"V"===e?window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:"v"===e?window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:"S"===e?window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:"s"===e?window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:"T"===e?window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:"t"===e?window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:window.SVGPathSeg.PATHSEG_UNKNOWN},i.prototype._nextCommandHelper=function(a,t){return("+"==a||"-"==a||"."==a||"0"<=a&&"9">=a)&&t!=window.SVGPathSeg.PATHSEG_CLOSEPATH?t==window.SVGPathSeg.PATHSEG_MOVETO_ABS?window.SVGPathSeg.PATHSEG_LINETO_ABS:t==window.SVGPathSeg.PATHSEG_MOVETO_REL?window.SVGPathSeg.PATHSEG_LINETO_REL:t:window.SVGPathSeg.PATHSEG_UNKNOWN},i.prototype.initialCommandIsMoveTo=function(){if(!this.hasMoreData())return!0;var e=this.peekSegmentType();return e==window.SVGPathSeg.PATHSEG_MOVETO_ABS||e==window.SVGPathSeg.PATHSEG_MOVETO_REL},i.prototype._parseNumber=function(){var g=0,t=0,e=1,i=0,n=1,a=1,r=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:this._currentIndex<this._endIndex&&"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,n=-1),!(this._currentIndex==this._endIndex||("0">this._string.charAt(this._currentIndex)||"9"<this._string.charAt(this._currentIndex))&&"."!=this._string.charAt(this._currentIndex))){for(var s=this._currentIndex;this._currentIndex<this._endIndex&&"0"<=this._string.charAt(this._currentIndex)&&"9">=this._string.charAt(this._currentIndex);)this._currentIndex++;if(this._currentIndex!=s)for(var o=this._currentIndex-1,c=1;o>=s;)t+=c*(this._string.charAt(o--)-"0"),c*=10;if(this._currentIndex<this._endIndex&&"."==this._string.charAt(this._currentIndex)){if(this._currentIndex++,this._currentIndex>=this._endIndex||"0">this._string.charAt(this._currentIndex)||"9"<this._string.charAt(this._currentIndex))return;for(;this._currentIndex<this._endIndex&&"0"<=this._string.charAt(this._currentIndex)&&"9">=this._string.charAt(this._currentIndex);)e*=10,i+=(this._string.charAt(this._currentIndex)-"0")/e,this._currentIndex+=1}if(this._currentIndex!=r&&this._currentIndex+1<this._endIndex&&("e"==this._string.charAt(this._currentIndex)||"E"==this._string.charAt(this._currentIndex))&&"x"!=this._string.charAt(this._currentIndex+1)&&"m"!=this._string.charAt(this._currentIndex+1)){if(this._currentIndex++,"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,a=-1),this._currentIndex>=this._endIndex||"0">this._string.charAt(this._currentIndex)||"9"<this._string.charAt(this._currentIndex))return;for(;this._currentIndex<this._endIndex&&"0"<=this._string.charAt(this._currentIndex)&&"9">=this._string.charAt(this._currentIndex);)g*=10,g+=this._string.charAt(this._currentIndex)-"0",this._currentIndex++}var d=t+i;if(d*=n,g&&(d*=k(10,a*g)),r!=this._currentIndex)return this._skipOptionalSpacesOrDelimiter(),d}},i.prototype._parseArcFlag=function(){if(!(this._currentIndex>=this._endIndex)){var a=!1,t=this._string.charAt(this._currentIndex++);if("0"==t)a=!1;else{if("1"!=t)return;a=!0}return this._skipOptionalSpacesOrDelimiter(),a}},i.prototype.parseSegment=function(){var e=this._string[this._currentIndex],t=this._pathSegTypeFromChar(e);if(t==window.SVGPathSeg.PATHSEG_UNKNOWN){if(this._previousCommand==window.SVGPathSeg.PATHSEG_UNKNOWN)return null;if((t=this._nextCommandHelper(e,this._previousCommand))==window.SVGPathSeg.PATHSEG_UNKNOWN)return null}else this._currentIndex++;switch(this._previousCommand=t,t){case window.SVGPathSeg.PATHSEG_MOVETO_REL:return new window.SVGPathSegMovetoRel(d,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_MOVETO_ABS:return new window.SVGPathSegMovetoAbs(d,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_REL:return new window.SVGPathSegLinetoRel(d,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_ABS:return new window.SVGPathSegLinetoAbs(d,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:return new window.SVGPathSegLinetoHorizontalRel(d,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:return new window.SVGPathSegLinetoHorizontalAbs(d,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:return new window.SVGPathSegLinetoVerticalRel(d,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:return new window.SVGPathSegLinetoVerticalAbs(d,this._parseNumber());case window.SVGPathSeg.PATHSEG_CLOSEPATH:return this._skipOptionalSpaces(),new window.SVGPathSegClosePath(d);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:var a={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoCubicRel(d,a.x,a.y,a.x1,a.y1,a.x2,a.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:return a={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicAbs(d,a.x,a.y,a.x1,a.y1,a.x2,a.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:return a={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicSmoothRel(d,a.x,a.y,a.x2,a.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:return a={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicSmoothAbs(d,a.x,a.y,a.x2,a.y2);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:return a={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoQuadraticRel(d,a.x,a.y,a.x1,a.y1);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:return a={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoQuadraticAbs(d,a.x,a.y,a.x1,a.y1);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:return new window.SVGPathSegCurvetoQuadraticSmoothRel(d,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:return new window.SVGPathSegCurvetoQuadraticSmoothAbs(d,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_ARC_REL:return a={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegArcRel(d,a.x,a.y,a.x1,a.y1,a.arcAngle,a.arcLarge,a.arcSweep);case window.SVGPathSeg.PATHSEG_ARC_ABS:return a={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegArcAbs(d,a.x,a.y,a.x1,a.y1,a.arcAngle,a.arcLarge,a.arcSweep);default:throw"Unknown path seg type.";}};var n=new e,a=new i(o);if(!a.initialCommandIsMoveTo())return[];for(;a.hasMoreData();){var r=a.parseSegment();if(!r)return[];n.appendSegment(r)}return n.pathSegList}),n.axis=function(){},n.axis.labels=function(a){var t=this.internal;arguments.length&&(Object.keys(a).forEach(function(e){t.axis.setLabelText(e,a[e])}),t.axis.updateLabels())},n.axis.max=function(a){var t=this.internal,e=t.config;return arguments.length?void("object"===(void 0===a?"undefined":H(a))?(M(a.x)&&(e.axis_x_max=a.x),M(a.y)&&(e.axis_y_max=a.y),M(a.y2)&&(e.axis_y2_max=a.y2)):e.axis_y_max=e.axis_y2_max=a,t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})):{x:e.axis_x_max,y:e.axis_y_max,y2:e.axis_y2_max}},n.axis.min=function(a){var t=this.internal,e=t.config;return arguments.length?void("object"===(void 0===a?"undefined":H(a))?(M(a.x)&&(e.axis_x_min=a.x),M(a.y)&&(e.axis_y_min=a.y),M(a.y2)&&(e.axis_y2_min=a.y2)):e.axis_y_min=e.axis_y2_min=a,t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})):{x:e.axis_x_min,y:e.axis_y_min,y2:e.axis_y2_min}},n.axis.range=function(e){return arguments.length?void(W(e.max)&&this.axis.max(e.max),W(e.min)&&this.axis.min(e.min)):{max:this.axis.max(),min:this.axis.min()}},n.category=function(a,t){var e=this.internal,i=e.config;return 1<arguments.length&&(i.axis_x_categories[a]=t,e.redraw()),i.axis_x_categories[a]},n.categories=function(a){var t=this.internal,e=t.config;return arguments.length?(e.axis_x_categories=a,t.redraw(),e.axis_x_categories):e.axis_x_categories},n.resize=function(a){var t=this.internal.config;t.size_width=a?a.width:null,t.size_height=a?a.height:null,this.flush()},n.flush=function(){this.internal.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})},n.destroy=function(){var a=this.internal;if(window.clearInterval(a.intervalForObserveInserted),void 0!==a.resizeTimeout&&window.clearTimeout(a.resizeTimeout),window.detachEvent)window.detachEvent("onresize",a.resizeIfElementDisplayed);else if(window.removeEventListener)window.removeEventListener("resize",a.resizeIfElementDisplayed);else{var t=window.onresize;t&&t.add&&t.remove&&t.remove(a.resizeFunction)}return a.resizeFunction.remove(),a.selectChart.classed("c3",!1).html(""),Object.keys(a).forEach(function(t){a[t]=null}),null},n.color=function(e){return this.internal.color(e)},n.data=function(a){var t=this.internal.data.targets;return void 0===a?t:t.filter(function(t){return 0<=[].concat(a).indexOf(t.id)})},n.data.shown=function(e){return this.internal.filterTargetsToShow(this.data(e))},n.data.values=function(a){var t,e=null;return a&&(e=(t=this.data(a))[0]?t[0].values.map(function(e){return e.value}):null),e},n.data.names=function(e){return this.internal.clearLegendItemTextBoxCache(),this.internal.updateDataAttributes("names",e)},n.data.colors=function(e){return this.internal.updateDataAttributes("colors",e)},n.data.axes=function(e){return this.internal.updateDataAttributes("axes",e)},n.flow=function(s){var p,e,t,i,a,r,n,o=this.internal,d=[],l=o.getMaxDataCount(),c=0,_=0;if(s.json)e=o.convertJsonToData(s.json,s.keys);else if(s.rows)e=o.convertRowsToData(s.rows);else{if(!s.columns)return;e=o.convertColumnsToData(s.columns)}p=o.convertDataToTargets(e,!0),o.data.targets.forEach(function(e){var t,i,r=!1;for(t=0;t<p.length;t++)if(e.id===p[t].id){for(r=!0,e.values[e.values.length-1]&&(_=e.values[e.values.length-1].index+1),c=p[t].values.length,i=0;i<c;i++)p[t].values[i].index=_+i,o.isTimeSeries()||(p[t].values[i].x=_+i);e.values=e.values.concat(p[t].values),p.splice(t,1);break}r||d.push(e.id)}),o.data.targets.forEach(function(a){var t,e;for(t=0;t<d.length;t++)if(a.id===d[t])for(_=a.values[a.values.length-1].index+1,e=0;e<c;e++)a.values.push({id:a.id,index:_+e,x:o.isTimeSeries()?o.getOtherTargetX(_+e):_+e,value:null})}),o.data.targets.length&&p.forEach(function(a){var t,r=[];for(t=o.data.targets[0].values[0].index;t<_;t++)r.push({id:a.id,index:t,x:o.isTimeSeries()?o.getOtherTargetX(t):t,value:null});a.values.forEach(function(e){e.index+=_,o.isTimeSeries()||(e.x+=_)}),a.values=r.concat(a.values)}),o.data.targets=o.data.targets.concat(p),o.getMaxDataCount(),a=(i=o.data.targets[0]).values[0],W(s.to)?(c=0,n=o.isTimeSeries()?o.parseDate(s.to):s.to,i.values.forEach(function(e){e.x<n&&c++})):W(s.length)&&(c=s.length),l?1===l&&o.isTimeSeries()&&(r=(i.values[i.values.length-1].x-a.x)/2,t=[new Date(+a.x-r),new Date(+a.x+r)],o.updateXDomain(null,!0,!0,!1,t)):(r=o.isTimeSeries()?1<i.values.length?i.values[i.values.length-1].x-a.x:a.x-o.getXDomain(o.data.targets)[0]:1,t=[a.x-r,a.x],o.updateXDomain(null,!0,!0,!1,t)),o.updateTargets(o.data.targets),o.redraw({flow:{index:a.index,length:c,duration:M(s.duration)?s.duration:o.config.transition_duration,done:s.done,orgDataCount:l},withLegend:!0,withTransition:1<l,withTrimXDomain:!1,withUpdateXAxis:!0})},p.generateFlow=function(i){var f=this,e=f.config,t=f.d3;return function(){var a,r,n,s,o=i.targets,d=i.flow,l=i.drawBar,c=i.drawLine,h=i.drawArea,g=i.cx,p=i.cy,_=i.xv,x=i.xForText,u=i.yForText,m=i.duration,y=d.index,S=d.length,v=f.getValueOnIndex(f.data.targets[0].values,y),b=f.getValueOnIndex(f.data.targets[0].values,y+S),T=f.x.domain(),A=d.duration||m,P=d.done||function(){},C=f.generateWait(),L=f.xgrid||t.selectAll([]),V=f.xgridLines||t.selectAll([]),G=f.mainRegion||t.selectAll([]),w=f.mainText||t.selectAll([]),E=f.mainBar||t.selectAll([]),I=f.mainLine||t.selectAll([]),R=f.mainArea||t.selectAll([]),k=f.mainCircle||t.selectAll([]);f.flowing=!0,f.data.targets.forEach(function(e){e.values.splice(0,S)}),s=f.updateXDomain(o,!0,!0),f.updateXGrid&&f.updateXGrid(!0),d.orgDataCount?a=1===d.orgDataCount||(v&&v.x)===(b&&b.x)?f.x(T[0])-f.x(s[0]):f.isTimeSeries()?f.x(T[0])-f.x(s[0]):f.x(v.x)-f.x(b.x):1===f.data.targets[0].values.length?f.isTimeSeries()?(v=f.getValueOnIndex(f.data.targets[0].values,0),b=f.getValueOnIndex(f.data.targets[0].values,f.data.targets[0].values.length-1),a=f.x(v.x)-f.x(b.x)):a=Q(s)/2:a=f.x(T[0])-f.x(s[0]),r=Q(T)/Q(s),n="translate("+a+",0) scale("+r+",1)",f.hideXGridFocus(),t.transition().ease("linear").duration(A).each(function(){C.add(f.axes.x.transition().call(f.xAxis)),C.add(E.transition().attr("transform",n)),C.add(I.transition().attr("transform",n)),C.add(R.transition().attr("transform",n)),C.add(k.transition().attr("transform",n)),C.add(w.transition().attr("transform",n)),C.add(G.filter(f.isRegionOnX).transition().attr("transform",n)),C.add(L.transition().attr("transform",n)),C.add(V.transition().attr("transform",n))}).call(C,function(){var i,t=[],a=[],r=[];if(S){for(i=0;i<S;i++)t.push("."+Y.shape+"-"+(y+i)),a.push("."+Y.text+"-"+(y+i)),r.push("."+Y.eventRect+"-"+(y+i));f.svg.selectAll("."+Y.shapes).selectAll(t).remove(),f.svg.selectAll("."+Y.texts).selectAll(a).remove(),f.svg.selectAll("."+Y.eventRects).selectAll(r).remove(),f.svg.select("."+Y.xgrid).remove()}L.attr("transform",null).attr(f.xgridAttr),V.attr("transform",null),V.select("line").attr("x1",e.axis_rotated?0:_).attr("x2",e.axis_rotated?f.width:_),V.select("text").attr("x",e.axis_rotated?f.width:0).attr("y",_),E.attr("transform",null).attr("d",l),I.attr("transform",null).attr("d",c),R.attr("transform",null).attr("d",h),k.attr("transform",null).attr("cx",g).attr("cy",p),w.attr("transform",null).attr("x",x).attr("y",u).style("fill-opacity",f.opacityForText.bind(f)),G.attr("transform",null),G.select("rect").filter(f.isRegionOnX).attr("x",f.regionX.bind(f)).attr("width",f.regionWidth.bind(f)),e.interaction_enabled&&f.redrawEventRect(),P(),f.flowing=!1})}},n.focus=function(a){var t,e=this.internal;a=e.mapToTargetIds(a),t=e.svg.selectAll(e.selectorTargets(a.filter(e.isTargetToShow,e))),this.revert(),this.defocus(),t.classed(Y.focused,!0).classed(Y.defocused,!1),e.hasArcType()&&e.expandArc(a),e.toggleFocusLegend(a,!0),e.focusedTargetIds=a,e.defocusedTargetIds=e.defocusedTargetIds.filter(function(t){return 0>a.indexOf(t)})},n.defocus=function(a){var t=this.internal;a=t.mapToTargetIds(a),t.svg.selectAll(t.selectorTargets(a.filter(t.isTargetToShow,t))).classed(Y.focused,!1).classed(Y.defocused,!0),t.hasArcType()&&t.unexpandArc(a),t.toggleFocusLegend(a,!1),t.focusedTargetIds=t.focusedTargetIds.filter(function(t){return 0>a.indexOf(t)}),t.defocusedTargetIds=a},n.revert=function(a){var t=this.internal;a=t.mapToTargetIds(a),t.svg.selectAll(t.selectorTargets(a)).classed(Y.focused,!1).classed(Y.defocused,!1),t.hasArcType()&&t.unexpandArc(a),t.config.legend_show&&(t.showLegend(a.filter(t.isLegendToShow.bind(t))),t.legend.selectAll(t.selectorLegends(a)).filter(function(){return t.d3.select(this).classed(Y.legendItemFocused)}).classed(Y.legendItemFocused,!1)),t.focusedTargetIds=[],t.defocusedTargetIds=[]},n.xgrids=function(a){var t=this.internal,e=t.config;return a?(e.grid_x_lines=a,t.redrawWithoutRescale(),e.grid_x_lines):e.grid_x_lines},n.xgrids.add=function(a){var t=this.internal;return this.xgrids(t.config.grid_x_lines.concat(a||[]))},n.xgrids.remove=function(e){this.internal.removeGridLines(e,!0)},n.ygrids=function(a){var t=this.internal,e=t.config;return a?(e.grid_y_lines=a,t.redrawWithoutRescale(),e.grid_y_lines):e.grid_y_lines},n.ygrids.add=function(a){var t=this.internal;return this.ygrids(t.config.grid_y_lines.concat(a||[]))},n.ygrids.remove=function(e){this.internal.removeGridLines(e,!1)},n.groups=function(a){var t=this.internal,e=t.config;return U(a)?e.data_groups:(e.data_groups=a,t.redraw(),e.data_groups)},n.legend=function(){},n.legend.show=function(a){var t=this.internal;t.showLegend(t.mapToTargetIds(a)),t.updateAndRedraw({withLegend:!0})},n.legend.hide=function(a){var t=this.internal;t.hideLegend(t.mapToTargetIds(a)),t.updateAndRedraw({withLegend:!0})},n.load=function(a){var t=this.internal,r=t.config;a.xs&&t.addXs(a.xs),"names"in a&&n.data.names.bind(this)(a.names),"classes"in a&&Object.keys(a.classes).forEach(function(t){r.data_classes[t]=a.classes[t]}),"categories"in a&&t.isCategorized()&&(r.axis_x_categories=a.categories),"axes"in a&&Object.keys(a.axes).forEach(function(t){r.data_axes[t]=a.axes[t]}),"colors"in a&&Object.keys(a.colors).forEach(function(t){r.data_colors[t]=a.colors[t]}),"cacheIds"in a&&t.hasCaches(a.cacheIds)?t.load(t.getCaches(a.cacheIds),a.done):"unload"in a?t.unload(t.mapToTargetIds("boolean"==typeof a.unload&&a.unload?null:a.unload),function(){t.loadFromArgs(a)}):t.loadFromArgs(a)},n.unload=function(a){var i=this.internal;(a=a||{})instanceof Array?a={ids:a}:"string"==typeof a&&(a={ids:[a]}),i.unload(i.mapToTargetIds(a.ids),function(){i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),a.done&&a.done()})},n.regions=function(a){var t=this.internal,e=t.config;return a?(e.regions=a,t.redrawWithoutRescale(),e.regions):e.regions},n.regions.add=function(a){var t=this.internal,e=t.config;return a?(e.regions=e.regions.concat(a),t.redrawWithoutRescale(),e.regions):e.regions},n.regions.remove=function(i){var t,o,e,a=this.internal,r=a.config;return i=i||{},t=a.getOption(i,"duration",r.transition_duration),o=a.getOption(i,"classes",[Y.region]),e=a.main.select("."+Y.regions).selectAll(o.map(function(e){return"."+e})),(t?e.transition().duration(t):e).style("opacity",0).remove(),r.regions=r.regions.filter(function(a){var i=!1;return!a.class||(a.class.split(" ").forEach(function(e){0<=o.indexOf(e)&&(i=!0)}),!i)}),r.regions},n.selected=function(a){var t=this.internal,e=t.d3;return e.merge(t.main.selectAll("."+Y.shapes+t.getTargetSelectorSuffix(a)).selectAll("."+Y.shape).filter(function(){return e.select(this).classed(Y.SELECTED)}).map(function(e){return e.map(function(a){var t=a.__data__;return t.data?t.data:t})}))},n.select=function(i,_,x){var n=this.internal,a=n.d3,r=n.config;r.data_selection_enabled&&n.main.selectAll("."+Y.shapes).selectAll("."+Y.shape).each(function(s,o){var c=a.select(this),d=s.data?s.data.id:s.id,l=n.getToggle(this,s).bind(n),h=r.data_selection_grouped||!i||0<=i.indexOf(d),g=!_||0<=_.indexOf(o),u=c.classed(Y.SELECTED);c.classed(Y.line)||c.classed(Y.area)||(h&&g?r.data_selection_isselectable(s)&&!u&&l(!0,c.classed(Y.SELECTED,!0),s,o):W(x)&&x&&u&&l(!1,c.classed(Y.SELECTED,!1),s,o))})},n.unselect=function(i,p){var _=this.internal,n=_.d3,a=_.config;a.data_selection_enabled&&_.main.selectAll("."+Y.shapes).selectAll("."+Y.shape).each(function(r,s){var o=n.select(this),c=r.data?r.data.id:r.id,d=_.getToggle(this,r).bind(_),l=a.data_selection_grouped||!i||0<=i.indexOf(c),x=!p||0<=p.indexOf(s),h=o.classed(Y.SELECTED);o.classed(Y.line)||o.classed(Y.area)||l&&x&&a.data_selection_isselectable(r)&&h&&d(!1,o.classed(Y.SELECTED,!1),r,s)})},n.show=function(a,t){var e,i=this.internal;a=i.mapToTargetIds(a),t=t||{},i.removeHiddenTargetIds(a),(e=i.svg.selectAll(i.selectorTargets(a))).transition().style("opacity",1,"important").call(i.endall,function(){e.style("opacity",null).style("opacity",1)}),t.withLegend&&i.showLegend(a),i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},n.hide=function(a,t){var e,i=this.internal;a=i.mapToTargetIds(a),t=t||{},i.addHiddenTargetIds(a),(e=i.svg.selectAll(i.selectorTargets(a))).transition().style("opacity",0,"important").call(i.endall,function(){e.style("opacity",null).style("opacity",0)}),t.withLegend&&i.hideLegend(a),i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},n.toggle=function(a,r){var e=this,i=this.internal;i.mapToTargetIds(a).forEach(function(a){i.isTargetToShow(a)?e.hide(a,r):e.show(a,r)})},n.tooltip=function(){},n.tooltip.show=function(a){var t,e,i=this.internal;a.mouse&&(e=a.mouse),a.data?i.isMultipleX()?(e=[i.x(a.data.x),i.getYScale(a.data.id)(a.data.value)],t=null):t=M(a.data.index)?a.data.index:i.getIndexByX(a.data.x):void 0===a.x?void 0!==a.index&&(t=a.index):t=i.getIndexByX(a.x),i.dispatchEvent("mouseover",t,e),i.dispatchEvent("mousemove",t,e),i.config.tooltip_onshow.call(i,a.data)},n.tooltip.hide=function(){this.internal.dispatchEvent("mouseout",0),this.internal.config.tooltip_onhide.call(this)},n.transform=function(a,t){var e=this.internal,i=0<=["pie","donut"].indexOf(a)?{withTransform:!0}:null;e.transformTo(t,a,i)},p.transformTo=function(s,t,e){var i=this,n=!i.hasArcType(),o=e||{withTransitionForAxis:n};o.withTransitionForTransform=!1,i.transiting=!1,i.setTargetType(s,t),i.updateTargets(i.data.targets),i.updateAndRedraw(o)},n.x=function(a){var t=this.internal;return arguments.length&&(t.updateTargetX(t.data.targets,a),t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),t.data.xs},n.xs=function(a){var t=this.internal;return arguments.length&&(t.updateTargetXs(t.data.targets,a),t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),t.data.xs},n.zoom=function(a){var i=this.internal;return a&&(i.isTimeSeries()&&(a=a.map(function(e){return i.parseDate(e)})),i.brush.extent(a),i.redraw({withUpdateXDomain:!0,withY:i.config.zoom_rescale}),i.config.zoom_onzoom.call(this,i.x.orgDomain())),i.brush.extent()},n.zoom.enable=function(a){var t=this.internal;t.config.zoom_enabled=a,t.updateAndRedraw()},n.unzoom=function(){var e=this.internal;e.brush.clear().update(),e.redraw({withUpdateXDomain:!0})},n.zoom.max=function(a){var t=this.internal,e=t.config,i=t.d3;return 0===a||a?void(e.zoom_x_max=i.max([t.orgXDomain[1],a])):e.zoom_x_max},n.zoom.min=function(a){var t=this.internal,e=t.config,i=t.d3;return 0===a||a?void(e.zoom_x_min=i.min([t.orgXDomain[0],a])):e.zoom_x_min},n.zoom.range=function(e){return arguments.length?void(W(e.max)&&this.domain.max(e.max),W(e.min)&&this.domain.min(e.min)):{max:this.domain.max(),min:this.domain.min()}},p.initPie=function(){var e=this.d3;this.pie=e.layout.pie().value(function(e){return e.values.reduce(function(a,t){return a+t.value},0)}),this.pie.sort(this.getOrderFunction()||null)},p.updateRadius=function(){var a=this,t=a.config,e=t.gauge_width||t.donut_width,i=a.filterTargetsToShow(a.data.targets).length*a.config.gauge_arcs_minWidth;a.radiusExpanded=X(a.arcWidth,a.arcHeight)/2*(a.hasType("gauge")?.85:1),a.radius=.95*a.radiusExpanded,a.innerRadiusRatio=e?(a.radius-e)/a.radius:.6,a.innerRadius=a.hasType("donut")||a.hasType("gauge")?a.radius*a.innerRadiusRatio:0,a.gaugeArcWidth=e||(i<=a.radius-a.innerRadius?a.radius-a.innerRadius:i<=a.radius?i:a.radius)},p.updateArc=function(){var e=this;e.svgArc=e.getSvgArc(),e.svgArcExpanded=e.getSvgArcExpanded(),e.svgArcExpandedSub=e.getSvgArcExpanded(.98)},p.updateAngle=function(d){var t,e,i,n,a=this,r=a.config,s=!1,o=0;return r?(a.pie(a.filterTargetsToShow(a.data.targets)).forEach(function(t){s||t.data.id!==d.data.id||(s=!0,(d=t).index=o),o++}),isNaN(d.startAngle)&&(d.startAngle=0),isNaN(d.endAngle)&&(d.endAngle=d.startAngle),a.isGaugeType(d.data)&&(t=r.gauge_min,e=r.gauge_max,i=D*(r.gauge_fullCircle?2:1)/(e-t),n=d.value<t?0:d.value<e?d.value-t:e-t,d.startAngle=r.gauge_startingAngle,d.endAngle=d.startAngle+i*n),s?d:null):null},p.getSvgArc=function(){var r=this,t=r.hasType("gauge"),e=r.gaugeArcWidth/r.filterTargetsToShow(r.data.targets).length,s=r.d3.svg.arc().outerRadius(function(a){return t?r.radius-e*a.index:r.radius}).innerRadius(function(a){return t?r.radius-e*(a.index+1):r.innerRadius}),i=function(t,e){var i;return e?s(t):(i=r.updateAngle(t))?s(i):"M 0 0"};return i.centroid=s.centroid,i},p.getSvgArcExpanded=function(s){s=s||1;var o=this,e=o.hasType("gauge"),i=o.gaugeArcWidth/o.filterTargetsToShow(o.data.targets).length,t=X(o.radiusExpanded*s-o.radius,.8*i-100*(1-s)),a=o.d3.svg.arc().outerRadius(function(a){return e?o.radius-i*a.index+t:o.radiusExpanded*s}).innerRadius(function(a){return e?o.radius-i*(a.index+1):o.innerRadius});return function(e){var t=o.updateAngle(e);return t?a(t):"M 0 0"}},p.getArc=function(a,t,e){return e||this.isArcType(a.data)?this.svgArc(a,t):"M 0 0"},p.transformForArcLabel=function(o){var t,e,i,n,a,r=this,s=r.config,g=r.updateAngle(o),d="",l=r.hasType("gauge");if(g&&!l)t=this.svgArc.centroid(g),e=isNaN(t[0])?0:t[0],i=isNaN(t[1])?0:t[1],n=R(e*e+i*i),d="translate("+e*(a=r.hasType("donut")&&s.donut_label_ratio?N(s.donut_label_ratio)?s.donut_label_ratio(o,r.radius,n):s.donut_label_ratio:r.hasType("pie")&&s.pie_label_ratio?N(s.pie_label_ratio)?s.pie_label_ratio(o,r.radius,n):s.pie_label_ratio:r.radius&&n?(.375<36/r.radius?1.175-36/r.radius:.8)*r.radius/n:0)+","+i*a+")";else if(g&&l&&1<r.filterTargetsToShow(r.data.targets).length){var c=O(g.endAngle-D/2);d="translate("+(e=I(g.endAngle-D/2)*(r.radiusExpanded+25))+","+(i=c*(r.radiusExpanded+15-E(10*c))+3)+")"}return d},p.getArcRatio=function(a){var t=this.config,e=D*(this.hasType("gauge")&&!t.gauge_fullCircle?1:2);return a?(a.endAngle-a.startAngle)/e:null},p.convertToArcData=function(e){return this.addName({id:e.data.id,value:e.value,ratio:this.getArcRatio(e),index:e.index})},p.textForArcLabel=function(o){var t,e,i,n,a,r=this;return r.shouldShowArcLabel()?(e=(t=r.updateAngle(o))?t.value:null,i=r.getArcRatio(t),n=o.data.id,r.hasType("gauge")||r.meetsArcLabelThreshold(i)?(a=r.getArcLabelFormat())?a(e,i,n):r.defaultArcValueFormat(e,i):""):""},p.textForGaugeMinMax=function(a,t){var e=this.getGaugeLabelExtents();return e?e(a,t):a},p.expandArc=function(a){var t,e=this;e.transiting?t=window.setInterval(function(){e.transiting||(window.clearInterval(t),0<e.legend.selectAll(".c3-legend-item-focused").size()&&e.expandArc(a))},10):(a=e.mapToTargetIds(a),e.svg.selectAll(e.selectorTargets(a,"."+Y.chartArc)).each(function(a){e.shouldExpand(a.data.id)&&e.d3.select(this).selectAll("path").transition().duration(e.expandDuration(a.data.id)).attr("d",e.svgArcExpanded).transition().duration(2*e.expandDuration(a.data.id)).attr("d",e.svgArcExpandedSub).each(function(a){e.isDonutType(a.data)})}))},p.unexpandArc=function(a){var i=this;i.transiting||(a=i.mapToTargetIds(a),i.svg.selectAll(i.selectorTargets(a,"."+Y.chartArc)).selectAll("path").transition().duration(function(e){return i.expandDuration(e.data.id)}).attr("d",i.svgArc),i.svg.selectAll("."+Y.arc))},p.expandDuration=function(a){var t=this.config;return this.isDonutType(a)?t.donut_expand_duration:this.isGaugeType(a)?t.gauge_expand_duration:this.isPieType(a)?t.pie_expand_duration:50},p.shouldExpand=function(a){var t=this.config;return this.isDonutType(a)&&t.donut_expand||this.isGaugeType(a)&&t.gauge_expand||this.isPieType(a)&&t.pie_expand},p.shouldShowArcLabel=function(){var a=this.config,t=!0;return this.hasType("donut")?t=a.donut_label_show:this.hasType("pie")&&(t=a.pie_label_show),t},p.meetsArcLabelThreshold=function(a){var t=this.config;return a>=(this.hasType("donut")?t.donut_label_threshold:t.pie_label_threshold)},p.getArcLabelFormat=function(){var a=this.config,t=a.pie_label_format;return this.hasType("gauge")?t=a.gauge_label_format:this.hasType("donut")&&(t=a.donut_label_format),t},p.getGaugeLabelExtents=function(){return this.config.gauge_label_extents},p.getArcTitle=function(){return this.hasType("donut")?this.config.donut_title:""},p.updateTargetsForArc=function(i){var t,e=this,n=e.main,a=e.classChartArc.bind(e),r=e.classArcs.bind(e),s=e.classFocus.bind(e);(t=n.select("."+Y.chartArcs).selectAll("."+Y.chartArc).data(e.pie(i)).attr("class",function(e){return a(e)+s(e.data)}).enter().append("g").attr("class",a)).append("g").attr("class",r),t.append("text").attr("dy",e.hasType("gauge")?"-.1em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none")},p.initArc=function(){var e=this;e.arcs=e.main.select("."+Y.chart).append("g").attr("class",Y.chartArcs).attr("transform",e.getTranslate("arc")),e.arcs.append("text").attr("class",Y.chartArcsTitle).style("text-anchor","middle").text(e.getArcTitle())},p.redrawArc=function(i,t,e){var n,a,r,g=this,o=g.d3,s=g.config,d=g.main,l=g.hasType("gauge");if((n=d.selectAll("."+Y.arcs).selectAll("."+Y.arc).data(g.arcData.bind(g))).enter().append("path").attr("class",g.classArc.bind(g)).style("fill",function(e){return g.color(e.data)}).style("cursor",function(e){return s.interaction_enabled&&s.data_selection_isselectable(e)?"pointer":null}).each(function(e){g.isGaugeType(e.data)&&(e.startAngle=e.endAngle=s.gauge_startingAngle),this._current=e}),l&&((r=d.selectAll("."+Y.arcs).selectAll("."+Y.arcLabelLine).data(g.arcData.bind(g))).enter().append("rect").attr("class",function(e){return Y.arcLabelLine+" "+Y.target+" "+Y.target+"-"+e.data.id}),1===g.filterTargetsToShow(g.data.targets).length?r.style("display","none"):r.style("fill",function(e){return 0<s.color_pattern.length?g.levelColor(e.data.values[0].value):g.color(e.data)}).style("display",s.gauge_labelLine_show?"":"none").each(function(c){var t=0,p=0,_=0,h="";if(0>g.hiddenTargetIds.indexOf(c.data.id)){var x=g.updateAngle(c),r=g.gaugeArcWidth/g.filterTargetsToShow(g.data.targets).length*(x.index+1),s=x.endAngle-D/2,d=g.radius-r,l=s-(0===d?0:1/d);t=g.radiusExpanded-g.radius+r,p=I(l)*d,_=O(l)*d,h="rotate("+180*s/D+", "+p+", "+_+")"}o.select(this).attr({x:p,y:_,width:t,height:2,transform:h}).style("stroke-dasharray","0, "+(t+2)+", 0")})),n.attr("transform",function(a){return!g.isGaugeType(a.data)&&e?"scale(0)":""}).on("mouseover",s.interaction_enabled?function(a){var t,e;g.transiting||(t=g.updateAngle(a))&&(e=g.convertToArcData(t),g.expandArc(t.data.id),g.api.focus(t.data.id),g.toggleFocusLegend(t.data.id,!0),g.config.data_onmouseover(e,this))}:null).on("mousemove",s.interaction_enabled?function(a){var t,e=g.updateAngle(a);e&&(t=[g.convertToArcData(e)],g.showTooltip(t,this))}:null).on("mouseout",s.interaction_enabled?function(a){var t,e;g.transiting||(t=g.updateAngle(a))&&(e=g.convertToArcData(t),g.unexpandArc(t.data.id),g.api.revert(),g.revertLegend(),g.hideTooltip(),g.config.data_onmouseout(e,this))}:null).on("click",s.interaction_enabled?function(a,t){var e,i=g.updateAngle(a);i&&(e=g.convertToArcData(i),g.toggleShape&&g.toggleShape(this,e,t),g.config.data_onclick.call(g.api,e,this))}:null).each(function(){g.transiting=!0}).transition().duration(i).attrTween("d",function(a){var t,e=g.updateAngle(a);return e?(isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle),t=o.interpolate(this._current,e),this._current=t(0),function(e){var i=t(e);return i.data=a.data,g.getArc(i,!0)}):function(){return"M 0 0"}}).attr("transform",e?"scale(1)":"").style("fill",function(e){return g.levelColor?g.levelColor(e.data.values[0].value):g.color(e.data.id)}).call(g.endall,function(){g.transiting=!1}),n.exit().transition().duration(t).style("opacity",0).remove(),d.selectAll("."+Y.chartArc).select("text").style("opacity",0).attr("class",function(e){return g.isGaugeType(e.data)?Y.gaugeValue:""}).text(g.textForArcLabel.bind(g)).attr("transform",g.transformForArcLabel.bind(g)).style("font-size",function(e){return g.isGaugeType(e.data)&&1===g.filterTargetsToShow(g.data.targets).length?Math.round(g.radius/5)+"px":""}).transition().duration(i).style("opacity",function(e){return g.isTargetToShow(e.data.id)&&g.isArcType(e.data)?1:0}),d.select("."+Y.chartArcsTitle).style("opacity",g.hasType("donut")||l?1:0),l){var c=0;(a=g.arcs.select("g."+Y.chartArcsBackground).selectAll("path."+Y.chartArcsBackground).data(g.data.targets)).enter().append("path"),a.attr("class",function(a,t){return Y.chartArcsBackground+" "+Y.chartArcsBackground+"-"+t}).attr("d",function(a){if(0<=g.hiddenTargetIds.indexOf(a.id))return"M 0 0";var t={data:[{value:s.gauge_max}],startAngle:s.gauge_startingAngle,endAngle:-1*s.gauge_startingAngle*(s.gauge_fullCircle?D:1),index:c++};return g.getArc(t,!0,!0)}),a.exit().remove(),g.arcs.select("."+Y.chartArcsGaugeUnit).attr("dy",".75em").text(s.gauge_label_show?s.gauge_units:""),g.arcs.select("."+Y.chartArcsGaugeMin).attr("dx",-1*(g.innerRadius+(g.radius-g.innerRadius)/(s.gauge_fullCircle?1:2))+"px").attr("dy","1.2em").text(s.gauge_label_show?g.textForGaugeMinMax(s.gauge_min,!1):""),g.arcs.select("."+Y.chartArcsGaugeMax).attr("dx",g.innerRadius+(g.radius-g.innerRadius)/(s.gauge_fullCircle?1:2)+"px").attr("dy","1.2em").text(s.gauge_label_show?g.textForGaugeMinMax(s.gauge_max,!0):"")}},p.initGauge=function(){var e=this.arcs;this.hasType("gauge")&&(e.append("g").attr("class",Y.chartArcsBackground),e.append("text").attr("class",Y.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none"),e.append("text").attr("class",Y.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none"),e.append("text").attr("class",Y.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none"))},p.getGaugeLabelHeight=function(){return this.config.gauge_label_show?20:0},p.hasCaches=function(a){for(var t=0;t<a.length;t++)if(!(a[t]in this.cache))return!1;return!0},p.addCache=function(a,t){this.cache[a]=this.cloneTarget(t)},p.getCaches=function(a){var t,e=[];for(t=0;t<a.length;t++)a[t]in this.cache&&e.push(this.cloneTarget(this.cache[a[t]]));return e},p.categoryName=function(a){var t=this.config;return a<t.axis_x_categories.length?t.axis_x_categories[a]:a},p.generateClass=function(a,t){return" "+a+" "+a+this.getTargetSelectorSuffix(t)},p.classText=function(e){return this.generateClass(Y.text,e.index)},p.classTexts=function(e){return this.generateClass(Y.texts,e.id)},p.classShape=function(e){return this.generateClass(Y.shape,e.index)},p.classShapes=function(e){return this.generateClass(Y.shapes,e.id)},p.classLine=function(e){return this.classShape(e)+this.generateClass(Y.line,e.id)},p.classLines=function(e){return this.classShapes(e)+this.generateClass(Y.lines,e.id)},p.classCircle=function(e){return this.classShape(e)+this.generateClass(Y.circle,e.index)},p.classCircles=function(e){return this.classShapes(e)+this.generateClass(Y.circles,e.id)},p.classBar=function(e){return this.classShape(e)+this.generateClass(Y.bar,e.index)},p.classBars=function(e){return this.classShapes(e)+this.generateClass(Y.bars,e.id)},p.classArc=function(e){return this.classShape(e.data)+this.generateClass(Y.arc,e.data.id)},p.classArcs=function(e){return this.classShapes(e.data)+this.generateClass(Y.arcs,e.data.id)},p.classArea=function(e){return this.classShape(e)+this.generateClass(Y.area,e.id)},p.classAreas=function(e){return this.classShapes(e)+this.generateClass(Y.areas,e.id)},p.classRegion=function(a,t){return this.generateClass(Y.region,t)+" "+("class"in a?a.class:"")},p.classEvent=function(e){return this.generateClass(Y.eventRect,e.index)},p.classTarget=function(a){var t=this.config.data_classes[a],e="";return t&&(e=" "+Y.target+"-"+t),this.generateClass(Y.target,a)+e},p.classFocus=function(e){return this.classFocused(e)+this.classDefocused(e)},p.classFocused=function(e){return" "+(0<=this.focusedTargetIds.indexOf(e.id)?Y.focused:"")},p.classDefocused=function(e){return" "+(0<=this.defocusedTargetIds.indexOf(e.id)?Y.defocused:"")},p.classChartText=function(e){return Y.chartText+this.classTarget(e.id)},p.classChartLine=function(e){return Y.chartLine+this.classTarget(e.id)},p.classChartBar=function(e){return Y.chartBar+this.classTarget(e.id)},p.classChartArc=function(e){return Y.chartArc+this.classTarget(e.data.id)},p.getTargetSelectorSuffix=function(e){return e||0===e?("-"+e).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-"):""},p.selectorTarget=function(a,t){return(t||"")+"."+Y.target+this.getTargetSelectorSuffix(a)},p.selectorTargets=function(a,r){var e=this;return(a=a||[]).length?a.map(function(a){return e.selectorTarget(a,r)}):null},p.selectorLegend=function(e){return"."+Y.legendItem+this.getTargetSelectorSuffix(e)},p.selectorLegends=function(a){var i=this;return a&&a.length?a.map(function(e){return i.selectorLegend(e)}):null},p.getClipPath=function(e){return"url("+(0<=window.navigator.appVersion.toLowerCase().indexOf("msie 9.")?"":document.URL.split("#")[0])+"#"+e+")"},p.appendClip=function(a,t){return a.append("clipPath").attr("id",t).append("rect")},p.getAxisClipX=function(a){var t=F(30,this.margin.left);return a?-(1+t):-(t-1)},p.getAxisClipY=function(e){return e?-20:-this.margin.top},p.getXAxisClipX=function(){return this.getAxisClipX(!this.config.axis_rotated)},p.getXAxisClipY=function(){return this.getAxisClipY(!this.config.axis_rotated)},p.getYAxisClipX=function(){return this.config.axis_y_inner?-1:this.getAxisClipX(this.config.axis_rotated)},p.getYAxisClipY=function(){return this.getAxisClipY(this.config.axis_rotated)},p.getAxisClipWidth=function(a){var t=F(30,this.margin.left),e=F(30,this.margin.right);return a?this.width+2+t+e:this.margin.left+20},p.getAxisClipHeight=function(e){return(e?this.margin.bottom:this.margin.top+this.height)+20},p.getXAxisClipWidth=function(){return this.getAxisClipWidth(!this.config.axis_rotated)},p.getXAxisClipHeight=function(){return this.getAxisClipHeight(!this.config.axis_rotated)},p.getYAxisClipWidth=function(){return this.getAxisClipWidth(this.config.axis_rotated)+(this.config.axis_y_inner?20:0)},p.getYAxisClipHeight=function(){return this.getAxisClipHeight(this.config.axis_rotated)},p.generateColor=function(){var s=this.config,t=this.d3,o=s.data_colors,i=f(s.color_pattern)?s.color_pattern:t.scale.category10().range(),n=s.data_color,a=[];return function(r){var t,e=r.id||r.data&&r.data.id||r;return o[e]instanceof Function?t=o[e](r):o[e]?t=o[e]:(0>a.indexOf(e)&&a.push(e),t=i[a.indexOf(e)%i.length],o[e]=t),n instanceof Function?n(t,r):t}},p.generateLevelColor=function(){var s=this.config,o=s.color_pattern,e=s.color_threshold,d="value"===e.unit,n=e.values&&e.values.length?e.values:[],a=e.max||100;return f(s.color_threshold)?function(e){var t,i=o[o.length-1];for(t=0;t<n.length;t++)if((d?e:100*e/a)<n[t]){i=o[t];break}return i}:null},p.getDefaultConfig=function(){var a={bindto:"#chart",svg_classname:void 0,size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,zoom_enabled:!1,zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:function(){},zoom_onzoomstart:function(){},zoom_onzoomend:function(){},zoom_x_min:void 0,zoom_x_max:void 0,interaction_brighten:!0,interaction_enabled:!0,onmouseover:function(){},onmouseout:function(){},onresize:function(){},onresized:function(){},oninit:function(){},onrendered:function(){},transition_duration:350,data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(e){return e},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},data_hide:!1,data_filter:void 0,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_onclick:function(){},data_onmouseover:function(){},data_onmouseout:function(){},data_onselected:function(){},data_onunselected:function(){},data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:void 0,data_keys:void 0,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:!0,legend_hide:!1,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onmouseover:void 0,legend_item_onmouseout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,axis_rotated:!1,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_x_inner:void 0,axis_y_show:!0,axis_y_type:void 0,axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:void 0,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_time_value:void 0,axis_y_tick_time_interval:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y2_show:!1,axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:void 0,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_padding:{},axis_y2_default:void 0,grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_lines_front:!0,point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_select_r:void 0,line_connectNull:!1,line_step_type:"step",bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0,bar_space:0,area_zerobased:!0,area_above:!1,pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_label_ratio:void 0,pie_expand:{},pie_expand_duration:50,gauge_fullCircle:!1,gauge_label_show:!0,gauge_labelLine_show:!0,gauge_label_format:void 0,gauge_min:0,gauge_max:100,gauge_startingAngle:-1*D/2,gauge_label_extents:void 0,gauge_units:void 0,gauge_width:void 0,gauge_arcs_minWidth:5,gauge_expand:{},gauge_expand_duration:50,donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_label_ratio:void 0,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_duration:50,spline_interpolation_type:"cardinal",regions:[],tooltip_show:!0,tooltip_grouped:!0,tooltip_order:void 0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:function(a,t,e,i){return this.getTooltipContent?this.getTooltipContent(a,t,e,i):""},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_onshow:function(){},tooltip_onhide:function(){},title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"top-center"};return Object.keys(this.additionalConfig).forEach(function(t){a[t]=this.additionalConfig[t]},this),a},p.additionalConfig={},p.loadConfig=function(n){var o,e,t,a=this.config;Object.keys(a).forEach(function(i){o=n,e=i.split("_"),t=function i(){var t=e.shift();return t&&o&&"object"===(void 0===o?"undefined":H(o))&&t in o?(o=o[t],i()):t?void 0:o}(),W(t)&&(a[i]=t)})},p.convertUrlToData=function(d,t,e,l,n){var a=this,r=t||"csv",i=a.d3.xhr(d);e&&Object.keys(e).forEach(function(a){i.header(a,e[a])}),i.get(function(s,t){var d,i=t.response||t.responseText;if(!t)throw new Error(s.responseURL+" "+s.status+" ("+s.statusText+")");d="json"===r?a.convertJsonToData(JSON.parse(i),l):"tsv"===r?a.convertTsvToData(i):a.convertCsvToData(i),n.call(a,d)})},p.convertXsvToData=function(a,t){var e,i=t.parseRows(a);return 1===i.length?(e=[{}],i[0].forEach(function(a){e[0][a]=null})):e=t.parse(a),e},p.convertCsvToData=function(e){return this.convertXsvToData(e,this.d3.csv)},p.convertTsvToData=function(e){return this.convertXsvToData(e,this.d3.tsv)},p.convertJsonToData=function(s,t){var o,e,d=this,a=[];return t?(t.x?(o=t.value.concat(t.x),d.config.data_x=t.x):o=t.value,a.push(o),s.forEach(function(r){var t=[];o.forEach(function(e){var a=d.findValueInJson(r,e);U(a)&&(a=null),t.push(a)}),a.push(t)}),e=d.convertRowsToData(a)):(Object.keys(s).forEach(function(t){a.push([t].concat(s[t]))}),e=d.convertColumnsToData(a)),e},p.findValueInJson=function(r,t){for(var e,a=(t=(t=t.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),i=0;i<a.length;++i){if(e=a[i],!(e in r))return;r=r[e]}return r},p.convertRowsToData=function(s){for(var t=[],e=s[0],i=1;i<s.length;i++){for(var n={},a=0;a<s[i].length;a++){if(U(s[i][a]))throw new Error("Source data is missing a component at ("+i+","+a+")!");n[e[a]]=s[i][a]}t.push(n)}return t},p.convertColumnsToData=function(r){for(var t=[],e=0;e<r.length;e++)for(var i=r[e][0],n=1;n<r[e].length;n++){if(U(t[n-1])&&(t[n-1]={}),U(r[e][n]))throw new Error("Source data is missing a component at ("+e+","+n+")!");t[n-1][i]=r[e][n]}return t},p.convertDataToTargets=function(s,t){var e,l=this,n=l.config,a=l.d3.keys(s[0]).filter(l.isNotX,l),d=l.d3.keys(s[0]).filter(l.isX,l);return a.forEach(function(a){var e=l.getXKey(a);l.isCustomX()||l.isTimeSeries()?0<=d.indexOf(e)?l.data.xs[a]=(t&&l.data.xs[a]?l.data.xs[a]:[]).concat(s.map(function(a){return a[e]}).filter(M).map(function(i,t){return l.generateTargetX(i,a,t)})):n.data_x?l.data.xs[a]=l.getOtherTargetXs():f(n.data_xs)&&(l.data.xs[a]=l.getXValuesOfXKey(e,l.data.targets)):l.data.xs[a]=s.map(function(a,t){return t})}),a.forEach(function(e){if(!l.data.xs[e])throw new Error("x is not defined for id = \""+e+"\".")}),(e=a.map(function(a,g){var i=n.data_idConverter(a);return{id:i,id_org:a,values:s.map(function(e,t){var s,p=e[l.getXKey(a)],c=null===e[a]||isNaN(e[a])?null:+e[a];return l.isCustomX()&&l.isCategorized()&&!U(p)?(0===g&&0===t&&(n.axis_x_categories=[]),-1===(s=n.axis_x_categories.indexOf(p))&&(s=n.axis_x_categories.length,n.axis_x_categories.push(p))):s=l.generateTargetX(p,a,t),(U(e[a])||l.data.xs[a].length<=t)&&(s=void 0),{x:s,value:c,id:i}}).filter(function(e){return W(e.x)})}})).forEach(function(a){var i;n.data_xSort&&(a.values=a.values.sort(function(a,t){return(a.x||0===a.x?a.x:1/0)-(t.x||0===t.x?t.x:1/0)})),i=0,a.values.forEach(function(e){e.index=i++}),l.data.xs[a.id].sort(function(a,t){return a-t})}),l.hasNegativeValue=l.hasNegativeValueInTargets(e),l.hasPositiveValue=l.hasPositiveValueInTargets(e),n.data_type&&l.setTargetType(l.mapToIds(e).filter(function(e){return!(e in n.data_types)}),n.data_type),e.forEach(function(e){l.addCache(e.id_org,e)}),e},p.isX=function(a){var t=this.config;return t.data_x&&a===t.data_x||f(t.data_xs)&&i(t.data_xs,a)},p.isNotX=function(e){return!this.isX(e)},p.getXKey=function(a){var t=this.config;return t.data_x?t.data_x:f(t.data_xs)?t.data_xs[a]:null},p.getXValuesOfXKey=function(a,t){var r,i=this;return(t&&f(t)?i.mapToIds(t):[]).forEach(function(t){i.getXKey(t)===a&&(r=i.data.xs[t])}),r},p.getIndexByX=function(a){var t=this.filterByX(this.data.targets,a);return t.length?t[0].index:null},p.getXValue=function(a,t){return a in this.data.xs&&this.data.xs[a]&&M(this.data.xs[a][t])?this.data.xs[a][t]:t},p.getOtherTargetXs=function(){var e=Object.keys(this.data.xs);return e.length?this.data.xs[e[0]]:null},p.getOtherTargetX=function(a){var t=this.getOtherTargetXs();return t&&a<t.length?t[a]:null},p.addXs=function(a){var t=this;Object.keys(a).forEach(function(e){t.config.data_xs[e]=a[e]})},p.hasMultipleX=function(a){return 1<this.d3.set(Object.keys(a).map(function(t){return a[t]})).size()},p.isMultipleX=function(){return f(this.config.data_xs)||!this.config.data_xSort||this.hasType("scatter")},p.addName=function(a){var t;return a&&(t=this.config.data_names[a.id],a.name=void 0===t?a.id:t),a},p.getValueOnIndex=function(a,r){var e=a.filter(function(e){return e.index===r});return e.length?e[0]:null},p.updateTargetX=function(a,r){var e=this;a.forEach(function(i){i.values.forEach(function(t,n){t.x=e.generateTargetX(r[n],i.id,n)}),e.data.xs[i.id]=r})},p.updateTargetXs=function(a,r){var e=this;a.forEach(function(a){r[a.id]&&e.updateTargetX([a],r[a.id])})},p.generateTargetX=function(a,r,e){var i=this;return i.isTimeSeries()?a?i.parseDate(a):i.parseDate(i.getXValue(r,e)):i.isCustomX()&&!i.isCategorized()?M(a)?+a:i.getXValue(r,e):e},p.cloneTarget=function(e){return{id:e.id,id_org:e.id_org,values:e.values.map(function(e){return{x:e.x,value:e.value,id:e.id}})}},p.updateXs=function(){var a=this;a.data.targets.length&&(a.xs=[],a.data.targets[0].values.forEach(function(t){a.xs[t.index]=t.x}))},p.getPrevX=function(a){var t=this.xs[a-1];return void 0===t?null:t},p.getNextX=function(a){var t=this.xs[a+1];return void 0===t?null:t},p.getMaxDataCount=function(){return this.d3.max(this.data.targets,function(e){return e.values.length})},p.getMaxDataCountTarget=function(a){var r,e=a.length,i=0;return 1<e?a.forEach(function(e){e.values.length>i&&(r=e,i=e.values.length)}):r=e?a[0]:null,r},p.getEdgeX=function(e){return e.length?[this.d3.min(e,function(e){return e.values[0].x}),this.d3.max(e,function(e){return e.values[e.values.length-1].x})]:[0,0]},p.mapToIds=function(e){return e.map(function(e){return e.id})},p.mapToTargetIds=function(e){return e?[].concat(e):this.mapToIds(this.data.targets)},p.hasTarget=function(a,t){var e,i=this.mapToIds(a);for(e=0;e<i.length;e++)if(i[e]===t)return!0;return!1},p.isTargetToShow=function(e){return 0>this.hiddenTargetIds.indexOf(e)},p.isLegendToShow=function(e){return 0>this.hiddenLegendIds.indexOf(e)},p.filterTargetsToShow=function(a){var i=this;return a.filter(function(e){return i.isTargetToShow(e.id)})},p.mapTargetsToUniqueXs=function(a){var t=this.d3.set(this.d3.merge(a.map(function(e){return e.values.map(function(e){return+e.x})}))).values();return(t=this.isTimeSeries()?t.map(function(e){return new Date(+e)}):t.map(function(e){return+e})).sort(function(a,t){return a<t?-1:a>t?1:a>=t?0:NaN})},p.addHiddenTargetIds=function(a){a=a instanceof Array?a:Array(a);for(var t=0;t<a.length;t++)0>this.hiddenTargetIds.indexOf(a[t])&&(this.hiddenTargetIds=this.hiddenTargetIds.concat(a[t]))},p.removeHiddenTargetIds=function(a){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(t){return 0>a.indexOf(t)})},p.addHiddenLegendIds=function(a){a=a instanceof Array?a:Array(a);for(var t=0;t<a.length;t++)0>this.hiddenLegendIds.indexOf(a[t])&&(this.hiddenLegendIds=this.hiddenLegendIds.concat(a[t]))},p.removeHiddenLegendIds=function(a){this.hiddenLegendIds=this.hiddenLegendIds.filter(function(t){return 0>a.indexOf(t)})},p.getValuesAsIdKeyed=function(a){var r={};return a.forEach(function(e){r[e.id]=[],e.values.forEach(function(t){r[e.id].push(t.value)})}),r},p.checkValueInTargets=function(s,t){var e,i,n,a=Object.keys(s);for(e=0;e<a.length;e++)for(n=s[a[e]].values,i=0;i<n.length;i++)if(t(n[i].value))return!0;return!1},p.hasNegativeValueInTargets=function(e){return this.checkValueInTargets(e,function(e){return 0>e})},p.hasPositiveValueInTargets=function(e){return this.checkValueInTargets(e,function(e){return 0<e})},p.isOrderDesc=function(){var e=this.config;return"string"==typeof e.data_order&&"desc"===e.data_order.toLowerCase()},p.isOrderAsc=function(){var e=this.config;return"string"==typeof e.data_order&&"asc"===e.data_order.toLowerCase()},p.getOrderFunction=function(){var a=this.config,t=this.isOrderAsc(),o=this.isOrderDesc();if(t||o)return function(i,t){var e=function(a,t){return a+E(t.value)},n=i.values.reduce(e,0),a=t.values.reduce(e,0);return o?a-n:n-a};if(N(a.data_order))return a.data_order;if(s(a.data_order)){var i=a.data_order;return function(a,t){return i.indexOf(a.id)-i.indexOf(t.id)}}},p.orderTargets=function(a){var t=this.getOrderFunction();return t&&(a.sort(t),(this.isOrderAsc()||this.isOrderDesc())&&a.reverse()),a},p.filterByX=function(a,i){return this.d3.merge(a.map(function(e){return e.values})).filter(function(e){return 0==e.x-i})},p.filterRemoveNull=function(e){return e.filter(function(e){return M(e.value)})},p.filterByXDomain=function(a,i){return a.map(function(e){return{id:e.id,id_org:e.id_org,values:e.values.filter(function(e){return i[0]<=e.x&&e.x<=i[1]})}})},p.hasDataLabel=function(){var e=this.config;return"boolean"==typeof e.data_labels&&e.data_labels||"object"===H(e.data_labels)&&f(e.data_labels)},p.getDataLabelLength=function(r,t,s){var e=this,i=[0,0];return e.selectChart.select("svg").selectAll(".dummy").data([r,t]).enter().append("text").text(function(a){return e.dataLabelFormat(a.id)(a)}).each(function(a,t){i[t]=1.3*this.getBoundingClientRect()[s]}).remove(),i},p.isNoneArc=function(e){return this.hasTarget(this.data.targets,e.id)},p.isArc=function(e){return"data"in e&&this.hasTarget(this.data.targets,e.data.id)},p.findSameXOfValues=function(r,t){var e,i=r[t].x,n=[];for(e=t-1;0<=e&&i===r[e].x;e--)n.push(r[e]);for(e=t;e<r.length&&i===r[e].x;e++)n.push(r[e]);return n},p.findClosestFromTargets=function(a,r){var e,i=this;return e=a.map(function(e){return i.findClosest(e.values,r)}),i.findClosest(e,r)},p.findClosest=function(i,s){var o,d=this,e=d.config.point_sensitivity;return i.filter(function(e){return e&&d.isBarType(e.id)}).forEach(function(a){var t=d.main.select("."+Y.bars+d.getTargetSelectorSuffix(a.id)+" ."+Y.bar+"-"+a.index).node();!o&&d.isWithinBar(t)&&(o=a)}),i.filter(function(e){return e&&!d.isBarType(e.id)}).forEach(function(a){var t=d.dist(a,s);t<e&&(e=t,o=a)}),o},p.dist=function(o,t){var e=this.config,i=e.axis_rotated?1:0,n=e.axis_rotated?0:1,a=this.circleY(o,o.index),r=this.x(o.x);return R(k(r-t[i],2)+k(a-t[n],2))},p.convertValuesToStep=function(a){var t,e=[].concat(a);if(!this.isCategorized())return a;for(t=a.length+1;0<t;t--)e[t]=e[t-1];return e[0]={x:e[0].x-1,value:e[0].value,id:e[0].id},e[a.length+1]={x:e[a.length].x+1,value:e[a.length].value,id:e[a.length].id},e},p.updateDataAttributes=function(a,r){var e=this.config["data_"+a];return void 0===r?e:(Object.keys(r).forEach(function(a){e[a]=r[a]}),this.redraw({withLegend:!0}),e)},p.load=function(a,r){var e=this;a&&(r.filter&&(a=a.filter(r.filter)),(r.type||r.types)&&a.forEach(function(a){var t=r.types&&r.types[a.id]?r.types[a.id]:r.type;e.setTargetType(a.id,t)}),e.data.targets.forEach(function(t){for(var e=0;e<a.length;e++)if(t.id===a[e].id){t.values=a[e].values,a.splice(e,1);break}}),e.data.targets=e.data.targets.concat(a)),e.updateTargets(e.data.targets),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),r.done&&r.done()},p.loadFromArgs=function(a){var t=this;a.data?t.load(t.convertDataToTargets(a.data),a):a.url?t.convertUrlToData(a.url,a.mimeType,a.headers,a.keys,function(e){t.load(t.convertDataToTargets(e),a)}):a.json?t.load(t.convertDataToTargets(t.convertJsonToData(a.json,a.keys)),a):a.rows?t.load(t.convertDataToTargets(t.convertRowsToData(a.rows)),a):a.columns?t.load(t.convertDataToTargets(t.convertColumnsToData(a.columns)),a):t.load(null,a)},p.unload=function(a,t){var e=this;t||(t=function(){}),(a=a.filter(function(a){return e.hasTarget(e.data.targets,a)}))&&0!==a.length?(e.svg.selectAll(a.map(function(a){return e.selectorTarget(a)})).transition().style("opacity",0).remove().call(e.endall,t),a.forEach(function(a){e.withoutFadeIn[a]=!1,e.legend&&e.legend.selectAll("."+Y.legendItem+e.getTargetSelectorSuffix(a)).remove(),e.data.targets=e.data.targets.filter(function(t){return t.id!==a})})):t()},p.getYDomainMin=function(g){var t,e,i,n,a,r,s=this,o=s.config,c=s.mapToIds(g),d=s.getValuesAsIdKeyed(g);if(0<o.data_groups.length)for(r=s.hasNegativeValueInTargets(g),t=0;t<o.data_groups.length;t++)if(0!==(n=o.data_groups[t].filter(function(e){return 0<=c.indexOf(e)})).length)for(i=n[0],r&&d[i]&&d[i].forEach(function(a,t){d[i][t]=0>a?a:0}),e=1;e<n.length;e++)a=n[e],d[a]&&d[a].forEach(function(n,o){s.axis.getId(a)!==s.axis.getId(i)||!d[i]||r&&0<+n||(d[i][o]+=+n)});return s.d3.min(Object.keys(d).map(function(e){return s.d3.min(d[e])}))},p.getYDomainMax=function(g){var t,e,i,n,a,r,s=this,o=s.config,c=s.mapToIds(g),d=s.getValuesAsIdKeyed(g);if(0<o.data_groups.length)for(r=s.hasPositiveValueInTargets(g),t=0;t<o.data_groups.length;t++)if(0!==(n=o.data_groups[t].filter(function(e){return 0<=c.indexOf(e)})).length)for(i=n[0],r&&d[i]&&d[i].forEach(function(a,t){d[i][t]=0<a?a:0}),e=1;e<n.length;e++)a=n[e],d[a]&&d[a].forEach(function(n,o){s.axis.getId(a)!==s.axis.getId(i)||!d[i]||r&&0>+n||(d[i][o]+=+n)});return s.d3.max(Object.keys(d).map(function(e){return s.d3.max(d[e])}))},p.getYDomain=function(s,_,e){var t,i,a,r,n,o,d,l,c,h,g=this,p=g.config,x=s.filter(function(e){return g.axis.getId(e.id)===_}),u=e?g.filterByXDomain(x,e):x,m="y2"===_?p.axis_y2_min:p.axis_y_min,y="y2"===_?p.axis_y2_max:p.axis_y_max,S=g.getYDomainMin(u),v=g.getYDomainMax(u),V="y2"===_?p.axis_y2_center:p.axis_y_center,T=g.hasType("bar",u)&&p.bar_zerobased||g.hasType("area",u)&&p.area_zerobased,A="y2"===_?p.axis_y2_inverted:p.axis_y_inverted,P=g.hasDataLabel()&&p.axis_rotated,C=g.hasDataLabel()&&!p.axis_rotated;return S=M(m)?m:M(y)?S<y?S:y-10:S,v=M(y)?y:M(m)?m<v?v:m+10:v,0===u.length?"y2"===_?g.y2.domain():g.y.domain():(isNaN(S)&&(S=0),isNaN(v)&&(v=S),S===v&&(0>S?v=0:S=0),c=0<=S&&0<=v,h=0>=S&&0>=v,(M(m)&&c||M(y)&&h)&&(T=!1),T&&(c&&(S=0),h&&(v=0)),a=r=.1*(i=E(v-S)),void 0!==V&&(v=V+(n=F(E(S),E(v))),S=V-n),P?(o=g.getDataLabelLength(S,v,"width"),d=Q(g.y.range()),a+=i*((l=[o[0]/d,o[1]/d])[1]/(1-l[0]-l[1])),r+=i*(l[0]/(1-l[0]-l[1]))):C&&(o=g.getDataLabelLength(S,v,"height"),a+=g.axis.convertPixelsToAxisPadding(o[1],i),r+=g.axis.convertPixelsToAxisPadding(o[0],i)),"y"===_&&f(p.axis_y_padding)&&(a=g.axis.getPadding(p.axis_y_padding,"top",a,i),r=g.axis.getPadding(p.axis_y_padding,"bottom",r,i)),"y2"===_&&f(p.axis_y2_padding)&&(a=g.axis.getPadding(p.axis_y2_padding,"top",a,i),r=g.axis.getPadding(p.axis_y2_padding,"bottom",r,i)),T&&(c&&(r=S),h&&(a=-v)),t=[S-r,v+a],A?t.reverse():t)},p.getXDomainMin=function(a){var r=this,e=r.config;return W(e.axis_x_min)?r.isTimeSeries()?this.parseDate(e.axis_x_min):e.axis_x_min:r.d3.min(a,function(e){return r.d3.min(e.values,function(e){return e.x})})},p.getXDomainMax=function(a){var r=this,e=r.config;return W(e.axis_x_max)?r.isTimeSeries()?this.parseDate(e.axis_x_max):e.axis_x_max:r.d3.max(a,function(e){return r.d3.max(e.values,function(e){return e.x})})},p.getXDomainPadding=function(n){var t,e,i,s,d=this.config,o=n[1]-n[0];return e=this.isCategorized()?0:this.hasType("bar")?1<(t=this.getMaxDataCount())?o/(t-1)/2:.5:.01*o,"object"===H(d.axis_x_padding)&&f(d.axis_x_padding)?(i=M(d.axis_x_padding.left)?d.axis_x_padding.left:e,s=M(d.axis_x_padding.right)?d.axis_x_padding.right:e):i=s="number"==typeof d.axis_x_padding?d.axis_x_padding:e,{left:i,right:s}},p.getXDomain=function(d){var t=this,e=[t.getXDomainMin(d),t.getXDomainMax(d)],i=e[0],n=e[1],a=t.getXDomainPadding(e),r=0,s=0;return 0!=i-n||t.isCategorized()||(t.isTimeSeries()?(i=new Date(.5*i.getTime()),n=new Date(1.5*n.getTime())):(i=0===i?1:.5*i,n=0===n?-1:1.5*n)),(i||0===i)&&(r=t.isTimeSeries()?new Date(i.getTime()-a.left):i-a.left),(n||0===n)&&(s=t.isTimeSeries()?new Date(n.getTime()+a.right):n+a.right),[r,s]},p.updateXDomain=function(o,t,e,i,n){var a=this,r=a.config;return e&&(a.x.domain(n||a.d3.extent(a.getXDomain(o))),a.orgXDomain=a.x.domain(),r.zoom_enabled&&a.zoom.scale(a.x).updateScaleExtent(),a.subX.domain(a.x.domain()),a.brush&&a.brush.scale(a.subX)),t&&(a.x.domain(n||(!a.brush||a.brush.empty()?a.orgXDomain:a.brush.extent())),r.zoom_enabled&&a.zoom.scale(a.x).updateScaleExtent()),i&&a.x.domain(a.trimXDomain(a.x.orgDomain())),a.x.domain()},p.trimXDomain=function(a){var t=this.getZoomDomain(),e=t[0],i=t[1];return a[0]<=e&&(a[1]=+a[1]+(e-a[0]),a[0]=e),i<=a[1]&&(a[0]=+a[0]-(a[1]-i),a[1]=i),a},p.drag=function(i){var t,e,n,a,m,s,o,c,d=this,r=d.config,l=d.main,S=d.d3;d.hasArcType()||r.data_selection_enabled&&(r.zoom_enabled&&!d.zoom.altDomain||r.data_selection_multiple&&(t=d.dragStart[0],e=d.dragStart[1],n=i[0],a=i[1],m=X(t,n),s=F(t,n),o=r.data_selection_grouped?d.margin.top:X(e,a),c=r.data_selection_grouped?d.height:F(e,a),l.select("."+Y.dragarea).attr("x",m).attr("y",o).attr("width",s-m).attr("height",c-o),l.selectAll("."+Y.shapes).selectAll("."+Y.shape).filter(function(e){return r.data_selection_isselectable(e)}).each(function(i,t){var e,n,a,r,l,g,h=S.select(this),p=h.classed(Y.SELECTED),u=h.classed(Y.INCLUDED),f=!1;if(h.classed(Y.circle))e=1*h.attr("cx"),n=1*h.attr("cy"),l=d.togglePoint,f=m<e&&e<s&&o<n&&n<c;else{if(!h.classed(Y.bar))return;e=(g=x(this)).x,n=g.y,a=g.width,r=g.height,l=d.togglePath,f=!(s<e||e+a<m||c<n||n+r<o)}f^u&&(h.classed(Y.INCLUDED,!u),h.classed(Y.SELECTED,!p),l.call(d,!p,h,i,t))})))},p.dragstart=function(a){var t=this,e=t.config;t.hasArcType()||e.data_selection_enabled&&(t.dragStart=a,t.main.select("."+Y.chart).append("rect").attr("class",Y.dragarea).style("opacity",.1),t.dragging=!0)},p.dragend=function(){var a=this,t=a.config;a.hasArcType()||t.data_selection_enabled&&(a.main.select("."+Y.dragarea).transition().duration(100).style("opacity",0).remove(),a.main.selectAll("."+Y.shape).classed(Y.INCLUDED,!1),a.dragging=!1)},p.getYFormat=function(a){var s=this,e=a&&!s.hasType("gauge")?s.defaultArcValueFormat:s.yFormat,i=a&&!s.hasType("gauge")?s.defaultArcValueFormat:s.y2Format;return function(n,t,a){return("y2"===s.axis.getId(a)?i:e).call(s,n,t)}},p.yFormat=function(a){var t=this.config;return(t.axis_y_tick_format?t.axis_y_tick_format:this.defaultValueFormat)(a)},p.y2Format=function(a){var t=this.config;return(t.axis_y2_tick_format?t.axis_y2_tick_format:this.defaultValueFormat)(a)},p.defaultValueFormat=function(e){return M(e)?+e:""},p.defaultArcValueFormat=function(a,t){return(100*t).toFixed(1)+"%"},p.dataLabelFormat=function(a){var t=this.config.data_labels,e=function(e){return M(e)?+e:""};return"function"==typeof t.format?t.format:"object"===H(t.format)?t.format[a]?!0===t.format[a]?e:t.format[a]:function(){return""}:e},p.initGrid=function(){var a=this,t=a.config,e=a.d3;a.grid=a.main.append("g").attr("clip-path",a.clipPathForGrid).attr("class",Y.grid),t.grid_x_show&&a.grid.append("g").attr("class",Y.xgrids),t.grid_y_show&&a.grid.append("g").attr("class",Y.ygrids),t.grid_focus_show&&a.grid.append("g").attr("class",Y.xgridFocus).append("line").attr("class",Y.xgridFocus),a.xgrid=e.selectAll([]),t.grid_lines_front||a.initGridLines()},p.initGridLines=function(){var a=this,t=a.d3;a.gridLines=a.main.append("g").attr("clip-path",a.clipPathForGrid).attr("class",Y.grid+" "+Y.gridLines),a.gridLines.append("g").attr("class",Y.xgridLines),a.gridLines.append("g").attr("class",Y.ygridLines),a.xgridLines=t.selectAll([])},p.updateXGrid=function(i){var o=this,e=o.config,t=o.d3,a=o.generateGridData(e.grid_x_type,o.x),r=o.isCategorized()?o.xAxis.tickOffset():0;o.xgridAttr=e.axis_rotated?{x1:0,x2:o.width,y1:function(e){return o.x(e)-r},y2:function(e){return o.x(e)-r}}:{x1:function(e){return o.x(e)+r},x2:function(e){return o.x(e)+r},y1:0,y2:o.height},o.xgrid=o.main.select("."+Y.xgrids).selectAll("."+Y.xgrid).data(a),o.xgrid.enter().append("line").attr("class",Y.xgrid),i||o.xgrid.attr(o.xgridAttr).style("opacity",function(){return+t.select(this).attr(e.axis_rotated?"y1":"x1")===(e.axis_rotated?o.height:0)?0:1}),o.xgrid.exit().remove()},p.updateYGrid=function(){var a=this,t=a.config,e=a.yAxis.tickValues()||a.y.ticks(t.grid_y_ticks);a.ygrid=a.main.select("."+Y.ygrids).selectAll("."+Y.ygrid).data(e),a.ygrid.enter().append("line").attr("class",Y.ygrid),a.ygrid.attr("x1",t.axis_rotated?a.y:0).attr("x2",t.axis_rotated?a.y:a.width).attr("y1",t.axis_rotated?0:a.y).attr("y2",t.axis_rotated?a.height:a.y),a.ygrid.exit().remove(),a.smoothLines(a.ygrid,"grid")},p.gridTextAnchor=function(e){return e.position?e.position:"end"},p.gridTextDx=function(e){return"start"===e.position?4:"middle"===e.position?0:-4},p.xGridTextX=function(e){return"start"===e.position?-this.height:"middle"===e.position?-this.height/2:0},p.yGridTextX=function(e){return"start"===e.position?0:"middle"===e.position?this.width/2:this.width},p.updateGrid=function(i){var t,e,n,a=this,r=a.main,s=a.config;a.grid.style("visibility",a.hasArcType()?"hidden":"visible"),r.select("line."+Y.xgridFocus).style("visibility","hidden"),s.grid_x_show&&a.updateXGrid(),a.xgridLines=r.select("."+Y.xgridLines).selectAll("."+Y.xgridLine).data(s.grid_x_lines),(t=a.xgridLines.enter().append("g").attr("class",function(e){return Y.xgridLine+(e.class?" "+e.class:"")})).append("line").style("opacity",0),t.append("text").attr("text-anchor",a.gridTextAnchor).attr("transform",s.axis_rotated?"":"rotate(-90)").attr("dx",a.gridTextDx).attr("dy",-5).style("opacity",0),a.xgridLines.exit().transition().duration(i).style("opacity",0).remove(),s.grid_y_show&&a.updateYGrid(),a.ygridLines=r.select("."+Y.ygridLines).selectAll("."+Y.ygridLine).data(s.grid_y_lines),(e=a.ygridLines.enter().append("g").attr("class",function(e){return Y.ygridLine+(e.class?" "+e.class:"")})).append("line").style("opacity",0),e.append("text").attr("text-anchor",a.gridTextAnchor).attr("transform",s.axis_rotated?"rotate(-90)":"").attr("dx",a.gridTextDx).attr("dy",-5).style("opacity",0),n=a.yv.bind(a),a.ygridLines.select("line").transition().duration(i).attr("x1",s.axis_rotated?n:0).attr("x2",s.axis_rotated?n:a.width).attr("y1",s.axis_rotated?0:n).attr("y2",s.axis_rotated?a.height:n).style("opacity",1),a.ygridLines.select("text").transition().duration(i).attr("x",s.axis_rotated?a.xGridTextX.bind(a):a.yGridTextX.bind(a)).attr("y",n).text(function(e){return e.text}).style("opacity",1),a.ygridLines.exit().transition().duration(i).style("opacity",0).remove()},p.redrawGrid=function(s){var t=this,e=t.config,i=t.xv.bind(t),n=t.xgridLines.select("line"),a=t.xgridLines.select("text");return[(s?n.transition():n).attr("x1",e.axis_rotated?0:i).attr("x2",e.axis_rotated?t.width:i).attr("y1",e.axis_rotated?i:0).attr("y2",e.axis_rotated?i:t.height).style("opacity",1),(s?a.transition():a).attr("x",e.axis_rotated?t.yGridTextX.bind(t):t.xGridTextX.bind(t)).attr("y",i).text(function(e){return e.text}).style("opacity",1)]},p.showXGridFocus=function(i){var t=this,e=t.config,n=i.filter(function(e){return e&&M(e.value)}),a=t.main.selectAll("line."+Y.xgridFocus),r=t.xx.bind(t);e.tooltip_show&&(t.hasType("scatter")||t.hasArcType()||(a.style("visibility","visible").data([n[0]]).attr(e.axis_rotated?"y1":"x1",r).attr(e.axis_rotated?"y2":"x2",r),t.smoothLines(a,"grid")))},p.hideXGridFocus=function(){this.main.select("line."+Y.xgridFocus).style("visibility","hidden")},p.updateXgridFocus=function(){var e=this.config;this.main.select("line."+Y.xgridFocus).attr("x1",e.axis_rotated?0:-10).attr("x2",e.axis_rotated?this.width:-10).attr("y1",e.axis_rotated?-10:0).attr("y2",e.axis_rotated?-10:this.height)},p.generateGridData=function(i,t){var e,n,a,r,s=[],o=this.main.select("."+Y.axisX).selectAll(".tick").size();if("year"===i)for(n=(e=this.getXDomain())[0].getFullYear(),a=e[1].getFullYear(),r=n;r<=a;r++)s.push(new Date(r+"-01-01 00:00:00"));else(s=t.ticks(10)).length>o&&(s=s.filter(function(e){return 0>(""+e).indexOf(".")}));return s},p.getGridFilterToRemove=function(a){return a?function(r){var e=!1;return[].concat(a).forEach(function(a){("value"in a&&r.value===a.value||"class"in a&&r.class===a.class)&&(e=!0)}),e}:function(){return!0}},p.removeGridLines=function(i,t){var e=this.config,n=this.getGridFilterToRemove(i),a=function(e){return!n(e)},r=t?Y.xgridLines:Y.ygridLines,s=t?Y.xgridLine:Y.ygridLine;this.main.select("."+r).selectAll("."+s).filter(n).transition().duration(e.transition_duration).style("opacity",0).remove(),t?e.grid_x_lines=e.grid_x_lines.filter(a):e.grid_y_lines=e.grid_y_lines.filter(a)},p.initEventRect=function(){this.main.select("."+Y.chart).append("g").attr("class",Y.eventRects).style("fill-opacity",0)},p.redrawEventRect=function(){var i,t,e=this,n=e.config,a=e.isMultipleX(),o=e.main.select("."+Y.eventRects).style("cursor",n.zoom_enabled?n.axis_rotated?"ns-resize":"ew-resize":null).classed(Y.eventRectsMultiple,a).classed(Y.eventRectsSingle,!a);o.selectAll("."+Y.eventRect).remove(),e.eventRect=o.selectAll("."+Y.eventRect),a?(i=e.eventRect.data([0]),e.generateEventRectsForMultipleXs(i.enter()),e.updateEventRect(i)):(t=e.getMaxDataCountTarget(e.data.targets),o.datum(t?t.values:[]),e.eventRect=o.selectAll("."+Y.eventRect),i=e.eventRect.data(function(e){return e}),e.generateEventRectsForSingleX(i.enter()),e.updateEventRect(i),i.exit().remove())},p.updateEventRect=function(d){var t,e,i,n,a,r,s=this,o=s.config;d=d||s.eventRect.data(function(e){return e}),s.isMultipleX()?(t=0,e=0,i=s.width,n=s.height):((s.isCustomX()||s.isTimeSeries())&&!s.isCategorized()?(s.updateXs(),a=function(a){var t=s.getPrevX(a.index),e=s.getNextX(a.index);return null===t&&null===e?o.axis_rotated?s.height:s.width:(null===t&&(t=s.x.domain()[0]),null===e&&(e=s.x.domain()[1]),F(0,(s.x(e)-s.x(t))/2))},r=function(a){var t=s.getPrevX(a.index),e=s.getNextX(a.index),i=s.data.xs[a.id][a.index];return null===t&&null===e?0:(null===t&&(t=s.x.domain()[0]),(s.x(i)+s.x(t))/2)}):(a=s.getEventRectWidth(),r=function(e){return s.x(e.x)-a/2}),t=o.axis_rotated?0:r,e=o.axis_rotated?r:0,i=o.axis_rotated?s.width:a,n=o.axis_rotated?a:s.height),d.attr("class",s.classEvent.bind(s)).attr("x",t).attr("y",e).attr("width",i).attr("height",n)},p.generateEventRectsForSingleX=function(i){var d=this,e=d.d3,l=d.config;i.append("rect").attr("class",d.classEvent.bind(d)).style("cursor",l.data_selection_enabled&&l.data_selection_grouped?"pointer":null).on("mouseover",function(e){var t=e.index;d.dragging||d.flowing||d.hasArcType()||(l.point_focus_expand_enabled&&d.expandCircles(t,null,!0),d.expandBars(t,null,!0),d.main.selectAll("."+Y.shape+"-"+t).each(function(e){l.data_onmouseover.call(d.api,e)}))}).on("mouseout",function(e){var t=e.index;d.config&&(d.hasArcType()||(d.hideXGridFocus(),d.hideTooltip(),d.unexpandCircles(),d.unexpandBars(),d.main.selectAll("."+Y.shape+"-"+t).each(function(e){l.data_onmouseout.call(d.api,e)})))}).on("mousemove",function(a){var t,i=a.index,r=d.svg.select("."+Y.eventRect+"-"+i);d.dragging||d.flowing||d.hasArcType()||(d.isStepType(a)&&"step-after"===d.config.line_step_type&&e.mouse(this)[0]<d.x(d.getXValue(a.id,i))&&(i-=1),t=d.filterTargetsToShow(d.data.targets).map(function(e){return d.addName(d.getValueOnIndex(e.values,i))}),l.tooltip_grouped&&(d.showTooltip(t,this),d.showXGridFocus(t)),(!l.tooltip_grouped||l.data_selection_enabled&&!l.data_selection_grouped)&&d.main.selectAll("."+Y.shape+"-"+i).each(function(){e.select(this).classed(Y.EXPANDED,!0),l.data_selection_enabled&&r.style("cursor",l.data_selection_grouped?"pointer":null),l.tooltip_grouped||(d.hideXGridFocus(),d.hideTooltip(),l.data_selection_grouped||(d.unexpandCircles(i),d.unexpandBars(i)))}).filter(function(e){return d.isWithinShape(this,e)}).each(function(e){l.data_selection_enabled&&(l.data_selection_grouped||l.data_selection_isselectable(e))&&r.style("cursor","pointer"),l.tooltip_grouped||(d.showTooltip([e],this),d.showXGridFocus([e]),l.point_focus_expand_enabled&&d.expandCircles(i,e.id,!0),d.expandBars(i,e.id,!0))}))}).on("click",function(a){var i=a.index;!d.hasArcType()&&d.toggleShape&&(d.cancelClick?d.cancelClick=!1:(d.isStepType(a)&&"step-after"===l.line_step_type&&e.mouse(this)[0]<d.x(d.getXValue(a.id,i))&&(i-=1),d.main.selectAll("."+Y.shape+"-"+i).each(function(e){(l.data_selection_grouped||d.isWithinShape(this,e))&&(d.toggleShape(this,e,i),d.config.data_onclick.call(d.api,e,this))})))}).call(l.data_selection_draggable&&d.drag?e.behavior.drag().origin(Object).on("drag",function(){d.drag(e.mouse(this))}).on("dragstart",function(){d.dragstart(e.mouse(this))}).on("dragend",function(){d.dragend()}):function(){})},p.generateEventRectsForMultipleXs=function(i){function d(){l.svg.select("."+Y.eventRect).style("cursor",null),l.hideXGridFocus(),l.hideTooltip(),l.unexpandCircles(),l.unexpandBars()}var l=this,e=l.d3,n=l.config;i.append("rect").attr("x",0).attr("y",0).attr("width",l.width).attr("height",l.height).attr("class",Y.eventRect).on("mouseout",function(){l.config&&(l.hasArcType()||d())}).on("mousemove",function(){var a,t,i,r=l.filterTargetsToShow(l.data.targets);l.dragging||l.hasArcType(r)||(a=e.mouse(this),t=l.findClosestFromTargets(r,a),!l.mouseover||t&&t.id===l.mouseover.id||(n.data_onmouseout.call(l.api,l.mouseover),l.mouseover=void 0),t?(i=(l.isScatterType(t)||!n.tooltip_grouped?[t]:l.filterByX(r,t.x)).map(function(e){return l.addName(e)}),l.showTooltip(i,this),n.point_focus_expand_enabled&&l.expandCircles(t.index,t.id,!0),l.expandBars(t.index,t.id,!0),l.showXGridFocus(i),(l.isBarType(t.id)||l.dist(t,a)<n.point_sensitivity)&&(l.svg.select("."+Y.eventRect).style("cursor","pointer"),l.mouseover||(n.data_onmouseover.call(l.api,t),l.mouseover=t))):d())}).on("click",function(){var a,t,i=l.filterTargetsToShow(l.data.targets);l.hasArcType(i)||(a=e.mouse(this),(t=l.findClosestFromTargets(i,a))&&(l.isBarType(t.id)||l.dist(t,a)<n.point_sensitivity)&&l.main.selectAll("."+Y.shapes+l.getTargetSelectorSuffix(t.id)).selectAll("."+Y.shape+"-"+t.index).each(function(){(n.data_selection_grouped||l.isWithinShape(this,t))&&(l.toggleShape(this,t,t.index),l.config.data_onclick.call(l.api,t,this))}))}).call(n.data_selection_draggable&&l.drag?e.behavior.drag().origin(Object).on("drag",function(){l.drag(e.mouse(this))}).on("dragstart",function(){l.dragstart(e.mouse(this))}).on("dragend",function(){l.dragend()}):function(){})},p.dispatchEvent=function(i,t,e){var n="."+Y.eventRect+(this.isMultipleX()?"":"-"+t),a=this.main.select(n).node(),r=a.getBoundingClientRect(),s=r.left+(e?e[0]:0),o=r.top+(e?e[1]:0),l=document.createEvent("MouseEvents");l.initMouseEvent(i,!0,!0,window,0,s,o,s,o,!1,!1,!1,!1,0,null),a.dispatchEvent(l)},p.initLegend=function(){var e=this;return(e.legendItemTextBox={},e.legendHasRendered=!1,e.legend=e.svg.append("g").attr("transform",e.getTranslate("legend")),!e.config.legend_show)?(e.legend.style("visibility","hidden"),void(e.hiddenLegendIds=e.mapToIds(e.data.targets))):void e.updateLegendWithDefaults()},p.updateLegendWithDefaults=function(){this.updateLegend(this.mapToIds(this.data.targets),{withTransform:!1,withTransitionForTransform:!1,withTransition:!1})},p.updateSizeForLegend=function(r,t){var e=this,i=e.config,n={top:e.isLegendTop?e.getCurrentPaddingTop()+i.legend_inset_y+5.5:e.currentHeight-r-e.getCurrentPaddingBottom()-i.legend_inset_y,left:e.isLegendLeft?e.getCurrentPaddingLeft()+i.legend_inset_x+.5:e.currentWidth-t-e.getCurrentPaddingRight()-i.legend_inset_x+.5};e.margin3={top:e.isLegendRight?0:e.isLegendInset?n.top:e.currentHeight-r,right:NaN,bottom:0,left:e.isLegendRight?e.currentWidth-t:e.isLegendInset?n.left:0}},p.transformLegend=function(e){(e?this.legend.transition():this.legend).attr("transform",this.getTranslate("legend"))},p.updateLegendStep=function(e){this.legendStep=e},p.updateLegendItemWidth=function(e){this.legendItemWidth=e},p.updateLegendItemHeight=function(e){this.legendItemHeight=e},p.getLegendWidth=function(){var e=this;return e.config.legend_show?e.isLegendRight||e.isLegendInset?e.legendItemWidth*(e.legendStep+1):e.currentWidth:0},p.getLegendHeight=function(){var a=this,t=0;return a.config.legend_show&&(t=a.isLegendRight?a.currentHeight:F(20,a.legendItemHeight)*(a.legendStep+1)),t},p.opacityForLegend=function(e){return e.classed(Y.legendItemHidden)?null:1},p.opacityForUnfocusedLegend=function(e){return e.classed(Y.legendItemHidden)?null:.3},p.toggleFocusLegend=function(a,t){var e=this;a=e.mapToTargetIds(a),e.legend.selectAll("."+Y.legendItem).filter(function(t){return 0<=a.indexOf(t)}).classed(Y.legendItemFocused,t).transition().duration(100).style("opacity",function(){return(t?e.opacityForLegend:e.opacityForUnfocusedLegend).call(e,e.d3.select(this))})},p.revertLegend=function(){var a=this,t=a.d3;a.legend.selectAll("."+Y.legendItem).classed(Y.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return a.opacityForLegend(t.select(this))})},p.showLegend=function(a){var t=this,e=t.config;e.legend_show||(e.legend_show=!0,t.legend.style("visibility","visible"),t.legendHasRendered||t.updateLegendWithDefaults()),t.removeHiddenLegendIds(a),t.legend.selectAll(t.selectorLegends(a)).style("visibility","visible").transition().style("opacity",function(){return t.opacityForLegend(t.d3.select(this))})},p.hideLegend=function(a){var t=this,e=t.config;e.legend_show&&g(a)&&(e.legend_show=!1,t.legend.style("visibility","hidden")),t.addHiddenLegendIds(a),t.legend.selectAll(t.selectorLegends(a)).style("opacity",0).style("visibility","hidden")},p.clearLegendItemTextBoxCache=function(){this.legendItemTextBox={}},p.updateLegend=function(i,t,e){function n(t,e,n){function a(a,t){t||(d=(u-V-g)/2)<X&&(d=(u-g)/2,V=0,k++),R[a]=k,I[k]=w.isLegendInset?10:d,G[a]=V,V+=g}var d,r,s,o,c=n===i.length-1,_=(s=t,o=e,w.legendItemTextBox[o]||(w.legendItemTextBox[o]=w.getTextRect(s.textContent,Y.legendItem,s)),w.legendItemTextBox[o]),x=_.width+L+(!c||w.isLegendRight||w.isLegendInset?T:0)+v.legend_padding,h=_.height+b,g=w.isLegendRight||w.isLegendInset?h:x,u=w.isLegendRight||w.isLegendInset?w.getLegendHeight():w.getLegendWidth();0===n&&(V=0,k=0,A=0,F=0),!v.legend_show||w.isLegendToShow(e)?(E[e]=x,O[e]=h,(!A||x>=A)&&(A=x),(!F||h>=F)&&(F=h),r=w.isLegendRight||w.isLegendInset?F:A,v.legend_equally?(Object.keys(E).forEach(function(e){E[e]=A}),Object.keys(O).forEach(function(e){O[e]=F}),(d=(u-r*i.length)/2)<X?(V=0,k=0,i.forEach(function(e){a(e)})):a(e,!0)):a(e)):E[e]=O[e]=R[e]=G[e]=0}var x,a,r,s,o,c,d,l,h,g,u,p,_,y,m,S,w=this,v=w.config,b=4,T=10,A=0,F=0,X=10,L=v.legend_item_tile_width+5,V=0,G={},E={},O={},I=[0],R={},k=0;i=i.filter(function(e){return!W(v.data_names[e])||null!==v.data_names[e]}),u=j(t=t||{},"withTransition",!0),p=j(t,"withTransitionForTransform",!0),w.isLegendInset&&(k=v.legend_inset_step?v.legend_inset_step:i.length,w.updateLegendStep(k)),w.isLegendRight?(x=function(e){return A*R[e]},s=function(e){return I[R[e]]+G[e]}):w.isLegendInset?(x=function(e){return A*R[e]+10},s=function(e){return I[R[e]]+G[e]}):(x=function(e){return I[R[e]]+G[e]},s=function(e){return F*R[e]}),a=function(a,t){return x(a,t)+4+v.legend_item_tile_width},o=function(a,t){return s(a,t)+9},r=function(a,t){return x(a,t)},c=function(a,t){return s(a,t)-5},d=function(a,t){return x(a,t)-2},l=function(a,t){return x(a,t)-2+v.legend_item_tile_width},h=function(a,t){return s(a,t)+4},(g=w.legend.selectAll("."+Y.legendItem).data(i).enter().append("g").attr("class",function(e){return w.generateClass(Y.legendItem,e)}).style("visibility",function(e){return w.isLegendToShow(e)?"visible":"hidden"}).style("cursor","pointer").on("click",function(e){v.legend_item_onclick?v.legend_item_onclick.call(w,e):w.d3.event.altKey?(w.api.hide(),w.api.show(e)):(w.api.toggle(e),w.isTargetToShow(e)?w.api.focus(e):w.api.revert())}).on("mouseover",function(e){v.legend_item_onmouseover?v.legend_item_onmouseover.call(w,e):(w.d3.select(this).classed(Y.legendItemFocused,!0),!w.transiting&&w.isTargetToShow(e)&&w.api.focus(e))}).on("mouseout",function(e){v.legend_item_onmouseout?v.legend_item_onmouseout.call(w,e):(w.d3.select(this).classed(Y.legendItemFocused,!1),w.api.revert())})).append("text").text(function(e){return W(v.data_names[e])?v.data_names[e]:e}).each(function(a,t){n(this,a,t)}).style("pointer-events","none").attr("x",w.isLegendRight||w.isLegendInset?a:-200).attr("y",w.isLegendRight||w.isLegendInset?-200:o),g.append("rect").attr("class",Y.legendItemEvent).style("fill-opacity",0).attr("x",w.isLegendRight||w.isLegendInset?r:-200).attr("y",w.isLegendRight||w.isLegendInset?-200:c),g.append("line").attr("class",Y.legendItemTile).style("stroke",w.color).style("pointer-events","none").attr("x1",w.isLegendRight||w.isLegendInset?d:-200).attr("y1",w.isLegendRight||w.isLegendInset?-200:h).attr("x2",w.isLegendRight||w.isLegendInset?l:-200).attr("y2",w.isLegendRight||w.isLegendInset?-200:h).attr("stroke-width",v.legend_item_tile_height),S=w.legend.select("."+Y.legendBackground+" rect"),w.isLegendInset&&0<A&&0===S.size()&&(S=w.legend.insert("g","."+Y.legendItem).attr("class",Y.legendBackground).append("rect")),_=w.legend.selectAll("text").data(i).text(function(e){return W(v.data_names[e])?v.data_names[e]:e}).each(function(a,t){n(this,a,t)}),(u?_.transition():_).attr("x",a).attr("y",o),y=w.legend.selectAll("rect."+Y.legendItemEvent).data(i),(u?y.transition():y).attr("width",function(e){return E[e]}).attr("height",function(e){return O[e]}).attr("x",r).attr("y",c),m=w.legend.selectAll("line."+Y.legendItemTile).data(i),(u?m.transition():m).style("stroke",w.levelColor?function(e){return w.levelColor(w.cache[e].values[0].value)}:w.color).attr("x1",d).attr("y1",h).attr("x2",l).attr("y2",h),S&&(u?S.transition():S).attr("height",w.getLegendHeight()-12).attr("width",A*(k+1)+10),w.legend.selectAll("."+Y.legendItem).classed(Y.legendItemHidden,function(e){return!w.isTargetToShow(e)}),w.updateLegendItemWidth(A),w.updateLegendItemHeight(F),w.updateLegendStep(k),w.updateSizes(),w.updateScales(),w.updateSvgSize(),w.transformAll(p,e),w.legendHasRendered=!0},p.initRegion=function(){this.region=this.main.append("g").attr("clip-path",this.clipPath).attr("class",Y.regions)},p.updateRegion=function(a){var t=this,e=t.config;t.region.style("visibility",t.hasArcType()?"hidden":"visible"),t.mainRegion=t.main.select("."+Y.regions).selectAll("."+Y.region).data(e.regions),t.mainRegion.enter().append("g").append("rect").style("fill-opacity",0),t.mainRegion.attr("class",t.classRegion.bind(t)),t.mainRegion.exit().transition().duration(a).style("opacity",0).remove()},p.redrawRegion=function(s){var d=this,e=d.mainRegion.selectAll("rect").each(function(){var e=d.d3.select(this.parentNode).datum();d.d3.select(this).datum(e)}),t=d.regionX.bind(d),i=d.regionY.bind(d),a=d.regionWidth.bind(d),r=d.regionHeight.bind(d);return[(s?e.transition():e).attr("x",t).attr("y",i).attr("width",a).attr("height",r).style("fill-opacity",function(e){return M(e.opacity)?e.opacity:.1})]},p.regionX=function(a){var t=this,e=t.config,i="y"===a.axis?t.y:t.y2;return"y"===a.axis||"y2"===a.axis?e.axis_rotated&&"start"in a?i(a.start):0:e.axis_rotated?0:"start"in a?t.x(t.isTimeSeries()?t.parseDate(a.start):a.start):0},p.regionY=function(a){var t=this,e=t.config,i="y"===a.axis?t.y:t.y2;return"y"===a.axis||"y2"===a.axis?e.axis_rotated?0:"end"in a?i(a.end):0:e.axis_rotated&&"start"in a?t.x(t.isTimeSeries()?t.parseDate(a.start):a.start):0},p.regionWidth=function(s){var t,e=this,i=e.config,n=e.regionX(s),a="y"===s.axis?e.y:e.y2;return(t="y"===s.axis||"y2"===s.axis?i.axis_rotated&&"end"in s?a(s.end):e.width:i.axis_rotated?e.width:"end"in s?e.x(e.isTimeSeries()?e.parseDate(s.end):s.end):e.width)<n?0:t-n},p.regionHeight=function(s){var t,e=this,i=e.config,n=this.regionY(s),a="y"===s.axis?e.y:e.y2;return(t="y"===s.axis||"y2"===s.axis?i.axis_rotated?e.height:"start"in s?a(s.start):e.height:i.axis_rotated&&"end"in s?e.x(e.isTimeSeries()?e.parseDate(s.end):s.end):e.height)<n?0:t-n},p.isRegionOnX=function(e){return!e.axis||"x"===e.axis},p.getScale=function(a,t,e){return(e?this.d3.time.scale():this.d3.scale.linear()).range([a,t])},p.getX=function(o,t,e,d){var i,a=this.getScale(o,t,this.isTimeSeries()),r=e?a.domain(e):a;for(i in this.isCategorized()?(d=d||function(){return 0},a=function(a,t){var e=r(a)+d(a);return t?e:z(e)}):a=function(a,t){var e=r(a);return t?e:z(e)},r)a[i]=r[i];return a.orgDomain=function(){return r.domain()},this.isCategorized()&&(a.domain=function(e){return arguments.length?(r.domain(e),a):[(e=this.orgDomain())[0],e[1]+1]}),a},p.getY=function(a,t,e){var i=this.getScale(a,t,this.isTimeSeriesY());return e&&i.domain(e),i},p.getYScale=function(e){return"y2"===this.axis.getId(e)?this.y2:this.y},p.getSubYScale=function(e){return"y2"===this.axis.getId(e)?this.subY2:this.subY},p.updateScales=function(){var a=this,t=a.config,e=!a.x;a.xMin=t.axis_rotated?1:0,a.xMax=t.axis_rotated?a.height:a.width,a.yMin=t.axis_rotated?0:a.height,a.yMax=t.axis_rotated?a.width:1,a.subXMin=a.xMin,a.subXMax=a.xMax,a.subYMin=t.axis_rotated?0:a.height2,a.subYMax=t.axis_rotated?a.width2:1,a.x=a.getX(a.xMin,a.xMax,e?void 0:a.x.orgDomain(),function(){return a.xAxis.tickOffset()}),a.y=a.getY(a.yMin,a.yMax,e?t.axis_y_default:a.y.domain()),a.y2=a.getY(a.yMin,a.yMax,e?t.axis_y2_default:a.y2.domain()),a.subX=a.getX(a.xMin,a.xMax,a.orgXDomain,function(t){return t%1?0:a.subXAxis.tickOffset()}),a.subY=a.getY(a.subYMin,a.subYMax,e?t.axis_y_default:a.subY.domain()),a.subY2=a.getY(a.subYMin,a.subYMax,e?t.axis_y2_default:a.subY2.domain()),a.xAxisTickFormat=a.axis.getXAxisTickFormat(),a.xAxisTickValues=a.axis.getXAxisTickValues(),a.yAxisTickValues=a.axis.getYAxisTickValues(),a.y2AxisTickValues=a.axis.getY2AxisTickValues(),a.xAxis=a.axis.getXAxis(a.x,a.xOrient,a.xAxisTickFormat,a.xAxisTickValues,t.axis_x_tick_outer),a.subXAxis=a.axis.getXAxis(a.subX,a.subXOrient,a.xAxisTickFormat,a.xAxisTickValues,t.axis_x_tick_outer),a.yAxis=a.axis.getYAxis(a.y,a.yOrient,t.axis_y_tick_format,a.yAxisTickValues,t.axis_y_tick_outer),a.y2Axis=a.axis.getYAxis(a.y2,a.y2Orient,t.axis_y2_tick_format,a.y2AxisTickValues,t.axis_y2_tick_outer),e||(a.brush&&a.brush.scale(a.subX),t.zoom_enabled&&a.zoom.scale(a.x)),a.updateArc&&a.updateArc()},p.selectPoint=function(i,t,e){var n=this,a=n.config,r=(a.axis_rotated?n.circleY:n.circleX).bind(n),s=(a.axis_rotated?n.circleX:n.circleY).bind(n),o=n.pointSelectR.bind(n);a.data_onselected.call(n.api,t,i.node()),n.main.select("."+Y.selectedCircles+n.getTargetSelectorSuffix(t.id)).selectAll("."+Y.selectedCircle+"-"+e).data([t]).enter().append("circle").attr("class",function(){return n.generateClass(Y.selectedCircle,e)}).attr("cx",r).attr("cy",s).attr("stroke",function(){return n.color(t)}).attr("r",function(e){return 1.4*n.pointSelectR(e)}).transition().duration(100).attr("r",o)},p.unselectPoint=function(a,t,e){this.config.data_onunselected.call(this.api,t,a.node()),this.main.select("."+Y.selectedCircles+this.getTargetSelectorSuffix(t.id)).selectAll("."+Y.selectedCircle+"-"+e).transition().duration(100).attr("r",0).remove()},p.togglePoint=function(a,t,e,i){a?this.selectPoint(t,e,i):this.unselectPoint(t,e,i)},p.selectPath=function(a,t){var e=this;e.config.data_onselected.call(e,t,a.node()),e.config.interaction_brighten&&a.transition().duration(100).style("fill",function(){return e.d3.rgb(e.color(t)).brighter(.75)})},p.unselectPath=function(a,t){var e=this;e.config.data_onunselected.call(e,t,a.node()),e.config.interaction_brighten&&a.transition().duration(100).style("fill",function(){return e.color(t)})},p.togglePath=function(a,t,e,i){a?this.selectPath(t,e,i):this.unselectPath(t,e,i)},p.getToggle=function(a,t){var e;return"circle"===a.nodeName?e=this.isStepType(t)?function(){}:this.togglePoint:"path"===a.nodeName&&(e=this.togglePath),e},p.toggleShape=function(i,t,e){var n=this,a=n.d3,r=n.config,s=a.select(i),o=s.classed(Y.SELECTED),l=n.getToggle(i,t).bind(n);r.data_selection_enabled&&r.data_selection_isselectable(t)&&(r.data_selection_multiple||n.main.selectAll("."+Y.shapes+(r.data_selection_grouped?n.getTargetSelectorSuffix(t.id):"")).selectAll("."+Y.shape).each(function(i,t){var e=a.select(this);e.classed(Y.SELECTED)&&l(!1,e.classed(Y.SELECTED,!1),i,t)}),s.classed(Y.SELECTED,!o),l(!o,s,t,e))},p.initBar=function(){this.main.select("."+Y.chart).append("g").attr("class",Y.chartBars)},p.updateTargetsForBar=function(i){var t=this,e=t.config,n=t.classChartBar.bind(t),a=t.classBars.bind(t),r=t.classFocus.bind(t);t.main.select("."+Y.chartBars).selectAll("."+Y.chartBar).data(i).attr("class",function(e){return n(e)+r(e)}).enter().append("g").attr("class",n).style("pointer-events","none").append("g").attr("class",a).style("cursor",function(a){return e.data_selection_isselectable(a)?"pointer":null})},p.updateBar=function(i){var o=this,e=o.barData.bind(o),t=o.classBar.bind(o),a=o.initialOpacity.bind(o),r=function(e){return o.color(e.id)};o.mainBar=o.main.selectAll("."+Y.bars).selectAll("."+Y.bar).data(e),o.mainBar.enter().append("path").attr("class",t).style("stroke",r).style("fill",r),o.mainBar.style("opacity",a),o.mainBar.exit().transition().duration(i).remove()},p.redrawBar=function(a,t){return[(t?this.mainBar.transition(Math.random().toString()):this.mainBar).attr("d",a).style("stroke",this.color).style("fill",this.color).style("opacity",1)]},p.getBarW=function(a,t){var e=this.config,i="number"==typeof e.bar_width?e.bar_width:t?a.tickInterval()*e.bar_width_ratio/t:0;return e.bar_width_max&&i>e.bar_width_max?e.bar_width_max:i},p.getBars=function(a,t){return(t?this.main.selectAll("."+Y.bars+this.getTargetSelectorSuffix(t)):this.main).selectAll("."+Y.bar+(M(a)?"-"+a:""))},p.expandBars=function(a,t,e){e&&this.unexpandBars(),this.getBars(a,t).classed(Y.EXPANDED,!0)},p.unexpandBars=function(e){this.getBars(e).classed(Y.EXPANDED,!1)},p.generateDrawBar=function(a,t){var o=this.config,i=this.generateGetBarPoints(a,t);return function(n,t){var e=i(n,t),a=o.axis_rotated?1:0,r=o.axis_rotated?0:1;return"M "+e[0][a]+","+e[0][r]+" L"+e[1][a]+","+e[1][r]+" L"+e[2][a]+","+e[2][r]+" L"+e[3][a]+","+e[3][r]+" z"}},p.generateGetBarPoints=function(g,t){var p=this,i=t?p.subXAxis:p.xAxis,n=g.__max__+1,_=p.getBarW(i,n),r=p.getShapeX(_,n,g,!!t),s=p.getShapeY(!!t),o=p.getShapeOffset(p.isBarType,g,!!t),c=_*(p.config.bar_space/2),d=t?p.getSubYScale:p.getYScale;return function(i,t){var e=d.call(p,i.id)(0),n=o(i,t)||e,a=r(i),l=s(i);return p.config.axis_rotated&&(0<i.value&&l<e||0>i.value&&e<l)&&(l=e),[[a+c,n],[a+c,l-(e-n)],[a+_-c,l-(e-n)],[a+_-c,n]]}},p.isWithinBar=function(d){var t=this.d3.mouse(d),e=d.getBoundingClientRect(),i=d.pathSegList.getItem(0),n=d.pathSegList.getItem(1),a=X(i.x,n.x),r=X(i.y,n.y),s=a+e.width+2,o=r+e.height+2;return a-2<t[0]&&t[0]<s&&r-2<t[1]&&t[1]<o},p.getShapeIndices=function(s){var o,e,i=this.config,n={},a=0;return this.filterTargetsToShow(this.data.targets.filter(s,this)).forEach(function(r){for(o=0;o<i.data_groups.length;o++)if(!(0>i.data_groups[o].indexOf(r.id)))for(e=0;e<i.data_groups[o].length;e++)if(i.data_groups[o][e]in n){n[r.id]=n[i.data_groups[o][e]];break}U(n[r.id])&&(n[r.id]=a++)}),n.__max__=a-1,n},p.getShapeX=function(s,t,e,i){var o=i?this.subX:this.x;return function(a){var i=a.id in e?e[a.id]:0;return a.x||0===a.x?o(a.x)-s*(t/2-i):0}},p.getShapeY=function(a){var t=this;return function(e){return(a?t.getSubYScale(e.id):t.getYScale(e.id))(e.value)}},p.getShapeOffset=function(s,l,e){var g=this,i=g.orderTargets(g.filterTargetsToShow(g.data.targets.filter(s,g))),n=i.map(function(e){return e.id});return function(r,t){var s=e?g.getSubYScale(r.id):g.getYScale(r.id),o=s(0),c=o;return i.forEach(function(e){var i=g.isStepType(r)?g.convertValuesToStep(e.values):e.values;e.id!==r.id&&l[e.id]===l[r.id]&&n.indexOf(e.id)<n.indexOf(r.id)&&(void 0!==i[t]&&+i[t].x==+r.x||(t=-1,i.forEach(function(a,e){a.x===r.x&&(t=e)})),t in i&&0<=i[t].value*r.value&&(c+=s(i[t].value)-o))}),c}},p.isWithinShape=function(i,t){var e,n=this,a=n.d3.select(i);return n.isTargetToShow(t.id)?"circle"===i.nodeName?e=n.isStepType(t)?n.isWithinStep(i,n.getYScale(t.id)(t.value)):n.isWithinCircle(i,1.5*n.pointSelectR(t)):"path"===i.nodeName&&(e=!a.classed(Y.bar)||n.isWithinBar(i)):e=!1,e},p.getInterpolate=function(a){var t=this,e=t.isInterpolationType(t.config.spline_interpolation_type)?t.config.spline_interpolation_type:"cardinal";return t.isSplineType(a)?e:t.isStepType(a)?t.config.line_step_type:"linear"},p.initLine=function(){this.main.select("."+Y.chart).append("g").attr("class",Y.chartLines)},p.updateTargetsForLine=function(i){var t,e=this,n=e.config,a=e.classChartLine.bind(e),r=e.classLines.bind(e),s=e.classAreas.bind(e),o=e.classCircles.bind(e),l=e.classFocus.bind(e);(t=e.main.select("."+Y.chartLines).selectAll("."+Y.chartLine).data(i).attr("class",function(e){return a(e)+l(e)}).enter().append("g").attr("class",a).style("opacity",0).style("pointer-events","none")).append("g").attr("class",r),t.append("g").attr("class",s),t.append("g").attr("class",function(a){return e.generateClass(Y.selectedCircles,a.id)}),t.append("g").attr("class",o).style("cursor",function(e){return n.data_selection_isselectable(e)?"pointer":null}),i.forEach(function(a){e.main.selectAll("."+Y.selectedCircles+e.getTargetSelectorSuffix(a.id)).selectAll("."+Y.selectedCircle).each(function(t){t.value=a.values[t.index].value})})},p.updateLine=function(a){var i=this;i.mainLine=i.main.selectAll("."+Y.lines).selectAll("."+Y.line).data(i.lineData.bind(i)),i.mainLine.enter().append("path").attr("class",i.classLine.bind(i)).style("stroke",i.color),i.mainLine.style("opacity",i.initialOpacity.bind(i)).style("shape-rendering",function(e){return i.isStepType(e)?"crispEdges":""}).attr("transform",null),i.mainLine.exit().transition().duration(a).style("opacity",0).remove()},p.redrawLine=function(a,t){return[(t?this.mainLine.transition(Math.random().toString()):this.mainLine).attr("d",a).style("stroke",this.color).style("opacity",1)]},p.generateDrawLine=function(d,g){var p=this,i=p.config,e=p.d3.svg.line(),a=p.generateGetLinePoints(d,g),n=g?p.getSubYScale:p.getYScale,t=function(e){return(g?p.subxx:p.xx).call(p,e)},r=function(r,t){return 0<i.data_groups.length?a(r,t)[0][1]:n.call(p,r.id)(r.value)};return e=i.axis_rotated?e.x(r).y(t):e.x(t).y(r),i.line_connectNull||(e=e.defined(function(e){return null!=e.value})),function(a){var t,r=i.line_connectNull?p.filterRemoveNull(a.values):a.values,s=g?p.x:p.subX,o=n.call(p,a.id),d=0,l=0;return p.isLineType(a)?i.data_regions[a.id]?t=p.lineWithRegions(r,s,o,i.data_regions[a.id]):(p.isStepType(a)&&(r=p.convertValuesToStep(r)),t=e.interpolate(p.getInterpolate(a))(r)):(r[0]&&(d=s(r[0].x),l=o(r[0].value)),t=i.axis_rotated?"M "+l+" "+d:"M "+d+" "+l),t||"M 0 0"}},p.generateGetLinePoints=function(d,t){var g=this,i=g.config,n=d.__max__+1,p=g.getShapeX(0,n,d,!!t),r=g.getShapeY(!!t),s=g.getShapeOffset(g.isLineType,d,!!t),o=t?g.getSubYScale:g.getYScale;return function(n,t){var e=o.call(g,n.id)(0),a=s(n,t)||e,d=p(n),l=r(n);return i.axis_rotated&&(0<n.value&&l<e||0>n.value&&e<l)&&(l=e),[[d,l-(e-a)],[d,l-(e-a)],[d,l-(e-a)],[d,l-(e-a)]]}},p.lineWithRegions=function(l,u,e,t){function i(a,t){var e;for(e=0;e<t.length;e++)if(t[e].start<a&&a<=t[e].end)return!0;return!1}function T(e){return"M"+e[0][0]+" "+e[0][1]+" "+e[1][0]+" "+e[1][1]}var n,a,r,s,A,o,d,c,g,h,p,_=this,x=_.config,y="M",m=_.isCategorized()?.5:0,S=[];if(W(t))for(n=0;n<t.length;n++)S[n]={},S[n].start=U(t[n].start)?l[0].x:_.isTimeSeries()?_.parseDate(t[n].start):t[n].start,S[n].end=U(t[n].end)?l[l.length-1].x:_.isTimeSeries()?_.parseDate(t[n].end):t[n].end;for(h=x.axis_rotated?function(a){return e(a.value)}:function(e){return u(e.x)},p=x.axis_rotated?function(e){return u(e.x)}:function(a){return e(a.value)},r=_.isTimeSeries()?function(i,t,n,a){var r=i.x.getTime(),s=t.x-i.x,o=new Date(r+s*n),d=new Date(r+s*(n+a));return T(x.axis_rotated?[[e(A(n)),u(o)],[e(A(n+a)),u(d)]]:[[u(o),e(A(n))],[u(d),e(A(n+a))]])}:function(i,t,n,a){return T(x.axis_rotated?[[e(A(n),!0),u(s(n))],[e(A(n+a),!0),u(s(n+a))]]:[[u(s(n),!0),e(A(n))],[u(s(n+a),!0),e(A(n+a))]])},n=0;n<l.length;n++){if(U(S)||!i(l[n].x,S))y+=" "+h(l[n])+" "+p(l[n]);else for(s=_.getScale(l[n-1].x+m,l[n].x+m,_.isTimeSeries()),A=_.getScale(l[n-1].value,l[n].value),o=u(l[n].x)-u(l[n-1].x),d=e(l[n].value)-e(l[n-1].value),g=2*(c=2/R(k(o,2)+k(d,2))),a=c;1>=a;a+=g)y+=r(l[n-1],l[n],a,c);l[n].x}return y},p.updateArea=function(a){var t=this,e=t.d3;t.mainArea=t.main.selectAll("."+Y.areas).selectAll("."+Y.area).data(t.lineData.bind(t)),t.mainArea.enter().append("path").attr("class",t.classArea.bind(t)).style("fill",t.color).style("opacity",function(){return t.orgAreaOpacity=+e.select(this).style("opacity"),0}),t.mainArea.style("opacity",t.orgAreaOpacity),t.mainArea.exit().transition().duration(a).style("opacity",0).remove()},p.redrawArea=function(a,t){return[(t?this.mainArea.transition(Math.random().toString()):this.mainArea).attr("d",a).style("fill",this.color).style("opacity",this.orgAreaOpacity)]},p.generateDrawArea=function(l,g){var p=this,i=p.config,n=p.d3.svg.area(),a=p.generateGetAreaPoints(l,g),r=g?p.getSubYScale:p.getYScale,e=function(e){return(g?p.subxx:p.xx).call(p,e)},t=function(n,t){return 0<i.data_groups.length?a(n,t)[0][1]:r.call(p,n.id)(p.getAreaBaseValue(n.id))},s=function(n,t){return 0<i.data_groups.length?a(n,t)[1][1]:r.call(p,n.id)(n.value)};return n=i.axis_rotated?n.x0(t).x1(s).y(e):n.x(e).y0(i.area_above?0:t).y1(s),i.line_connectNull||(n=n.defined(function(e){return null!==e.value})),function(a){var t,e=i.line_connectNull?p.filterRemoveNull(a.values):a.values,r=0,s=0;return p.isAreaType(a)?(p.isStepType(a)&&(e=p.convertValuesToStep(e)),t=n.interpolate(p.getInterpolate(a))(e)):(e[0]&&(r=p.x(e[0].x),s=p.getYScale(a.id)(e[0].value)),t=i.axis_rotated?"M "+s+" "+r:"M "+r+" "+s),t||"M 0 0"}},p.getAreaBaseValue=function(){return 0},p.generateGetAreaPoints=function(d,t){var g=this,i=g.config,n=d.__max__+1,p=g.getShapeX(0,n,d,!!t),r=g.getShapeY(!!t),s=g.getShapeOffset(g.isAreaType,d,!!t),o=t?g.getSubYScale:g.getYScale;return function(n,t){var e=o.call(g,n.id)(0),a=s(n,t)||e,d=p(n),l=r(n);return i.axis_rotated&&(0<n.value&&l<e||0>n.value&&e<l)&&(l=e),[[d,a],[d,l-(e-a)],[d,l-(e-a)],[d,a]]}},p.updateCircle=function(){var e=this;e.mainCircle=e.main.selectAll("."+Y.circles).selectAll("."+Y.circle).data(e.lineOrScatterData.bind(e)),e.mainCircle.enter().append("circle").attr("class",e.classCircle.bind(e)).attr("r",e.pointR.bind(e)).style("fill",e.color),e.mainCircle.style("opacity",e.initialOpacityForCircle.bind(e)),e.mainCircle.exit().remove()},p.redrawCircle=function(i,t,e){var r=this.main.selectAll("."+Y.selectedCircle);return[(e?this.mainCircle.transition(Math.random().toString()):this.mainCircle).style("opacity",this.opacityForCircle.bind(this)).style("fill",this.color).attr("cx",i).attr("cy",t),(e?r.transition(Math.random().toString()):r).attr("cx",i).attr("cy",t)]},p.circleX=function(e){return e.x||0===e.x?this.x(e.x):null},p.updateCircleY=function(){var a,r,e=this;0<e.config.data_groups.length?(a=e.getShapeIndices(e.isLineType),r=e.generateGetLinePoints(a),e.circleY=function(e,t){return r(e,t)[0][1]}):e.circleY=function(a){return e.getYScale(a.id)(a.value)}},p.getCircles=function(a,t){return(t?this.main.selectAll("."+Y.circles+this.getTargetSelectorSuffix(t)):this.main).selectAll("."+Y.circle+(M(a)?"-"+a:""))},p.expandCircles=function(i,t,e){var r=this.pointExpandedR.bind(this);e&&this.unexpandCircles(),this.getCircles(i,t).classed(Y.EXPANDED,!0).attr("r",r)},p.unexpandCircles=function(a){var t=this,e=t.pointR.bind(t);t.getCircles(a).filter(function(){return t.d3.select(this).classed(Y.EXPANDED)}).classed(Y.EXPANDED,!1).attr("r",e)},p.pointR=function(a){var t=this.config;return this.isStepType(a)?0:N(t.point_r)?t.point_r(a):t.point_r},p.pointExpandedR=function(a){var t=this.config;return t.point_focus_expand_enabled?N(t.point_focus_expand_r)?t.point_focus_expand_r(a):t.point_focus_expand_r?t.point_focus_expand_r:1.75*this.pointR(a):this.pointR(a)},p.pointSelectR=function(a){var t=this.config;return N(t.point_select_r)?t.point_select_r(a):t.point_select_r?t.point_select_r:4*this.pointR(a)},p.isWithinCircle=function(o,t){var e=this.d3,i=e.mouse(o),n=e.select(o),a=+n.attr("cx"),r=+n.attr("cy");return R(k(a-i[0],2)+k(r-i[1],2))<t},p.isWithinStep=function(a,t){return 30>E(t-this.d3.mouse(a)[1])},p.getCurrentWidth=function(){var e=this.config;return e.size_width?e.size_width:this.getParentWidth()},p.getCurrentHeight=function(){var a=this.config,t=a.size_height?a.size_height:this.getParentHeight();return 0<t?t:320/(this.hasType("gauge")&&!a.gauge_fullCircle?2:1)},p.getCurrentPaddingTop=function(){var a=this.config,t=M(a.padding_top)?a.padding_top:0;return this.title&&this.title.node()&&(t+=this.getTitlePadding()),t},p.getCurrentPaddingBottom=function(){var e=this.config;return M(e.padding_bottom)?e.padding_bottom:0},p.getCurrentPaddingLeft=function(a){var t=this.config;return M(t.padding_left)?t.padding_left:t.axis_rotated?!t.axis_x_show||t.axis_x_inner?1:F(r(this.getAxisWidthByAxisId("x",a)),40):!t.axis_y_show||t.axis_y_inner?this.axis.getYAxisLabelPosition().isOuter?30:1:r(this.getAxisWidthByAxisId("y",a))},p.getCurrentPaddingRight=function(){var a=this,t=a.config,e=a.isLegendRight?a.getLegendWidth()+20:0;return M(t.padding_right)?t.padding_right+1:t.axis_rotated?10+e:!t.axis_y2_show||t.axis_y2_inner?2+e+(a.axis.getY2AxisLabelPosition().isOuter?20:0):r(a.getAxisWidthByAxisId("y2"))+e},p.getParentRectValue=function(a){for(var t,e=this.selectChart.node();e&&"BODY"!==e.tagName;){try{t=e.getBoundingClientRect()[a]}catch(i){"width"===a&&(t=e.offsetWidth)}if(t)break;e=e.parentNode}return t},p.getParentWidth=function(){return this.getParentRectValue("width")},p.getParentHeight=function(){var e=this.selectChart.style("height");return 0<e.indexOf("px")?+e.replace("px",""):0},p.getSvgLeft=function(i){var t=this,e=t.config,n=e.axis_rotated||!e.axis_rotated&&!e.axis_y_inner,a=e.axis_rotated?Y.axisX:Y.axisY,r=t.main.select("."+a).node(),s=r&&n?r.getBoundingClientRect():{right:0},o=t.selectChart.node().getBoundingClientRect(),g=t.hasArcType(),d=s.right-o.left-(g?0:t.getCurrentPaddingLeft(i));return 0<d?d:0},p.getAxisWidthByAxisId=function(a,t){var e=this.axis.getLabelPositionById(a);return this.axis.getMaxTickWidth(a,t)+(e.isInner?20:40)},p.getHorizontalAxisHeight=function(a){var t=this,e=t.config,i=30;return"x"!==a||e.axis_x_show?"x"===a&&e.axis_x_height?e.axis_x_height:"y"!==a||e.axis_y_show?"y2"!==a||e.axis_y2_show?("x"===a&&!e.axis_rotated&&e.axis_x_tick_rotate&&(i=30+t.axis.getMaxTickWidth(a)*I(D*(90-e.axis_x_tick_rotate)/180)),"y"===a&&e.axis_rotated&&e.axis_y_tick_rotate&&(i=30+t.axis.getMaxTickWidth(a)*I(D*(90-e.axis_y_tick_rotate)/180)),i+(t.axis.getLabelPositionById(a).isInner?0:10)+("y2"===a?-10:0)):t.rotated_padding_top:!e.legend_show||t.isLegendRight||t.isLegendInset?1:10:8},p.getEventRectWidth=function(){return F(0,this.xAxis.tickInterval())},p.initBrush=function(){var a=this,t=a.d3;a.brush=t.svg.brush().on("brush",function(){a.redrawForBrush()}),a.brush.update=function(){return a.context&&a.context.select("."+Y.brush).call(this),this},a.brush.scale=function(t){return a.config.axis_rotated?this.y(t):this.x(t)}},p.initSubchart=function(){var i=this,t=i.config,e=i.context=i.svg.append("g").attr("transform",i.getTranslate("context")),r=t.subchart_show?"visible":"hidden";e.style("visibility",r),e.append("g").attr("clip-path",i.clipPathForSubchart).attr("class",Y.chart),e.select("."+Y.chart).append("g").attr("class",Y.chartBars),e.select("."+Y.chart).append("g").attr("class",Y.chartLines),e.append("g").attr("clip-path",i.clipPath).attr("class",Y.brush).call(i.brush),i.axes.subx=e.append("g").attr("class",Y.axisX).attr("transform",i.getTranslate("subx")).attr("clip-path",t.axis_rotated?"":i.clipPathForXAxis).style("visibility",t.subchart_axis_x_show?r:"hidden")},p.updateTargetsForSubchart=function(i){var t,e=this,n=e.context,a=e.config,r=e.classChartBar.bind(e),s=e.classBars.bind(e),o=e.classChartLine.bind(e),g=e.classLines.bind(e),d=e.classAreas.bind(e);a.subchart_show&&(n.select("."+Y.chartBars).selectAll("."+Y.chartBar).data(i).attr("class",r).enter().append("g").style("opacity",0).attr("class",r).append("g").attr("class",s),(t=n.select("."+Y.chartLines).selectAll("."+Y.chartLine).data(i).attr("class",o).enter().append("g").style("opacity",0).attr("class",o)).append("g").attr("class",g),t.append("g").attr("class",d),n.selectAll("."+Y.brush+" rect").attr(a.axis_rotated?"width":"height",a.axis_rotated?e.width2:e.height2))},p.updateBarForSubchart=function(a){var t=this;t.contextBar=t.context.selectAll("."+Y.bars).selectAll("."+Y.bar).data(t.barData.bind(t)),t.contextBar.enter().append("path").attr("class",t.classBar.bind(t)).style("stroke","none").style("fill",t.color),t.contextBar.style("opacity",t.initialOpacity.bind(t)),t.contextBar.exit().transition().duration(a).style("opacity",0).remove()},p.redrawBarForSubchart=function(a,t,e){(t?this.contextBar.transition(Math.random().toString()).duration(e):this.contextBar).attr("d",a).style("opacity",1)},p.updateLineForSubchart=function(a){var t=this;t.contextLine=t.context.selectAll("."+Y.lines).selectAll("."+Y.line).data(t.lineData.bind(t)),t.contextLine.enter().append("path").attr("class",t.classLine.bind(t)).style("stroke",t.color),t.contextLine.style("opacity",t.initialOpacity.bind(t)),t.contextLine.exit().transition().duration(a).style("opacity",0).remove()},p.redrawLineForSubchart=function(a,t,e){(t?this.contextLine.transition(Math.random().toString()).duration(e):this.contextLine).attr("d",a).style("opacity",1)},p.updateAreaForSubchart=function(a){var t=this,e=t.d3;t.contextArea=t.context.selectAll("."+Y.areas).selectAll("."+Y.area).data(t.lineData.bind(t)),t.contextArea.enter().append("path").attr("class",t.classArea.bind(t)).style("fill",t.color).style("opacity",function(){return t.orgAreaOpacity=+e.select(this).style("opacity"),0}),t.contextArea.style("opacity",0),t.contextArea.exit().transition().duration(a).style("opacity",0).remove()},p.redrawAreaForSubchart=function(a,t,e){(t?this.contextArea.transition(Math.random().toString()).duration(e):this.contextArea).attr("d",a).style("fill",this.color).style("opacity",this.orgAreaOpacity)},p.redrawSubchart=function(g,t,e,i,n,a,r){var s,o,c,d=this,l=d.d3,p=d.config;d.context.style("visibility",p.subchart_show?"visible":"hidden"),p.subchart_show&&(l.event&&"zoom"===l.event.type&&d.brush.extent(d.x.orgDomain()).update(),g&&(d.brush.empty()||d.brush.extent(d.x.orgDomain()).update(),s=d.generateDrawArea(n,!0),o=d.generateDrawBar(a,!0),c=d.generateDrawLine(r,!0),d.updateBarForSubchart(e),d.updateLineForSubchart(e),d.updateAreaForSubchart(e),d.redrawBarForSubchart(o,e,e),d.redrawLineForSubchart(c,e,e),d.redrawAreaForSubchart(s,e,e)))},p.redrawForBrush=function(){var a=this,t=a.x;a.redraw({withTransition:!1,withY:a.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1}),a.config.subchart_onbrush.call(a.api,t.orgDomain())},p.transformContext=function(a,t){var e;t&&t.axisSubX?e=t.axisSubX:(e=this.context.select("."+Y.axisX),a&&(e=e.transition())),this.context.attr("transform",this.getTranslate("context")),e.attr("transform",this.getTranslate("subx"))},p.getDefaultExtent=function(){var a=this,t=a.config,e=N(t.axis_x_extent)?t.axis_x_extent(a.getXDomain(a.data.targets)):t.axis_x_extent;return a.isTimeSeries()&&(e=[a.parseDate(e[0]),a.parseDate(e[1])]),e},p.initText=function(){this.main.select("."+Y.chart).append("g").attr("class",Y.chartTexts),this.mainText=this.d3.selectAll([])},p.updateTargetsForText=function(i){var t=this,e=t.classChartText.bind(t),n=t.classTexts.bind(t),a=t.classFocus.bind(t);t.main.select("."+Y.chartTexts).selectAll("."+Y.chartText).data(i).attr("class",function(i){return e(i)+a(i)}).enter().append("g").attr("class",e).style("opacity",0).style("pointer-events","none").append("g").attr("class",n)},p.updateText=function(i){var s=this,e=s.config,t=s.barOrLineData.bind(s),a=s.classText.bind(s);s.mainText=s.main.selectAll("."+Y.texts).selectAll("."+Y.text).data(t),s.mainText.enter().append("text").attr("class",a).attr("text-anchor",function(a){return e.axis_rotated?0>a.value?"end":"start":"middle"}).style("stroke","none").style("fill",function(e){return s.color(e)}).style("fill-opacity",0),s.mainText.text(function(e,t,a){return s.dataLabelFormat(e.id)(e.value,e.id,t,a)}),s.mainText.exit().transition().duration(i).style("fill-opacity",0).remove()},p.redrawText=function(a,t,e,i){return[(i?this.mainText.transition():this.mainText).attr("x",a).attr("y",t).style("fill",this.color).style("fill-opacity",e?0:this.opacityForText.bind(this))]},p.getTextRect=function(o,t,e){var i,n=this.d3.select("body").append("div").classed("c3",!0),a=n.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),r=this.d3.select(e).style("font");return a.selectAll(".dummy").data([o]).enter().append("text").classed(t||"",!0).style("font",r).text(o).each(function(){i=this.getBoundingClientRect()}),n.remove(),i},p.generateXYForText=function(d,t,e,i){var n=this,a=n.generateGetAreaPoints(d,!1),r=n.generateGetBarPoints(t,!1),s=n.generateGetLinePoints(e,!1),o=i?n.getXForText:n.getYForText;return function(d,t){var e=n.isAreaType(d)?a:n.isBarType(d)?r:s;return o.call(n,e(d,t),d,this)}},p.getXForText=function(o,t,e){var i,n,a=this,r=e.getBoundingClientRect();return a.config.axis_rotated?(n=a.isBarType(t)?4:6,i=o[2][1]+n*(0>t.value?-1:1)):i=a.hasType("bar")?(o[2][0]+o[0][0])/2:o[0][0],null===t.value&&(i>a.width?i=a.width-r.width:0>i&&(i=4)),i},p.getYForText=function(s,t,e){var i,n=this,a=e.getBoundingClientRect();return n.config.axis_rotated?i=(s[0][0]+s[2][0]+.6*a.height)/2:(i=s[2][1],0>t.value||0===t.value&&!n.hasPositiveValue?(i+=a.height,n.isBarType(t)&&n.isSafari()?i-=3:!n.isBarType(t)&&n.isChrome()&&(i+=3)):i+=n.isBarType(t)?-3:-6),null!==t.value||n.config.axis_rotated||(i<a.height?i=a.height:i>this.height&&(i=this.height-4)),i},p.initTitle=function(){this.title=this.svg.append("text").text(this.config.title_text).attr("class",this.CLASS.title)},p.redrawTitle=function(){var e=this;e.title.attr("x",e.xForTitle.bind(e)).attr("y",e.yForTitle.bind(e))},p.xForTitle=function(){var a=this,t=a.config,e=t.title_position||"left";return 0<=e.indexOf("right")?a.currentWidth-a.getTextRect(a.title.node().textContent,a.CLASS.title,a.title.node()).width-t.title_padding.right:0<=e.indexOf("center")?(a.currentWidth-a.getTextRect(a.title.node().textContent,a.CLASS.title,a.title.node()).width)/2:t.title_padding.left},p.yForTitle=function(){var e=this;return e.config.title_padding.top+e.getTextRect(e.title.node().textContent,e.CLASS.title,e.title.node()).height},p.getTitlePadding=function(){return this.yForTitle()+this.config.title_padding.bottom},p.initTooltip=function(){var a,i=this,e=i.config;if(i.tooltip=i.selectChart.style("position","relative").append("div").attr("class",Y.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none"),e.tooltip_init_show){if(i.isTimeSeries()&&o(e.tooltip_init_x)){for(e.tooltip_init_x=i.parseDate(e.tooltip_init_x),a=0;a<i.data.targets[0].values.length&&0!=i.data.targets[0].values[a].x-e.tooltip_init_x;a++);e.tooltip_init_x=a}i.tooltip.html(e.tooltip_contents.call(i,i.data.targets.map(function(a){return i.addName(a.values[e.tooltip_init_x])}),i.axis.getXAxisTickFormat(),i.getYFormat(i.hasArcType()),i.color)),i.tooltip.style("top",e.tooltip_init_position.top).style("left",e.tooltip_init_position.left).style("display","block")}},p.getTooltipSortFunction=function(){var d=this,t=d.config;if(0!==t.data_groups.length&&void 0===t.tooltip_order){var l=d.orderTargets(d.data.targets).map(function(e){return e.id});return(d.isOrderAsc()||d.isOrderDesc())&&(l=l.reverse()),function(a,t){return l.indexOf(a.id)-l.indexOf(t.id)}}var i=t.tooltip_order;void 0===i&&(i=t.data_order);var n=function(e){return e?e.value:null};if(o(i)&&"asc"===i.toLowerCase())return function(a,t){return n(a)-n(t)};if(o(i)&&"desc"===i.toLowerCase())return function(a,t){return n(t)-n(a)};if(N(i)){var e=i;return void 0===t.tooltip_order&&(e=function(a,t){return i(a?{id:a.id,values:[a]}:null,t?{id:t.id,values:[t]}:null)}),e}return s(i)?function(a,t){return i.indexOf(a.id)-i.indexOf(t.id)}:void 0},p.getTooltipContent=function(x,t,e,i){var n,a,r,s,o,c,d=this,l=d.config,u=l.tooltip_format_title||t,h=l.tooltip_format_name||function(e){return e},g=l.tooltip_format_value||e,m=this.getTooltipSortFunction();for(m&&x.sort(m),a=0;a<x.length;a++)if(x[a]&&(x[a].value||0===x[a].value)&&(n||(r=_(u?u(x[a].x):x[a].x),n="<table class='"+d.CLASS.tooltip+"'>"+(r||0===r?"<tr><th colspan='2'>"+r+"</th></tr>":"")),void 0!==(s=_(g(x[a].value,x[a].ratio,x[a].id,x[a].index,x))))){if(null===x[a].name)continue;o=_(h(x[a].name,x[a].ratio,x[a].id,x[a].index)),c=d.levelColor?d.levelColor(x[a].value):i(x[a].id),n+="<tr class='"+d.CLASS.tooltipName+"-"+d.getTargetSelectorSuffix(x[a].id)+"'>",n+="<td class='name'><span style='background-color:"+c+"'></span>"+o+"</td>",n+="<td class='value'>"+s+"</td>",n+="</tr>"}return n+"</table>"},p.tooltipPosition=function(p,t,e,i){var n,a,_,s,x,c=this,d=c.config,l=c.d3,u=c.hasArcType(),h=l.mouse(i);return u?(a=(c.width-(c.isLegendRight?c.getLegendWidth():0))/2+h[0],s=(c.hasType("gauge")?c.height:c.height/2)+h[1]+20):(n=c.getSvgLeft(!0),d.axis_rotated?(_=(a=n+h[0]+100)+t,x=c.currentWidth-c.getCurrentPaddingRight(),s=c.x(p[0].x)+20):(_=(a=n+c.getCurrentPaddingLeft(!0)+c.x(p[0].x)+20)+t,x=n+c.currentWidth-c.getCurrentPaddingRight(),s=h[1]+15),_>x&&(a-=_-x+20),s+e>c.currentHeight&&(s-=e+30)),0>s&&(s=0),{top:s,left:a}},p.showTooltip=function(s,t){var e,i,n,a=this,r=a.config,o=a.hasArcType(),g=s.filter(function(e){return e&&M(e.value)}),d=r.tooltip_position||p.tooltipPosition;0!==g.length&&r.tooltip_show&&(a.tooltip.html(r.tooltip_contents.call(a,s,a.axis.getXAxisTickFormat(),a.getYFormat(o),a.color)).style("display","block"),e=a.tooltip.property("offsetWidth"),i=a.tooltip.property("offsetHeight"),n=d.call(this,g,e,i,t),a.tooltip.style("top",n.top+"px").style("left",n.left+"px"))},p.hideTooltip=function(){this.tooltip.style("display","none")},p.setTargetType=function(a,r){var e=this,i=e.config;e.mapToTargetIds(a).forEach(function(a){e.withoutFadeIn[a]=r===i.data_types[a],i.data_types[a]=r}),a||(i.data_type=r)},p.hasType=function(r,t){var s=this.config.data_types,i=!1;return(t=t||this.data.targets)&&t.length?t.forEach(function(t){var e=s[t.id];(e&&0<=e.indexOf(r)||!e&&"line"===r)&&(i=!0)}):Object.keys(s).length?Object.keys(s).forEach(function(t){s[t]===r&&(i=!0)}):i=this.config.data_type===r,i},p.hasArcType=function(e){return this.hasType("pie",e)||this.hasType("donut",e)||this.hasType("gauge",e)},p.isLineType=function(a){var t=this.config,e=o(a)?a:a.id;return!t.data_types[e]||0<=["line","spline","area","area-spline","step","area-step"].indexOf(t.data_types[e])},p.isStepType=function(a){var t=o(a)?a:a.id;return 0<=["step","area-step"].indexOf(this.config.data_types[t])},p.isSplineType=function(a){var t=o(a)?a:a.id;return 0<=["spline","area-spline"].indexOf(this.config.data_types[t])},p.isAreaType=function(a){var t=o(a)?a:a.id;return 0<=["area","area-spline","area-step"].indexOf(this.config.data_types[t])},p.isBarType=function(a){var t=o(a)?a:a.id;return"bar"===this.config.data_types[t]},p.isScatterType=function(a){var t=o(a)?a:a.id;return"scatter"===this.config.data_types[t]},p.isPieType=function(a){var t=o(a)?a:a.id;return"pie"===this.config.data_types[t]},p.isGaugeType=function(a){var t=o(a)?a:a.id;return"gauge"===this.config.data_types[t]},p.isDonutType=function(a){var t=o(a)?a:a.id;return"donut"===this.config.data_types[t]},p.isArcType=function(e){return this.isPieType(e)||this.isDonutType(e)||this.isGaugeType(e)},p.lineData=function(e){return this.isLineType(e)?[e]:[]},p.arcData=function(e){return this.isArcType(e.data)?[e]:[]},p.barData=function(e){return this.isBarType(e)?e.values:[]},p.lineOrScatterData=function(e){return this.isLineType(e)||this.isScatterType(e)?e.values:[]},p.barOrLineData=function(e){return this.isBarType(e)||this.isLineType(e)?e.values:[]},p.isInterpolationType=function(e){return 0<=["linear","linear-closed","basis","basis-open","basis-closed","bundle","cardinal","cardinal-open","cardinal-closed","monotone"].indexOf(e)},p.isSafari=function(){var e=window.navigator.userAgent;return 0<=e.indexOf("Safari")&&0>e.indexOf("Chrome")},p.isChrome=function(){return 0<=window.navigator.userAgent.indexOf("Chrome")},p.initZoom=function(){var r,s=this,e=s.d3,i=s.config;s.zoom=e.behavior.zoom().on("zoomstart",function(){r=e.event.sourceEvent,s.zoom.altDomain=e.event.sourceEvent.altKey?s.x.orgDomain():null,i.zoom_onzoomstart.call(s.api,e.event.sourceEvent)}).on("zoom",function(){s.redrawForZoom.call(s)}).on("zoomend",function(){var t=e.event.sourceEvent;t&&r.clientX===t.clientX&&r.clientY===t.clientY||(s.redrawEventRect(),s.updateZoom(),i.zoom_onzoomend.call(s.api,s.x.orgDomain()))}),s.zoom.scale=function(e){return i.axis_rotated?this.y(e):this.x(e)},s.zoom.orgScaleExtent=function(){var e=i.zoom_extent?i.zoom_extent:[1,10];return[e[0],F(s.getMaxDataCount()/e[1],e[1])]},s.zoom.updateScaleExtent=function(){var e=Q(s.x.orgDomain())/Q(s.getZoomDomain()),t=this.orgScaleExtent();return this.scaleExtent([t[0]*e,t[1]*e]),this}},p.getZoomDomain=function(){var a=this.config,t=this.d3;return[t.min([this.orgXDomain[0],a.zoom_x_min]),t.max([this.orgXDomain[1],a.zoom_x_max])]},p.updateZoom=function(){var e=this.config.zoom_enabled?this.zoom:function(){};this.main.select("."+Y.zoomRect).call(e).on("dblclick.zoom",null),this.main.selectAll("."+Y.eventRect).call(e).on("dblclick.zoom",null)},p.redrawForZoom=function(){var r=this,t=r.d3,e=r.config,i=r.zoom,n=r.x;if(e.zoom_enabled&&0!==r.filterTargetsToShow(r.data.targets).length){if("mousemove"===t.event.sourceEvent.type&&i.altDomain)return n.domain(i.altDomain),void i.scale(n).updateScaleExtent();r.isCategorized()&&n.orgDomain()[0]===r.orgXDomain[0]&&n.domain([r.orgXDomain[0]-1e-10,n.orgDomain()[1]]),r.redraw({withTransition:!1,withY:e.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),"mousemove"===t.event.sourceEvent.type&&(r.cancelClick=!0),e.zoom_onzoom.call(r.api,n.orgDomain())}},c});