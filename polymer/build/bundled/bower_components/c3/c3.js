(function(e,t){'object'===typeof exports&&'undefined'!==typeof module?module.exports=t():'function'===typeof define&&define.amd?define(t):e.c3=t()})(this,function(){'use strict';function e(e,t){var a=this;a.component=e,a.params=t||{},a.d3=e.d3,a.scale=a.d3.scale.linear(),a.range,a.orient='bottom',a.innerTickSize=6,a.outerTickSize=this.params.withOuterTick?6:0,a.tickPadding=3,a.tickValues=null,a.tickFormat,a.tickArguments,a.tickOffset=0,a.tickCulling=!0,a.tickCentered,a.tickTextCharSize,a.tickTextRotate=a.params.tickTextRotate,a.tickLength,a.axis=a.generateAxis()}function t(e){var t=this.internal=new a(this);t.loadConfig(e),t.beforeInit(e),t.init(),t.afterInit(e),function e(t,a,i){Object.keys(t).forEach(function(r){a[r]=t[r].bind(i),0<Object.keys(t[r]).length&&e(t[r],a[r],i)})}(D,this,this)}function a(e){var t=this;t.d3=window.d3?window.d3:'undefined'===typeof require?void 0:require('d3'),t.api=e,t.config=t.getDefaultConfig(),t.data={},t.cache={},t.axes={}}var i=Math.abs,r=Math.cos,n=Math.sqrt,o=Math.pow,s=Math.sin,l=Math.PI,g=Math.max,d=Math.min,c=Math.ceil,p={target:'c3-target',chart:'c3-chart',chartLine:'c3-chart-line',chartLines:'c3-chart-lines',chartBar:'c3-chart-bar',chartBars:'c3-chart-bars',chartText:'c3-chart-text',chartTexts:'c3-chart-texts',chartArc:'c3-chart-arc',chartArcs:'c3-chart-arcs',chartArcsTitle:'c3-chart-arcs-title',chartArcsBackground:'c3-chart-arcs-background',chartArcsGaugeUnit:'c3-chart-arcs-gauge-unit',chartArcsGaugeMax:'c3-chart-arcs-gauge-max',chartArcsGaugeMin:'c3-chart-arcs-gauge-min',selectedCircle:'c3-selected-circle',selectedCircles:'c3-selected-circles',eventRect:'c3-event-rect',eventRects:'c3-event-rects',eventRectsSingle:'c3-event-rects-single',eventRectsMultiple:'c3-event-rects-multiple',zoomRect:'c3-zoom-rect',brush:'c3-brush',focused:'c3-focused',defocused:'c3-defocused',region:'c3-region',regions:'c3-regions',title:'c3-title',tooltipContainer:'c3-tooltip-container',tooltip:'c3-tooltip',tooltipName:'c3-tooltip-name',shape:'c3-shape',shapes:'c3-shapes',line:'c3-line',lines:'c3-lines',bar:'c3-bar',bars:'c3-bars',circle:'c3-circle',circles:'c3-circles',arc:'c3-arc',arcLabelLine:'c3-arc-label-line',arcs:'c3-arcs',area:'c3-area',areas:'c3-areas',empty:'c3-empty',text:'c3-text',texts:'c3-texts',gaugeValue:'c3-gauge-value',grid:'c3-grid',gridLines:'c3-grid-lines',xgrid:'c3-xgrid',xgrids:'c3-xgrids',xgridLine:'c3-xgrid-line',xgridLines:'c3-xgrid-lines',xgridFocus:'c3-xgrid-focus',ygrid:'c3-ygrid',ygrids:'c3-ygrids',ygridLine:'c3-ygrid-line',ygridLines:'c3-ygrid-lines',axis:'c3-axis',axisX:'c3-axis-x',axisXLabel:'c3-axis-x-label',axisY:'c3-axis-y',axisYLabel:'c3-axis-y-label',axisY2:'c3-axis-y2',axisY2Label:'c3-axis-y2-label',legendBackground:'c3-legend-background',legendItem:'c3-legend-item',legendItemEvent:'c3-legend-item-event',legendItemTile:'c3-legend-item-tile',legendItemHidden:'c3-legend-item-hidden',legendItemFocused:'c3-legend-item-focused',dragarea:'c3-dragarea',EXPANDED:'_expanded_',SELECTED:'_selected_',INCLUDED:'_included_'},_='function'===typeof Symbol&&'symbol'===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&'function'===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?'symbol':typeof e},h=function(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')},x=function(e,t){if('function'!==typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},u=function(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'===typeof t||'function'===typeof t)?t:e},y=function(e){return e||0===e},m=function(e){return'function'===typeof e},S=function(e){return Array.isArray(e)},f=function(e){return'string'===typeof e},T=function(e){return'undefined'===typeof e},A=function(e){return'undefined'!==typeof e},b=function(e){return 10*c(e/10)},P=function(e){return c(e)+0.5},v=function(e){return e[1]-e[0]},L=function(e){return'undefined'===typeof e||null===e||f(e)&&0===e.length||'object'===('undefined'===typeof e?'undefined':_(e))&&0===Object.keys(e).length},C=function(e){return!F.isEmpty(e)},V=function(e,t,a){return A(e[t])?e[t]:a},G=function(e,t){var a=!1;return Object.keys(e).forEach(function(i){e[i]===t&&(a=!0)}),a},w=function(e){return'string'===typeof e?e.replace(/</g,'&lt;').replace(/>/g,'&gt;'):e},E=function(e){var t=e.getBoundingClientRect(),a=[e.pathSegList.getItem(0),e.pathSegList.getItem(1)],i=a[0].x,r=d(a[0].y,a[1].y);return{x:i,y:r,width:t.width,height:t.height}},I,R;R=e.prototype,R.axisX=function(e,t,a){e.attr('transform',function(e){return'translate('+c(t(e)+a)+', 0)'})},R.axisY=function(e,t){e.attr('transform',function(e){return'translate(0,'+c(t(e))+')'})},R.scaleExtent=function(e){var t=e[0],a=e[e.length-1];return t<a?[t,a]:[a,t]},R.generateTicks=function(e){var t=this,a=[],r,i;if(e.ticks)return e.ticks.apply(e,t.tickArguments);for(i=e.domain(),r=c(i[0]);r<i[1];r++)a.push(r);return 0<a.length&&0<a[0]&&a.unshift(a[0]-(a[1]-a[0])),a},R.copyScale=function(){var e=this,t=e.scale.copy(),a;return e.params.isCategory&&(a=e.scale.domain(),t.domain([a[0],a[1]-1])),t},R.textFormatted=function(e){var t=this,a=t.tickFormat?t.tickFormat(e):e;return'undefined'===typeof a?'':a},R.updateRange=function(){var e=this;return e.range=e.scale.rangeExtent?e.scale.rangeExtent():e.scaleExtent(e.scale.range()),e.range},R.updateTickTextCharSize=function(e){var t=this;if(t.tickTextCharSize)return t.tickTextCharSize;var a={h:11.5,w:5.5};return e.select('text').text(function(e){return t.textFormatted(e)}).each(function(e){var i=this.getBoundingClientRect(),r=t.textFormatted(e),n=i.height,s=r?i.width/r.length:void 0;n&&s&&(a.h=n,a.w=s)}).text(''),t.tickTextCharSize=a,a},R.transitionise=function(e){return this.params.withoutTransition?e:this.d3.transition(e)},R.isVertical=function(){return'left'===this.orient||'right'===this.orient},R.tspanData=function(e,t,a,r){var n=this,o=n.params.tickMultiline?n.splitTickText(e,a,r):[].concat(n.textFormatted(e));return o.map(function(e){return{index:t,splitted:e,length:o.length}})},R.splitTickText=function(e,t,a){function r(e,t){d=void 0;for(var a=1;a<t.length;a++)if(' '===t.charAt(a)&&(d=a),o=t.substr(0,a+1),l=n.tickTextCharSize.w*o.length,s<l)return r(e.concat(t.substr(0,d?d:a)),t.slice(d?d+1:a));return e.concat(t)}var n=this,i=n.textFormatted(e),s=n.params.tickWidth,o,d,l;return'[object Array]'===Object.prototype.toString.call(i)?i:((!s||0>=s)&&(s=n.isVertical()?95:n.params.isCategory?c(a(t[1])-a(t[0]))-12:110),r([],i+''))},R.updateTickLength=function(){var e=this;e.tickLength=g(e.innerTickSize,0)+e.tickPadding},R.lineY2=function(e){var t=this,a=t.scale(e)+(t.tickCentered?0:t.tickOffset);return t.range[0]<a&&a<t.range[1]?t.innerTickSize:0},R.textY=function(){var e=this,t=e.tickTextRotate;return t?11.5-2.5*(t/15)*(0<t?1:-1):e.tickLength},R.textTransform=function(){var e=this,t=e.tickTextRotate;return t?'rotate('+t+')':''},R.textTextAnchor=function(){var e=this,t=e.tickTextRotate;return t?0<t?'start':'end':'middle'},R.tspanDx=function(){var e=this,t=e.tickTextRotate;return t?8*s(l*(t/180)):0},R.tspanDy=function(e,t){var a=this,i=a.tickTextCharSize.h;return 0===t&&(a.isVertical()?i=-((e.length-1)*(a.tickTextCharSize.h/2)-3):i='.71em'),i},R.generateAxis=function(){function e(i){i.each(function(){var i=e.g=a.select(this),n=this.__chart__||t.scale,s=this.__chart__=t.copyScale(),o=t.tickValues?t.tickValues:t.generateTicks(s),d=i.selectAll('.tick').data(o,s),l=d.enter().insert('g','.domain').attr('class','tick').style('opacity',1e-6),g=d.exit().remove(),p=t.transitionise(d).style('opacity',1),_,h,u;r.isCategory?(t.tickOffset=c((s(1)-s(0))/2),h=t.tickCentered?0:t.tickOffset,u=t.tickCentered?t.tickOffset:0):t.tickOffset=h=0,l.append('line'),l.append('text'),t.updateRange(),t.updateTickLength(),t.updateTickTextCharSize(i.select('.tick'));var y=p.select('line'),m=p.select('text'),S=d.select('text').selectAll('tspan').data(function(e,a){return t.tspanData(e,a,o,s)});S.enter().append('tspan'),S.exit().remove(),S.text(function(e){return e.splitted});var f=i.selectAll('.domain').data([0]),T=(f.enter().append('path').attr('class','domain'),t.transitionise(f));switch(t.orient){case'bottom':{_=t.axisX,y.attr('x1',h).attr('x2',h).attr('y2',function(e,a){return t.lineY2(e,a)}),m.attr('x',0).attr('y',function(e,a){return t.textY(e,a)}).attr('transform',function(e,a){return t.textTransform(e,a)}).style('text-anchor',function(e,a){return t.textTextAnchor(e,a)}),S.attr('x',0).attr('dy',function(e,a){return t.tspanDy(e,a)}).attr('dx',function(e,a){return t.tspanDx(e,a)}),T.attr('d','M'+t.range[0]+','+t.outerTickSize+'V0H'+t.range[1]+'V'+t.outerTickSize);break}case'top':{_=t.axisX,y.attr('x1',h).attr('x2',h).attr('y2',function(e,a){return-1*t.lineY2(e,a)}),m.attr('x',0).attr('y',function(e,a){return-1*t.textY(e,a)-(r.isCategory?2:t.tickLength-2)}).attr('transform',function(e,a){return t.textTransform(e,a)}).style('text-anchor',function(e,a){return t.textTextAnchor(e,a)}),S.attr('x',0).attr('dy',function(e,a){return t.tspanDy(e,a)}).attr('dx',function(e,a){return t.tspanDx(e,a)}),T.attr('d','M'+t.range[0]+','+-t.outerTickSize+'V0H'+t.range[1]+'V'+-t.outerTickSize);break}case'left':{_=t.axisY,y.attr('x2',-t.innerTickSize).attr('y1',u).attr('y2',u),m.attr('x',-t.tickLength).attr('y',t.tickOffset).style('text-anchor','end'),S.attr('x',-t.tickLength).attr('dy',function(e,a){return t.tspanDy(e,a)}),T.attr('d','M'+-t.outerTickSize+','+t.range[0]+'H0V'+t.range[1]+'H'+-t.outerTickSize);break}case'right':{_=t.axisY,y.attr('x2',t.innerTickSize).attr('y1',u).attr('y2',u),m.attr('x',t.tickLength).attr('y',t.tickOffset).style('text-anchor','start'),S.attr('x',t.tickLength).attr('dy',function(e,a){return t.tspanDy(e,a)}),T.attr('d','M'+t.outerTickSize+','+t.range[0]+'H0V'+t.range[1]+'H'+t.outerTickSize);break}}if(s.rangeBand){var A=s,x=A.rangeBand()/2;n=s=function(e){return A(e)+x}}else n.rangeBand?n=s:g.call(_,s,t.tickOffset);l.call(_,n,t.tickOffset),p.call(_,s,t.tickOffset)})}var t=this,a=t.d3,r=t.params;return e.scale=function(a){return arguments.length?(t.scale=a,e):t.scale},e.orient=function(a){return arguments.length?(t.orient=a in{top:1,right:1,bottom:1,left:1}?a+'':'bottom',e):t.orient},e.tickFormat=function(a){return arguments.length?(t.tickFormat=a,e):t.tickFormat},e.tickCentered=function(a){return arguments.length?(t.tickCentered=a,e):t.tickCentered},e.tickOffset=function(){return t.tickOffset},e.tickInterval=function(){var a,i;return r.isCategory?a=2*t.tickOffset:(i=e.g.select('path.domain').node().getTotalLength()-2*t.outerTickSize,a=i/e.g.selectAll('line').size()),a===Infinity?0:a},e.ticks=function(){return arguments.length?(t.tickArguments=arguments,e):t.tickArguments},e.tickCulling=function(a){return arguments.length?(t.tickCulling=a,e):t.tickCulling},e.tickValues=function(a){if('function'===typeof a)t.tickValues=function(){return a(t.scale.domain())};else{if(!arguments.length)return t.tickValues;t.tickValues=a}return e},e};var k=function(t){function a(t){h(this,a);var i={fn:I,internal:{fn:R}},r=u(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t,'axis',i));return r.d3=t.d3,r.internal=e,r}return x(a,t),a}(function(e,t,a){this.owner=e,O.chart.internal[t]=a});I=k.prototype,I.init=function(){var e=this.owner,t=e.config,a=e.main;e.axes.x=a.append('g').attr('class',p.axis+' '+p.axisX).attr('clip-path',t.axis_x_inner?'':e.clipPathForXAxis).attr('transform',e.getTranslate('x')).style('visibility',t.axis_x_show?'visible':'hidden'),e.axes.x.append('text').attr('class',p.axisXLabel).attr('transform',t.axis_rotated?'rotate(-90)':'').style('text-anchor',this.textAnchorForXAxisLabel.bind(this)),e.axes.y=a.append('g').attr('class',p.axis+' '+p.axisY).attr('clip-path',t.axis_y_inner?'':e.clipPathForYAxis).attr('transform',e.getTranslate('y')).style('visibility',t.axis_y_show?'visible':'hidden'),e.axes.y.append('text').attr('class',p.axisYLabel).attr('transform',t.axis_rotated?'':'rotate(-90)').style('text-anchor',this.textAnchorForYAxisLabel.bind(this)),e.axes.y2=a.append('g').attr('class',p.axis+' '+p.axisY2).attr('transform',e.getTranslate('y2')).style('visibility',t.axis_y2_show?'visible':'hidden'),e.axes.y2.append('text').attr('class',p.axisY2Label).attr('transform',t.axis_rotated?'':'rotate(-90)').style('text-anchor',this.textAnchorForY2AxisLabel.bind(this))},I.getXAxis=function(e,t,a,i,r,n,s){var o=this.owner,d=o.config,l={isCategory:o.isCategorized(),withOuterTick:r,tickMultiline:d.axis_x_tick_multiline,tickWidth:d.axis_x_tick_width,tickTextRotate:s?0:d.axis_x_tick_rotate,withoutTransition:n},g=new this.internal(this,l).axis.scale(e).orient(t);return o.isTimeSeries()&&i&&'function'!==typeof i&&(i=i.map(function(e){return o.parseDate(e)})),g.tickFormat(a).tickValues(i),o.isCategorized()&&(g.tickCentered(d.axis_x_tick_centered),L(d.axis_x_tick_culling)&&(d.axis_x_tick_culling=!1)),g},I.updateXAxisTickValues=function(e,t){var a=this.owner,i=a.config,r;return(i.axis_x_tick_fit||i.axis_x_tick_count)&&(r=this.generateTickValues(a.mapTargetsToUniqueXs(e),i.axis_x_tick_count,a.isTimeSeries())),t?t.tickValues(r):(a.xAxis.tickValues(r),a.subXAxis.tickValues(r)),r},I.getYAxis=function(e,t,a,i,r,n,s){var o=this.owner,d=o.config,l={withOuterTick:r,withoutTransition:n,tickTextRotate:s?0:d.axis_y_tick_rotate},g=new this.internal(this,l).axis.scale(e).orient(t).tickFormat(a);return o.isTimeSeriesY()?g.ticks(o.d3.time[d.axis_y_tick_time_value],d.axis_y_tick_time_interval):g.tickValues(i),g},I.getId=function(e){var t=this.owner.config;return e in t.data_axes?t.data_axes[e]:'y'},I.getXAxisTickFormat=function(){var e=this.owner,t=e.config,a=e.isTimeSeries()?e.defaultAxisTimeFormat:e.isCategorized()?e.categoryName:function(e){return 0>e?e.toFixed(0):e};return t.axis_x_tick_format&&(m(t.axis_x_tick_format)?a=t.axis_x_tick_format:e.isTimeSeries()&&(a=function(a){return a?e.axisTimeFormat(t.axis_x_tick_format)(a):''})),m(a)?function(t){return a.call(e,t)}:a},I.getTickValues=function(e,t){return e?e:t?t.tickValues():void 0},I.getXAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_x_tick_values,this.owner.xAxis)},I.getYAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)},I.getY2AxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)},I.getLabelOptionByAxisId=function(e){var t=this.owner,a=t.config,i;return'y'===e?i=a.axis_y_label:'y2'===e?i=a.axis_y2_label:'x'===e&&(i=a.axis_x_label),i},I.getLabelText=function(e){var t=this.getLabelOptionByAxisId(e);return f(t)?t:t?t.text:null},I.setLabelText=function(e,t){var a=this.owner,i=a.config,r=this.getLabelOptionByAxisId(e);f(r)?'y'===e?i.axis_y_label=t:'y2'===e?i.axis_y2_label=t:'x'===e&&(i.axis_x_label=t):r&&(r.text=t)},I.getLabelPosition=function(e,t){var a=this.getLabelOptionByAxisId(e),i=a&&'object'===('undefined'===typeof a?'undefined':_(a))&&a.position?a.position:t;return{isInner:0<=i.indexOf('inner'),isOuter:0<=i.indexOf('outer'),isLeft:0<=i.indexOf('left'),isCenter:0<=i.indexOf('center'),isRight:0<=i.indexOf('right'),isTop:0<=i.indexOf('top'),isMiddle:0<=i.indexOf('middle'),isBottom:0<=i.indexOf('bottom')}},I.getXAxisLabelPosition=function(){return this.getLabelPosition('x',this.owner.config.axis_rotated?'inner-top':'inner-right')},I.getYAxisLabelPosition=function(){return this.getLabelPosition('y',this.owner.config.axis_rotated?'inner-right':'inner-top')},I.getY2AxisLabelPosition=function(){return this.getLabelPosition('y2',this.owner.config.axis_rotated?'inner-right':'inner-top')},I.getLabelPositionById=function(e){return'y2'===e?this.getY2AxisLabelPosition():'y'===e?this.getYAxisLabelPosition():this.getXAxisLabelPosition()},I.textForXAxisLabel=function(){return this.getLabelText('x')},I.textForYAxisLabel=function(){return this.getLabelText('y')},I.textForY2AxisLabel=function(){return this.getLabelText('y2')},I.xForAxisLabel=function(e,t){var a=this.owner;return e?t.isLeft?0:t.isCenter?a.width/2:a.width:t.isBottom?-a.height:t.isMiddle?-a.height/2:0},I.dxForAxisLabel=function(e,t){return e?t.isLeft?'0.5em':t.isRight?'-0.5em':'0':t.isTop?'-0.5em':t.isBottom?'0.5em':'0'},I.textAnchorForAxisLabel=function(e,t){return e?t.isLeft?'start':t.isCenter?'middle':'end':t.isBottom?'start':t.isMiddle?'middle':'end'},I.xForXAxisLabel=function(){return this.xForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},I.xForYAxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},I.xForY2AxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},I.dxForXAxisLabel=function(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},I.dxForYAxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},I.dxForY2AxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},I.dyForXAxisLabel=function(){var e=this.owner,t=e.config,a=this.getXAxisLabelPosition();return t.axis_rotated?a.isInner?'1.2em':-25-(e.config.axis_x_inner?0:this.getMaxTickWidth('x')):a.isInner?'-0.5em':t.axis_x_height?t.axis_x_height-10:'3em'},I.dyForYAxisLabel=function(){var e=this.owner,t=this.getYAxisLabelPosition();return e.config.axis_rotated?t.isInner?'-0.5em':'3em':t.isInner?'1.2em':-10-(e.config.axis_y_inner?0:this.getMaxTickWidth('y')+10)},I.dyForY2AxisLabel=function(){var e=this.owner,t=this.getY2AxisLabelPosition();return e.config.axis_rotated?t.isInner?'1.2em':'-2.2em':t.isInner?'-0.5em':15+(e.config.axis_y2_inner?0:this.getMaxTickWidth('y2')+15)},I.textAnchorForXAxisLabel=function(){var e=this.owner;return this.textAnchorForAxisLabel(!e.config.axis_rotated,this.getXAxisLabelPosition())},I.textAnchorForYAxisLabel=function(){var e=this.owner;return this.textAnchorForAxisLabel(e.config.axis_rotated,this.getYAxisLabelPosition())},I.textAnchorForY2AxisLabel=function(){var e=this.owner;return this.textAnchorForAxisLabel(e.config.axis_rotated,this.getY2AxisLabelPosition())},I.getMaxTickWidth=function(e,t){var a=this.owner,i=a.config,r=0,n,s,o,d,l;return t&&a.currentMaxTickWidths[e]?a.currentMaxTickWidths[e]:(a.svg&&(n=a.filterTargetsToShow(a.data.targets),'y'===e?(s=a.y.copy().domain(a.getYDomain(n,'y')),o=this.getYAxis(s,a.yOrient,i.axis_y_tick_format,a.yAxisTickValues,!1,!0,!0)):'y2'===e?(s=a.y2.copy().domain(a.getYDomain(n,'y2')),o=this.getYAxis(s,a.y2Orient,i.axis_y2_tick_format,a.y2AxisTickValues,!1,!0,!0)):(s=a.x.copy().domain(a.getXDomain(n)),o=this.getXAxis(s,a.xOrient,a.xAxisTickFormat,a.xAxisTickValues,!1,!0,!0),this.updateXAxisTickValues(n,o)),d=a.d3.select('body').append('div').classed('c3',!0),l=d.append('svg').style('visibility','hidden').style('position','fixed').style('top',0).style('left',0),l.append('g').call(o).each(function(){a.d3.select(this).selectAll('text').each(function(){var e=this.getBoundingClientRect();r<e.width&&(r=e.width)}),d.remove()})),a.currentMaxTickWidths[e]=0>=r?a.currentMaxTickWidths[e]:r,a.currentMaxTickWidths[e])},I.updateLabels=function(e){var t=this.owner,a=t.main.select('.'+p.axisX+' .'+p.axisXLabel),i=t.main.select('.'+p.axisY+' .'+p.axisYLabel),r=t.main.select('.'+p.axisY2+' .'+p.axisY2Label);(e?a.transition():a).attr('x',this.xForXAxisLabel.bind(this)).attr('dx',this.dxForXAxisLabel.bind(this)).attr('dy',this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this)),(e?i.transition():i).attr('x',this.xForYAxisLabel.bind(this)).attr('dx',this.dxForYAxisLabel.bind(this)).attr('dy',this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this)),(e?r.transition():r).attr('x',this.xForY2AxisLabel.bind(this)).attr('dx',this.dxForY2AxisLabel.bind(this)).attr('dy',this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this))},I.getPadding=function(e,t,a,i){var r='number'===typeof e?e:e[t];return y(r)?'ratio'===e.unit?e[t]*i:this.convertPixelsToAxisPadding(r,i):a},I.convertPixelsToAxisPadding=function(e,t){var a=this.owner,i=a.config.axis_rotated?a.width:a.height;return t*(e/i)},I.generateTickValues=function(e,t,a){var r=e,n,s,o,d,l,g,i;if(t)if(n=m(t)?t():t,1===n)r=[e[0]];else if(2===n)r=[e[0],e[e.length-1]];else if(2<n){for(d=n-2,s=e[0],o=e[e.length-1],l=(o-s)/(d+1),r=[s],g=0;g<d;g++)i=+s+l*(g+1),r.push(a?new Date(i):i);r.push(o)}return a||(r=r.sort(function(e,t){return e-t})),r},I.generateTransitions=function(e){var t=this.owner,a=t.axes;return{axisX:e?a.x.transition().duration(e):a.x,axisY:e?a.y.transition().duration(e):a.y,axisY2:e?a.y2.transition().duration(e):a.y2,axisSubX:e?a.subx.transition().duration(e):a.subx}},I.redraw=function(e,t){var a=this.owner;a.axes.x.style('opacity',t?0:1),a.axes.y.style('opacity',t?0:1),a.axes.y2.style('opacity',t?0:1),a.axes.subx.style('opacity',t?0:1),e.axisX.call(a.xAxis),e.axisY.call(a.yAxis),e.axisY2.call(a.y2Axis),e.axisSubX.call(a.subXAxis)};var O={version:'0.4.22'},D,F;return O.generate=function(e){return new t(e)},O.chart={fn:t.prototype,internal:{fn:a.prototype}},D=O.chart.fn,F=O.chart.internal.fn,F.beforeInit=function(){},F.afterInit=function(){},F.init=function(){var e=this,t=e.config;if(e.initParams(),t.data_url)e.convertUrlToData(t.data_url,t.data_mimeType,t.data_headers,t.data_keys,e.initWithData);else if(t.data_json)e.initWithData(e.convertJsonToData(t.data_json,t.data_keys));else if(t.data_rows)e.initWithData(e.convertRowsToData(t.data_rows));else if(t.data_columns)e.initWithData(e.convertColumnsToData(t.data_columns));else throw Error('url or json or rows or columns is required.')},F.initParams=function(){var e=this,t=e.d3,a=e.config;e.clipId='c3-'+ +new Date+'-clip',e.clipIdForXAxis=e.clipId+'-xaxis',e.clipIdForYAxis=e.clipId+'-yaxis',e.clipIdForGrid=e.clipId+'-grid',e.clipIdForSubchart=e.clipId+'-subchart',e.clipPath=e.getClipPath(e.clipId),e.clipPathForXAxis=e.getClipPath(e.clipIdForXAxis),e.clipPathForYAxis=e.getClipPath(e.clipIdForYAxis),e.clipPathForGrid=e.getClipPath(e.clipIdForGrid),e.clipPathForSubchart=e.getClipPath(e.clipIdForSubchart),e.dragStart=null,e.dragging=!1,e.flowing=!1,e.cancelClick=!1,e.mouseover=!1,e.transiting=!1,e.color=e.generateColor(),e.levelColor=e.generateLevelColor(),e.dataTimeFormat=a.data_xLocaltime?t.time.format:t.time.format.utc,e.axisTimeFormat=a.axis_x_localtime?t.time.format:t.time.format.utc,e.defaultAxisTimeFormat=e.axisTimeFormat.multi([['.%L',function(e){return e.getMilliseconds()}],[':%S',function(e){return e.getSeconds()}],['%I:%M',function(e){return e.getMinutes()}],['%I %p',function(e){return e.getHours()}],['%-m/%-d',function(e){return e.getDay()&&1!==e.getDate()}],['%-m/%-d',function(e){return 1!==e.getDate()}],['%-m/%-d',function(e){return e.getMonth()}],['%Y/%-m/%-d',function(){return!0}]]),e.hiddenTargetIds=[],e.hiddenLegendIds=[],e.focusedTargetIds=[],e.defocusedTargetIds=[],e.xOrient=a.axis_rotated?a.axis_x_inner?'right':'left':a.axis_x_inner?'top':'bottom',e.yOrient=a.axis_rotated?a.axis_y_inner?'top':'bottom':a.axis_y_inner?'right':'left',e.y2Orient=a.axis_rotated?a.axis_y2_inner?'bottom':'top':a.axis_y2_inner?'left':'right',e.subXOrient=a.axis_rotated?'left':'bottom',e.isLegendRight='right'===a.legend_position,e.isLegendInset='inset'===a.legend_position,e.isLegendTop='top-left'===a.legend_inset_anchor||'top-right'===a.legend_inset_anchor,e.isLegendLeft='top-left'===a.legend_inset_anchor||'bottom-left'===a.legend_inset_anchor,e.legendStep=0,e.legendItemWidth=0,e.legendItemHeight=0,e.currentMaxTickWidths={x:0,y:0,y2:0},e.rotated_padding_left=30,e.rotated_padding_right=a.axis_rotated&&!a.axis_x_show?0:30,e.rotated_padding_top=5,e.withoutFadeIn={},e.intervalForObserveInserted=void 0,e.axes.subx=t.selectAll([])},F.initChartElements=function(){this.initBar&&this.initBar(),this.initLine&&this.initLine(),this.initArc&&this.initArc(),this.initGauge&&this.initGauge(),this.initText&&this.initText()},F.initWithData=function(e){var t=this,a=t.d3,i=t.config,r=!0,n,s;t.axis=new k(t),t.initPie&&t.initPie(),t.initBrush&&t.initBrush(),t.initZoom&&t.initZoom(),t.selectChart=i.bindto?'function'===typeof i.bindto.node?i.bindto:a.select(i.bindto):a.selectAll([]),t.selectChart.empty()&&(t.selectChart=a.select(document.createElement('div')).style('opacity',0),t.observeInserted(t.selectChart),r=!1),t.selectChart.html('').classed('c3',!0),t.data.xs={},t.data.targets=t.convertDataToTargets(e),i.data_filter&&(t.data.targets=t.data.targets.filter(i.data_filter)),i.data_hide&&t.addHiddenTargetIds(!0===i.data_hide?t.mapToIds(t.data.targets):i.data_hide),i.legend_hide&&t.addHiddenLegendIds(!0===i.legend_hide?t.mapToIds(t.data.targets):i.legend_hide),t.updateSizes(),t.updateScales(),t.x.domain(a.extent(t.getXDomain(t.data.targets))),t.y.domain(t.getYDomain(t.data.targets,'y')),t.y2.domain(t.getYDomain(t.data.targets,'y2')),t.subX.domain(t.x.domain()),t.subY.domain(t.y.domain()),t.subY2.domain(t.y2.domain()),t.orgXDomain=t.x.domain(),t.brush&&t.brush.scale(t.subX),i.zoom_enabled&&t.zoom.scale(t.x),t.svg=t.selectChart.append('svg').style('overflow','hidden').on('mouseenter',function(){return i.onmouseover.call(t)}).on('mouseleave',function(){return i.onmouseout.call(t)}),t.config.svg_classname&&t.svg.attr('class',t.config.svg_classname),n=t.svg.append('defs'),t.clipChart=t.appendClip(n,t.clipId),t.clipXAxis=t.appendClip(n,t.clipIdForXAxis),t.clipYAxis=t.appendClip(n,t.clipIdForYAxis),t.clipGrid=t.appendClip(n,t.clipIdForGrid),t.clipSubchart=t.appendClip(n,t.clipIdForSubchart),t.updateSvgSize(),s=t.main=t.svg.append('g').attr('transform',t.getTranslate('main')),t.initSubchart&&t.initSubchart(),t.initTooltip&&t.initTooltip(),t.initLegend&&t.initLegend(),t.initTitle&&t.initTitle(),s.append('text').attr('class',p.text+' '+p.empty).attr('text-anchor','middle').attr('dominant-baseline','middle'),t.initRegion(),t.initGrid(),s.append('g').attr('clip-path',t.clipPath).attr('class',p.chart),i.grid_lines_front&&t.initGridLines(),t.initEventRect(),t.initChartElements(),s.insert('rect',i.zoom_privileged?null:'g.'+p.regions).attr('class',p.zoomRect).attr('width',t.width).attr('height',t.height).style('opacity',0).on('dblclick.zoom',null),i.axis_x_extent&&t.brush.extent(t.getDefaultExtent()),t.axis.init(),t.updateTargets(t.data.targets),r&&(t.updateDimension(),t.config.oninit.call(t),t.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1})),t.bindResize(),t.api.element=t.selectChart.node()},F.smoothLines=function(e,t){var a=this;'grid'===t&&e.each(function(){var e=a.d3.select(this),t=e.attr('x1'),i=e.attr('x2'),r=e.attr('y1'),n=e.attr('y2');e.attr({x1:c(t),x2:c(i),y1:c(r),y2:c(n)})})},F.updateSizes=function(){var e=this,t=e.config,a=e.legend?e.getLegendHeight():0,i=e.legend?e.getLegendWidth():0,r=e.isLegendRight||e.isLegendInset?0:a,n=e.hasArcType(),s=t.axis_rotated||n?0:e.getHorizontalAxisHeight('x'),o=t.subchart_show&&!n?t.subchart_size_height+s:0;e.currentWidth=e.getCurrentWidth(),e.currentHeight=e.getCurrentHeight(),e.margin=t.axis_rotated?{top:e.getHorizontalAxisHeight('y2')+e.getCurrentPaddingTop(),right:n?0:e.getCurrentPaddingRight(),bottom:e.getHorizontalAxisHeight('y')+r+e.getCurrentPaddingBottom(),left:o+(n?0:e.getCurrentPaddingLeft())}:{top:4+e.getCurrentPaddingTop(),right:n?0:e.getCurrentPaddingRight(),bottom:s+o+r+e.getCurrentPaddingBottom(),left:n?0:e.getCurrentPaddingLeft()},e.margin2=t.axis_rotated?{top:e.margin.top,right:NaN,bottom:20+r,left:e.rotated_padding_left}:{top:e.currentHeight-o-r,right:NaN,bottom:s+r,left:e.margin.left},e.margin3={top:0,right:NaN,bottom:0,left:0},e.updateSizeForLegend&&e.updateSizeForLegend(a,i),e.width=e.currentWidth-e.margin.left-e.margin.right,e.height=e.currentHeight-e.margin.top-e.margin.bottom,0>e.width&&(e.width=0),0>e.height&&(e.height=0),e.width2=t.axis_rotated?e.margin.left-e.rotated_padding_left-e.rotated_padding_right:e.width,e.height2=t.axis_rotated?e.height:e.currentHeight-e.margin2.top-e.margin2.bottom,0>e.width2&&(e.width2=0),0>e.height2&&(e.height2=0),e.arcWidth=e.width-(e.isLegendRight?i+10:0),e.arcHeight=e.height-(e.isLegendRight?0:10),e.hasType('gauge')&&!t.gauge_fullCircle&&(e.arcHeight+=e.height-e.getGaugeLabelHeight()),e.updateRadius&&e.updateRadius(),e.isLegendRight&&n&&(e.margin3.left=e.arcWidth/2+1.1*e.radiusExpanded)},F.updateTargets=function(e){var t=this;t.updateTargetsForText(e),t.updateTargetsForBar(e),t.updateTargetsForLine(e),t.hasArcType()&&t.updateTargetsForArc&&t.updateTargetsForArc(e),t.updateTargetsForSubchart&&t.updateTargetsForSubchart(e),t.showTargets()},F.showTargets=function(){var e=this;e.svg.selectAll('.'+p.target).filter(function(t){return e.isTargetToShow(t.id)}).transition().duration(e.config.transition_duration).style('opacity',1)},F.redraw=function(e,t){var a=this,r=a.main,n=a.d3,s=a.config,o=a.getShapeIndices(a.isAreaType),d=a.getShapeIndices(a.isBarType),l=a.getShapeIndices(a.isLineType),g=a.hasArcType(),c=a.filterTargetsToShow(a.data.targets),_=a.xv.bind(a),h,x,u,y,m,S,f,T,A,b,P,v,L,C,G,w,E,I,R,k,O,D,F,X,z,i,H,B,Y;if(e=e||{},h=V(e,'withY',!0),x=V(e,'withSubchart',!0),u=V(e,'withTransition',!0),S=V(e,'withTransform',!1),f=V(e,'withUpdateXDomain',!1),T=V(e,'withUpdateOrgXDomain',!1),A=V(e,'withTrimXDomain',!0),L=V(e,'withUpdateXAxis',f),b=V(e,'withLegend',!1),P=V(e,'withEventRect',!0),v=V(e,'withDimension',!0),y=V(e,'withTransitionForExit',u),m=V(e,'withTransitionForAxis',u),R=u?s.transition_duration:0,k=y?R:0,O=m?R:0,t=t||a.axis.generateTransitions(O),b&&s.legend_show?a.updateLegend(a.mapToIds(a.data.targets),e,t):v&&a.updateDimension(!0),a.isCategorized()&&0===c.length&&a.x.domain([0,a.axes.x.selectAll('.tick').size()]),c.length?(a.updateXDomain(c,f,T,A),!s.axis_x_tick_values&&(X=a.axis.updateXAxisTickValues(c))):(a.xAxis.tickValues([]),a.subXAxis.tickValues([])),s.zoom_rescale&&!e.flow&&(H=a.x.orgDomain()),a.y.domain(a.getYDomain(c,'y',H)),a.y2.domain(a.getYDomain(c,'y2',H)),!s.axis_y_tick_values&&s.axis_y_tick_count&&a.yAxis.tickValues(a.axis.generateTickValues(a.y.domain(),s.axis_y_tick_count)),!s.axis_y2_tick_values&&s.axis_y2_tick_count&&a.y2Axis.tickValues(a.axis.generateTickValues(a.y2.domain(),s.axis_y2_tick_count)),a.axis.redraw(t,g),a.axis.updateLabels(u),(f||L)&&c.length)if(s.axis_x_tick_culling&&X){for(z=1;z<X.length;z++)if(X.length/z<s.axis_x_tick_culling_max){i=z;break}a.svg.selectAll('.'+p.axisX+' .tick text').each(function(t){var e=X.indexOf(t);0<=e&&n.select(this).style('display',e%i?'none':'block')})}else a.svg.selectAll('.'+p.axisX+' .tick text').style('display','block');C=a.generateDrawArea?a.generateDrawArea(o,!1):void 0,G=a.generateDrawBar?a.generateDrawBar(d):void 0,w=a.generateDrawLine?a.generateDrawLine(l,!1):void 0,E=a.generateXYForText(o,d,l,!0),I=a.generateXYForText(o,d,l,!1),h&&(a.subY.domain(a.getYDomain(c,'y')),a.subY2.domain(a.getYDomain(c,'y2'))),a.updateXgridFocus(),r.select('text.'+p.text+'.'+p.empty).attr('x',a.width/2).attr('y',a.height/2).text(s.data_empty_label_text).transition().style('opacity',c.length?0:1),a.updateGrid(R),a.updateRegion(R),a.updateBar(k),a.updateLine(k),a.updateArea(k),a.updateCircle(),a.hasDataLabel()&&a.updateText(k),a.redrawTitle&&a.redrawTitle(),a.redrawArc&&a.redrawArc(R,k,S),a.redrawSubchart&&a.redrawSubchart(x,t,R,k,o,d,l),r.selectAll('.'+p.selectedCircles).filter(a.isBarType.bind(a)).selectAll('circle').remove(),s.interaction_enabled&&!e.flow&&P&&(a.redrawEventRect(),a.updateZoom&&a.updateZoom()),a.updateCircleY(),B=(a.config.axis_rotated?a.circleY:a.circleX).bind(a),Y=(a.config.axis_rotated?a.circleX:a.circleY).bind(a),e.flow&&(F=a.generateFlow({targets:c,flow:e.flow,duration:e.flow.duration,drawBar:G,drawLine:w,drawArea:C,cx:B,cy:Y,xv:_,xForText:E,yForText:I})),(R||F)&&a.isTabVisible()?n.transition().duration(R).each(function(){var t=[];[a.redrawBar(G,!0),a.redrawLine(w,!0),a.redrawArea(C,!0),a.redrawCircle(B,Y,!0),a.redrawText(E,I,e.flow,!0),a.redrawRegion(!0),a.redrawGrid(!0)].forEach(function(e){e.forEach(function(e){t.push(e)})}),D=a.generateWait(),t.forEach(function(e){D.add(e)})}).call(D,function(){F&&F(),s.onrendered&&s.onrendered.call(a)}):(a.redrawBar(G),a.redrawLine(w),a.redrawArea(C),a.redrawCircle(B,Y),a.redrawText(E,I,e.flow),a.redrawRegion(),a.redrawGrid(),s.onrendered&&s.onrendered.call(a)),a.mapToIds(a.data.targets).forEach(function(e){a.withoutFadeIn[e]=!0})},F.updateAndRedraw=function(e){var t=this,a=t.config,i;e=e||{},e.withTransition=V(e,'withTransition',!0),e.withTransform=V(e,'withTransform',!1),e.withLegend=V(e,'withLegend',!1),e.withUpdateXDomain=!0,e.withUpdateOrgXDomain=!0,e.withTransitionForExit=!1,e.withTransitionForTransform=V(e,'withTransitionForTransform',e.withTransition),t.updateSizes(),e.withLegend&&a.legend_show||(i=t.axis.generateTransitions(e.withTransitionForAxis?a.transition_duration:0),t.updateScales(),t.updateSvgSize(),t.transformAll(e.withTransitionForTransform,i)),t.redraw(e,i)},F.redrawWithoutRescale=function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})},F.isTimeSeries=function(){return'timeseries'===this.config.axis_x_type},F.isCategorized=function(){return 0<=this.config.axis_x_type.indexOf('categor')},F.isCustomX=function(){var e=this,t=e.config;return!e.isTimeSeries()&&(t.data_x||C(t.data_xs))},F.isTimeSeriesY=function(){return'timeseries'===this.config.axis_y_type},F.getTranslate=function(e){var t=this,a=t.config,i,r;return'main'===e?(i=P(t.margin.left),r=P(t.margin.top)):'context'===e?(i=P(t.margin2.left),r=P(t.margin2.top)):'legend'===e?(i=t.margin3.left,r=t.margin3.top):'x'===e?(i=0,r=a.axis_rotated?0:t.height):'y'===e?(i=0,r=a.axis_rotated?t.height:0):'y2'===e?(i=a.axis_rotated?0:t.width,r=a.axis_rotated?1:0):'subx'===e?(i=0,r=a.axis_rotated?0:t.height2):'arc'===e&&(i=t.arcWidth/2,r=t.arcHeight/2-(t.hasType('gauge')?6:0)),'translate('+i+','+r+')'},F.initialOpacity=function(e){return null!==e.value&&this.withoutFadeIn[e.id]?1:0},F.initialOpacityForCircle=function(e){return null!==e.value&&this.withoutFadeIn[e.id]?this.opacityForCircle(e):0},F.opacityForCircle=function(e){var t=m(this.config.point_show)?this.config.point_show(e):this.config.point_show,a=t?1:0;return y(e.value)?this.isScatterType(e)?0.5:a:0},F.opacityForText=function(){return this.hasDataLabel()?1:0},F.xx=function(e){return e?this.x(e.x):null},F.xv=function(e){var t=this,a=e.value;return t.isTimeSeries()?a=t.parseDate(e.value):t.isCategorized()&&'string'===typeof e.value&&(a=t.config.axis_x_categories.indexOf(e.value)),c(t.x(a))},F.yv=function(e){var t=this,a=e.axis&&'y2'===e.axis?t.y2:t.y;return c(a(e.value))},F.subxx=function(e){return e?this.subX(e.x):null},F.transformMain=function(e,t){var a=this,i,r,n;t&&t.axisX?i=t.axisX:(i=a.main.select('.'+p.axisX),e&&(i=i.transition())),t&&t.axisY?r=t.axisY:(r=a.main.select('.'+p.axisY),e&&(r=r.transition())),t&&t.axisY2?n=t.axisY2:(n=a.main.select('.'+p.axisY2),e&&(n=n.transition())),(e?a.main.transition():a.main).attr('transform',a.getTranslate('main')),i.attr('transform',a.getTranslate('x')),r.attr('transform',a.getTranslate('y')),n.attr('transform',a.getTranslate('y2')),a.main.select('.'+p.chartArcs).attr('transform',a.getTranslate('arc'))},F.transformAll=function(e,t){var a=this;a.transformMain(e,t),a.config.subchart_show&&a.transformContext(e,t),a.legend&&a.transformLegend(e)},F.updateSvgSize=function(){var e=this,t=e.svg.select('.c3-brush .background');e.svg.attr('width',e.currentWidth).attr('height',e.currentHeight),e.svg.selectAll(['#'+e.clipId,'#'+e.clipIdForGrid]).select('rect').attr('width',e.width).attr('height',e.height),e.svg.select('#'+e.clipIdForXAxis).select('rect').attr('x',e.getXAxisClipX.bind(e)).attr('y',e.getXAxisClipY.bind(e)).attr('width',e.getXAxisClipWidth.bind(e)).attr('height',e.getXAxisClipHeight.bind(e)),e.svg.select('#'+e.clipIdForYAxis).select('rect').attr('x',e.getYAxisClipX.bind(e)).attr('y',e.getYAxisClipY.bind(e)).attr('width',e.getYAxisClipWidth.bind(e)).attr('height',e.getYAxisClipHeight.bind(e)),e.svg.select('#'+e.clipIdForSubchart).select('rect').attr('width',e.width).attr('height',t.size()?t.attr('height'):0),e.svg.select('.'+p.zoomRect).attr('width',e.width).attr('height',e.height),e.selectChart.style('max-height',e.currentHeight+'px')},F.updateDimension=function(e){var t=this;e||(t.config.axis_rotated?(t.axes.x.call(t.xAxis),t.axes.subx.call(t.subXAxis)):(t.axes.y.call(t.yAxis),t.axes.y2.call(t.y2Axis))),t.updateSizes(),t.updateScales(),t.updateSvgSize(),t.transformAll(!1)},F.observeInserted=function(e){var t=this,a;return'undefined'===typeof MutationObserver?void window.console.error('MutationObserver not defined.'):void(a=new MutationObserver(function(i){i.forEach(function(i){'childList'===i.type&&i.previousSibling&&(a.disconnect(),t.intervalForObserveInserted=window.setInterval(function(){e.node().parentNode&&(window.clearInterval(t.intervalForObserveInserted),t.updateDimension(),t.brush&&t.brush.update(),t.config.oninit.call(t),t.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),e.transition().style('opacity',1))},10))})}),a.observe(e.node(),{attributes:!0,childList:!0,characterData:!0}))},F.bindResize=function(){var e=this,t=e.config;if(e.resizeFunction=e.generateResize(),e.resizeFunction.add(function(){t.onresize.call(e)}),t.resize_auto&&e.resizeFunction.add(function(){void 0!==e.resizeTimeout&&window.clearTimeout(e.resizeTimeout),e.resizeTimeout=window.setTimeout(function(){delete e.resizeTimeout,e.api.flush()},100)}),e.resizeFunction.add(function(){t.onresized.call(e)}),e.resizeIfElementDisplayed=function(){null!=e.api&&e.api.element.offsetParent&&e.resizeFunction()},window.attachEvent)window.attachEvent('onresize',e.resizeIfElementDisplayed);else if(window.addEventListener)window.addEventListener('resize',e.resizeIfElementDisplayed,!1);else{var a=window.onresize;a?(!a.add||!a.remove)&&(a=e.generateResize(),a.add(window.onresize)):a=e.generateResize(),a.add(e.resizeFunction),window.onresize=function(){e.api.element.offsetParent&&a()}}},F.generateResize=function(){function e(){t.forEach(function(e){e()})}var t=[];return e.add=function(e){t.push(e)},e.remove=function(e){for(var a=0;a<t.length;a++)if(t[a]===e){t.splice(a,1);break}},e},F.endall=function(e,t){var a=0;e.each(function(){++a}).each('end',function(){--a||t.apply(this,arguments)})},F.generateWait=function(){var e=[],t=function(t,a){var i=setInterval(function(){var r=0;e.forEach(function(e){if(e.empty())return void(r+=1);try{e.transition()}catch(t){r+=1}}),r===e.length&&(clearInterval(i),a&&a())},10)};return t.add=function(t){e.push(t)},t},F.parseDate=function(e){var t=this,a;return e instanceof Date?a=e:'string'===typeof e?a=t.dataTimeFormat(t.config.data_xFormat).parse(e):'object'===('undefined'===typeof e?'undefined':_(e))?a=new Date(+e):'number'===typeof e&&!isNaN(e)&&(a=new Date(+e)),(!a||isNaN(+a))&&window.console.error('Failed to parse x \''+e+'\' to Date object'),a},F.isTabVisible=function(){var e;return'undefined'===typeof document.hidden?'undefined'===typeof document.mozHidden?'undefined'===typeof document.msHidden?'undefined'!==typeof document.webkitHidden&&(e='webkitHidden'):e='msHidden':e='mozHidden':e='hidden',!document[e]},F.isValue=y,F.isFunction=m,F.isString=f,F.isUndefined=T,F.isDefined=A,F.ceil10=b,F.asHalfPixel=P,F.diffDomain=v,F.isEmpty=L,F.notEmpty=C,F.notEmpty=C,F.getOption=V,F.hasValue=G,F.sanitise=w,F.getPathBox=E,F.CLASS=p,Function.prototype.bind||(Function.prototype.bind=function(e){if('function'!==typeof this)throw new TypeError('Function.prototype.bind - what is trying to be bound is not callable');var t=Array.prototype.slice.call(arguments,1),a=this,i=function(){},r=function(){return a.apply(this instanceof i?this:e,t.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,r.prototype=new i,r}),function(){'SVGPathSeg'in window||(window.SVGPathSeg=function(e,t,a){this.pathSegType=e,this.pathSegTypeAsLetter=t,this._owningPathSegList=a},window.SVGPathSeg.prototype.classname='SVGPathSeg',window.SVGPathSeg.PATHSEG_UNKNOWN=0,window.SVGPathSeg.PATHSEG_CLOSEPATH=1,window.SVGPathSeg.PATHSEG_MOVETO_ABS=2,window.SVGPathSeg.PATHSEG_MOVETO_REL=3,window.SVGPathSeg.PATHSEG_LINETO_ABS=4,window.SVGPathSeg.PATHSEG_LINETO_REL=5,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS=6,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL=7,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS=8,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL=9,window.SVGPathSeg.PATHSEG_ARC_ABS=10,window.SVGPathSeg.PATHSEG_ARC_REL=11,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS=12,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL=13,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS=14,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL=15,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS=16,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL=17,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS=18,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL=19,window.SVGPathSeg.prototype._segmentChanged=function(){this._owningPathSegList&&this._owningPathSegList.segmentChanged(this)},window.SVGPathSegClosePath=function(e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CLOSEPATH,'z',e)},window.SVGPathSegClosePath.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegClosePath.prototype.toString=function(){return'[object SVGPathSegClosePath]'},window.SVGPathSegClosePath.prototype._asPathString=function(){return this.pathSegTypeAsLetter},window.SVGPathSegClosePath.prototype.clone=function(){return new window.SVGPathSegClosePath(void 0)},window.SVGPathSegMovetoAbs=function(e,t,a){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_MOVETO_ABS,'M',e),this._x=t,this._y=a},window.SVGPathSegMovetoAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegMovetoAbs.prototype.toString=function(){return'[object SVGPathSegMovetoAbs]'},window.SVGPathSegMovetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+' '+this._x+' '+this._y},window.SVGPathSegMovetoAbs.prototype.clone=function(){return new window.SVGPathSegMovetoAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,'x',{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,'y',{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegMovetoRel=function(e,t,a){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_MOVETO_REL,'m',e),this._x=t,this._y=a},window.SVGPathSegMovetoRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegMovetoRel.prototype.toString=function(){return'[object SVGPathSegMovetoRel]'},window.SVGPathSegMovetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+' '+this._x+' '+this._y},window.SVGPathSegMovetoRel.prototype.clone=function(){return new window.SVGPathSegMovetoRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegMovetoRel.prototype,'x',{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegMovetoRel.prototype,'y',{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoAbs=function(e,t,a){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_ABS,'L',e),this._x=t,this._y=a},window.SVGPathSegLinetoAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoAbs.prototype.toString=function(){return'[object SVGPathSegLinetoAbs]'},window.SVGPathSegLinetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+' '+this._x+' '+this._y},window.SVGPathSegLinetoAbs.prototype.clone=function(){return new window.SVGPathSegLinetoAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,'x',{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,'y',{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoRel=function(e,t,a){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_REL,'l',e),this._x=t,this._y=a},window.SVGPathSegLinetoRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoRel.prototype.toString=function(){return'[object SVGPathSegLinetoRel]'},window.SVGPathSegLinetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+' '+this._x+' '+this._y},window.SVGPathSegLinetoRel.prototype.clone=function(){return new window.SVGPathSegLinetoRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegLinetoRel.prototype,'x',{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegLinetoRel.prototype,'y',{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicAbs=function(e,t,a,i,r,n,s){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS,'C',e),this._x=t,this._y=a,this._x1=i,this._y1=r,this._x2=n,this._y2=s},window.SVGPathSegCurvetoCubicAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicAbs.prototype.toString=function(){return'[object SVGPathSegCurvetoCubicAbs]'},window.SVGPathSegCurvetoCubicAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+' '+this._x1+' '+this._y1+' '+this._x2+' '+this._y2+' '+this._x+' '+this._y},window.SVGPathSegCurvetoCubicAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicAbs(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,'x',{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,'y',{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,'x1',{get:function(){return this._x1},set:function(e){this._x1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,'y1',{get:function(){return this._y1},set:function(e){this._y1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,'x2',{get:function(){return this._x2},set:function(e){this._x2=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,'y2',{get:function(){return this._y2},set:function(e){this._y2=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicRel=function(e,t,a,i,r,n,s){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL,'c',e),this._x=t,this._y=a,this._x1=i,this._y1=r,this._x2=n,this._y2=s},window.SVGPathSegCurvetoCubicRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicRel.prototype.toString=function(){return'[object SVGPathSegCurvetoCubicRel]'},window.SVGPathSegCurvetoCubicRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+' '+this._x1+' '+this._y1+' '+this._x2+' '+this._y2+' '+this._x+' '+this._y},window.SVGPathSegCurvetoCubicRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicRel(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,'x',{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,'y',{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,'x1',{get:function(){return this._x1},set:function(e){this._x1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,'y1',{get:function(){return this._y1},set:function(e){this._y1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,'x2',{get:function(){return this._x2},set:function(e){this._x2=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,'y2',{get:function(){return this._y2},set:function(e){this._y2=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticAbs=function(e,t,a,i,r){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS,'Q',e),this._x=t,this._y=a,this._x1=i,this._y1=r},window.SVGPathSegCurvetoQuadraticAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticAbs.prototype.toString=function(){return'[object SVGPathSegCurvetoQuadraticAbs]'},window.SVGPathSegCurvetoQuadraticAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+' '+this._x1+' '+this._y1+' '+this._x+' '+this._y},window.SVGPathSegCurvetoQuadraticAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,'x',{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,'y',{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,'x1',{get:function(){return this._x1},set:function(e){this._x1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,'y1',{get:function(){return this._y1},set:function(e){this._y1=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticRel=function(e,t,a,i,r){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL,'q',e),this._x=t,this._y=a,this._x1=i,this._y1=r},window.SVGPathSegCurvetoQuadraticRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticRel.prototype.toString=function(){return'[object SVGPathSegCurvetoQuadraticRel]'},window.SVGPathSegCurvetoQuadraticRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+' '+this._x1+' '+this._y1+' '+this._x+' '+this._y},window.SVGPathSegCurvetoQuadraticRel.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticRel(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,'x',{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,'y',{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,'x1',{get:function(){return this._x1},set:function(e){this._x1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,'y1',{get:function(){return this._y1},set:function(e){this._y1=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcAbs=function(e,t,a,i,r,n,s,o){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_ARC_ABS,'A',e),this._x=t,this._y=a,this._r1=i,this._r2=r,this._angle=n,this._largeArcFlag=s,this._sweepFlag=o},window.SVGPathSegArcAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegArcAbs.prototype.toString=function(){return'[object SVGPathSegArcAbs]'},window.SVGPathSegArcAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+' '+this._r1+' '+this._r2+' '+this._angle+' '+(this._largeArcFlag?'1':'0')+' '+(this._sweepFlag?'1':'0')+' '+this._x+' '+this._y},window.SVGPathSegArcAbs.prototype.clone=function(){return new window.SVGPathSegArcAbs(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(window.SVGPathSegArcAbs.prototype,'x',{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,'y',{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,'r1',{get:function(){return this._r1},set:function(e){this._r1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,'r2',{get:function(){return this._r2},set:function(e){this._r2=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,'angle',{get:function(){return this._angle},set:function(e){this._angle=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,'largeArcFlag',{get:function(){return this._largeArcFlag},set:function(e){this._largeArcFlag=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,'sweepFlag',{get:function(){return this._sweepFlag},set:function(e){this._sweepFlag=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcRel=function(e,t,a,i,r,n,s,o){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_ARC_REL,'a',e),this._x=t,this._y=a,this._r1=i,this._r2=r,this._angle=n,this._largeArcFlag=s,this._sweepFlag=o},window.SVGPathSegArcRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegArcRel.prototype.toString=function(){return'[object SVGPathSegArcRel]'},window.SVGPathSegArcRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+' '+this._r1+' '+this._r2+' '+this._angle+' '+(this._largeArcFlag?'1':'0')+' '+(this._sweepFlag?'1':'0')+' '+this._x+' '+this._y},window.SVGPathSegArcRel.prototype.clone=function(){return new window.SVGPathSegArcRel(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(window.SVGPathSegArcRel.prototype,'x',{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,'y',{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,'r1',{get:function(){return this._r1},set:function(e){this._r1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,'r2',{get:function(){return this._r2},set:function(e){this._r2=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,'angle',{get:function(){return this._angle},set:function(e){this._angle=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,'largeArcFlag',{get:function(){return this._largeArcFlag},set:function(e){this._largeArcFlag=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,'sweepFlag',{get:function(){return this._sweepFlag},set:function(e){this._sweepFlag=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalAbs=function(e,t){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS,'H',e),this._x=t},window.SVGPathSegLinetoHorizontalAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoHorizontalAbs.prototype.toString=function(){return'[object SVGPathSegLinetoHorizontalAbs]'},window.SVGPathSegLinetoHorizontalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+' '+this._x},window.SVGPathSegLinetoHorizontalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalAbs(void 0,this._x)},Object.defineProperty(window.SVGPathSegLinetoHorizontalAbs.prototype,'x',{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalRel=function(e,t){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL,'h',e),this._x=t},window.SVGPathSegLinetoHorizontalRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoHorizontalRel.prototype.toString=function(){return'[object SVGPathSegLinetoHorizontalRel]'},window.SVGPathSegLinetoHorizontalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+' '+this._x},window.SVGPathSegLinetoHorizontalRel.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalRel(void 0,this._x)},Object.defineProperty(window.SVGPathSegLinetoHorizontalRel.prototype,'x',{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalAbs=function(e,t){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS,'V',e),this._y=t},window.SVGPathSegLinetoVerticalAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoVerticalAbs.prototype.toString=function(){return'[object SVGPathSegLinetoVerticalAbs]'},window.SVGPathSegLinetoVerticalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+' '+this._y},window.SVGPathSegLinetoVerticalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoVerticalAbs(void 0,this._y)},Object.defineProperty(window.SVGPathSegLinetoVerticalAbs.prototype,'y',{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalRel=function(e,t){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL,'v',e),this._y=t},window.SVGPathSegLinetoVerticalRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoVerticalRel.prototype.toString=function(){return'[object SVGPathSegLinetoVerticalRel]'},window.SVGPathSegLinetoVerticalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+' '+this._y},window.SVGPathSegLinetoVerticalRel.prototype.clone=function(){return new window.SVGPathSegLinetoVerticalRel(void 0,this._y)},Object.defineProperty(window.SVGPathSegLinetoVerticalRel.prototype,'y',{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothAbs=function(e,t,a,i,r){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS,'S',e),this._x=t,this._y=a,this._x2=i,this._y2=r},window.SVGPathSegCurvetoCubicSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicSmoothAbs.prototype.toString=function(){return'[object SVGPathSegCurvetoCubicSmoothAbs]'},window.SVGPathSegCurvetoCubicSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+' '+this._x2+' '+this._y2+' '+this._x+' '+this._y},window.SVGPathSegCurvetoCubicSmoothAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,'x',{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,'y',{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,'x2',{get:function(){return this._x2},set:function(e){this._x2=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,'y2',{get:function(){return this._y2},set:function(e){this._y2=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothRel=function(e,t,a,i,r){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL,'s',e),this._x=t,this._y=a,this._x2=i,this._y2=r},window.SVGPathSegCurvetoCubicSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicSmoothRel.prototype.toString=function(){return'[object SVGPathSegCurvetoCubicSmoothRel]'},window.SVGPathSegCurvetoCubicSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+' '+this._x2+' '+this._y2+' '+this._x+' '+this._y},window.SVGPathSegCurvetoCubicSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,'x',{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,'y',{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,'x2',{get:function(){return this._x2},set:function(e){this._x2=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,'y2',{get:function(){return this._y2},set:function(e){this._y2=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothAbs=function(e,t,a){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS,'T',e),this._x=t,this._y=a},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.toString=function(){return'[object SVGPathSegCurvetoQuadraticSmoothAbs]'},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+' '+this._x+' '+this._y},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,'x',{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,'y',{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothRel=function(e,t,a){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL,'t',e),this._x=t,this._y=a},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.toString=function(){return'[object SVGPathSegCurvetoQuadraticSmoothRel]'},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+' '+this._x+' '+this._y},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,'x',{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,'y',{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),window.SVGPathElement.prototype.createSVGPathSegClosePath=function(){return new window.SVGPathSegClosePath(void 0)},window.SVGPathElement.prototype.createSVGPathSegMovetoAbs=function(e,t){return new window.SVGPathSegMovetoAbs(void 0,e,t)},window.SVGPathElement.prototype.createSVGPathSegMovetoRel=function(e,t){return new window.SVGPathSegMovetoRel(void 0,e,t)},window.SVGPathElement.prototype.createSVGPathSegLinetoAbs=function(e,t){return new window.SVGPathSegLinetoAbs(void 0,e,t)},window.SVGPathElement.prototype.createSVGPathSegLinetoRel=function(e,t){return new window.SVGPathSegLinetoRel(void 0,e,t)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs=function(e,t,a,i,r,n){return new window.SVGPathSegCurvetoCubicAbs(void 0,e,t,a,i,r,n)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel=function(e,t,a,i,r,n){return new window.SVGPathSegCurvetoCubicRel(void 0,e,t,a,i,r,n)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs=function(e,t,a,i){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,e,t,a,i)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel=function(e,t,a,i){return new window.SVGPathSegCurvetoQuadraticRel(void 0,e,t,a,i)},window.SVGPathElement.prototype.createSVGPathSegArcAbs=function(e,t,a,i,r,n,s){return new window.SVGPathSegArcAbs(void 0,e,t,a,i,r,n,s)},window.SVGPathElement.prototype.createSVGPathSegArcRel=function(e,t,a,i,r,n,s){return new window.SVGPathSegArcRel(void 0,e,t,a,i,r,n,s)},window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs=function(e){return new window.SVGPathSegLinetoHorizontalAbs(void 0,e)},window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel=function(e){return new window.SVGPathSegLinetoHorizontalRel(void 0,e)},window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs=function(e){return new window.SVGPathSegLinetoVerticalAbs(void 0,e)},window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel=function(e){return new window.SVGPathSegLinetoVerticalRel(void 0,e)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs=function(e,t,a,i){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,e,t,a,i)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel=function(e,t,a,i){return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,e,t,a,i)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs=function(e,t){return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,e,t)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel=function(e,t){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,e,t)},!('getPathSegAtLength'in window.SVGPathElement.prototype)&&(window.SVGPathElement.prototype.getPathSegAtLength=function(e){if(void 0===e||!isFinite(e))throw'Invalid arguments.';var t=document.createElementNS('http://www.w3.org/2000/svg','path');t.setAttribute('d',this.getAttribute('d'));var a=t.pathSegList.numberOfItems-1;if(0>=a)return 0;do{if(t.pathSegList.removeItem(a),e>t.getTotalLength())break;a--}while(0<a);return a})),'SVGPathSegList'in window||(window.SVGPathSegList=function(e){this._pathElement=e,this._list=this._parsePath(this._pathElement.getAttribute('d')),this._mutationObserverConfig={attributes:!0,attributeFilter:['d']},this._pathElementMutationObserver=new MutationObserver(this._updateListFromPathMutations.bind(this)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},window.SVGPathSegList.prototype.classname='SVGPathSegList',Object.defineProperty(window.SVGPathSegList.prototype,'numberOfItems',{get:function(){return this._checkPathSynchronizedToList(),this._list.length},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,'pathSegList',{get:function(){return this._pathSegList||(this._pathSegList=new window.SVGPathSegList(this)),this._pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,'normalizedPathSegList',{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,'animatedPathSegList',{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,'animatedNormalizedPathSegList',{get:function(){return this.pathSegList},enumerable:!0}),window.SVGPathSegList.prototype._checkPathSynchronizedToList=function(){this._updateListFromPathMutations(this._pathElementMutationObserver.takeRecords())},window.SVGPathSegList.prototype._updateListFromPathMutations=function(e){if(this._pathElement){var t=!1;e.forEach(function(e){'d'==e.attributeName&&(t=!0)}),t&&(this._list=this._parsePath(this._pathElement.getAttribute('d')))}},window.SVGPathSegList.prototype._writeListToPath=function(){this._pathElementMutationObserver.disconnect(),this._pathElement.setAttribute('d',window.SVGPathSegList._pathSegArrayAsString(this._list)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},window.SVGPathSegList.prototype.segmentChanged=function(){this._writeListToPath()},window.SVGPathSegList.prototype.clear=function(){this._checkPathSynchronizedToList(),this._list.forEach(function(e){e._owningPathSegList=null}),this._list=[],this._writeListToPath()},window.SVGPathSegList.prototype.initialize=function(e){return this._checkPathSynchronizedToList(),this._list=[e],e._owningPathSegList=this,this._writeListToPath(),e},window.SVGPathSegList.prototype._checkValidIndex=function(e){if(isNaN(e)||0>e||e>=this.numberOfItems)throw'INDEX_SIZE_ERR'},window.SVGPathSegList.prototype.getItem=function(e){return this._checkPathSynchronizedToList(),this._checkValidIndex(e),this._list[e]},window.SVGPathSegList.prototype.insertItemBefore=function(e,t){return this._checkPathSynchronizedToList(),t>this.numberOfItems&&(t=this.numberOfItems),e._owningPathSegList&&(e=e.clone()),this._list.splice(t,0,e),e._owningPathSegList=this,this._writeListToPath(),e},window.SVGPathSegList.prototype.replaceItem=function(e,t){return this._checkPathSynchronizedToList(),e._owningPathSegList&&(e=e.clone()),this._checkValidIndex(t),this._list[t]=e,e._owningPathSegList=this,this._writeListToPath(),e},window.SVGPathSegList.prototype.removeItem=function(e){this._checkPathSynchronizedToList(),this._checkValidIndex(e);var t=this._list[e];return this._list.splice(e,1),this._writeListToPath(),t},window.SVGPathSegList.prototype.appendItem=function(e){return this._checkPathSynchronizedToList(),e._owningPathSegList&&(e=e.clone()),this._list.push(e),e._owningPathSegList=this,this._writeListToPath(),e},window.SVGPathSegList._pathSegArrayAsString=function(e){var t='',a=!0;return e.forEach(function(e){a?(a=!1,t+=e._asPathString()):t+=' '+e._asPathString()}),t},window.SVGPathSegList.prototype._parsePath=function(e){if(!e||0==e.length)return[];var t=this,a=function(){this.pathSegList=[]};a.prototype.appendSegment=function(e){this.pathSegList.push(e)};var i=function(e){this._string=e,this._currentIndex=0,this._endIndex=this._string.length,this._previousCommand=window.SVGPathSeg.PATHSEG_UNKNOWN,this._skipOptionalSpaces()};i.prototype._isCurrentSpace=function(){var e=this._string[this._currentIndex];return' '>=e&&(' '==e||'\n'==e||'\t'==e||'\r'==e||'\f'==e)},i.prototype._skipOptionalSpaces=function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex++;return this._currentIndex<this._endIndex},i.prototype._skipOptionalSpacesOrDelimiter=function(){return this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&','!=this._string.charAt(this._currentIndex)?!1:(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&','==this._string.charAt(this._currentIndex)&&(this._currentIndex++,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)},i.prototype.hasMoreData=function(){return this._currentIndex<this._endIndex},i.prototype.peekSegmentType=function(){var e=this._string[this._currentIndex];return this._pathSegTypeFromChar(e)},i.prototype._pathSegTypeFromChar=function(e){return'Z'===e||'z'===e?window.SVGPathSeg.PATHSEG_CLOSEPATH:'M'===e?window.SVGPathSeg.PATHSEG_MOVETO_ABS:'m'===e?window.SVGPathSeg.PATHSEG_MOVETO_REL:'L'===e?window.SVGPathSeg.PATHSEG_LINETO_ABS:'l'===e?window.SVGPathSeg.PATHSEG_LINETO_REL:'C'===e?window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:'c'===e?window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:'Q'===e?window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:'q'===e?window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:'A'===e?window.SVGPathSeg.PATHSEG_ARC_ABS:'a'===e?window.SVGPathSeg.PATHSEG_ARC_REL:'H'===e?window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:'h'===e?window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:'V'===e?window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:'v'===e?window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:'S'===e?window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:'s'===e?window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:'T'===e?window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:'t'===e?window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:window.SVGPathSeg.PATHSEG_UNKNOWN},i.prototype._nextCommandHelper=function(e,t){return('+'==e||'-'==e||'.'==e||'0'<=e&&'9'>=e)&&t!=window.SVGPathSeg.PATHSEG_CLOSEPATH?t==window.SVGPathSeg.PATHSEG_MOVETO_ABS?window.SVGPathSeg.PATHSEG_LINETO_ABS:t==window.SVGPathSeg.PATHSEG_MOVETO_REL?window.SVGPathSeg.PATHSEG_LINETO_REL:t:window.SVGPathSeg.PATHSEG_UNKNOWN},i.prototype.initialCommandIsMoveTo=function(){if(!this.hasMoreData())return!0;var e=this.peekSegmentType();return e==window.SVGPathSeg.PATHSEG_MOVETO_ABS||e==window.SVGPathSeg.PATHSEG_MOVETO_REL},i.prototype._parseNumber=function(){var e=0,t=0,a=1,i=0,r=1,n=1,s=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&'+'==this._string.charAt(this._currentIndex)?this._currentIndex++:this._currentIndex<this._endIndex&&'-'==this._string.charAt(this._currentIndex)&&(this._currentIndex++,r=-1),!(this._currentIndex==this._endIndex||('0'>this._string.charAt(this._currentIndex)||'9'<this._string.charAt(this._currentIndex))&&'.'!=this._string.charAt(this._currentIndex))){for(var d=this._currentIndex;this._currentIndex<this._endIndex&&'0'<=this._string.charAt(this._currentIndex)&&'9'>=this._string.charAt(this._currentIndex);)this._currentIndex++;if(this._currentIndex!=d)for(var l=this._currentIndex-1,g=1;l>=d;)t+=g*(this._string.charAt(l--)-'0'),g*=10;if(this._currentIndex<this._endIndex&&'.'==this._string.charAt(this._currentIndex)){if(this._currentIndex++,this._currentIndex>=this._endIndex||'0'>this._string.charAt(this._currentIndex)||'9'<this._string.charAt(this._currentIndex))return;for(;this._currentIndex<this._endIndex&&'0'<=this._string.charAt(this._currentIndex)&&'9'>=this._string.charAt(this._currentIndex);)a*=10,i+=(this._string.charAt(this._currentIndex)-'0')/a,this._currentIndex+=1}if(this._currentIndex!=s&&this._currentIndex+1<this._endIndex&&('e'==this._string.charAt(this._currentIndex)||'E'==this._string.charAt(this._currentIndex))&&'x'!=this._string.charAt(this._currentIndex+1)&&'m'!=this._string.charAt(this._currentIndex+1)){if(this._currentIndex++,'+'==this._string.charAt(this._currentIndex)?this._currentIndex++:'-'==this._string.charAt(this._currentIndex)&&(this._currentIndex++,n=-1),this._currentIndex>=this._endIndex||'0'>this._string.charAt(this._currentIndex)||'9'<this._string.charAt(this._currentIndex))return;for(;this._currentIndex<this._endIndex&&'0'<=this._string.charAt(this._currentIndex)&&'9'>=this._string.charAt(this._currentIndex);)e*=10,e+=this._string.charAt(this._currentIndex)-'0',this._currentIndex++}var c=t+i;if(c*=r,e&&(c*=o(10,n*e)),s!=this._currentIndex)return this._skipOptionalSpacesOrDelimiter(),c}},i.prototype._parseArcFlag=function(){if(!(this._currentIndex>=this._endIndex)){var e=!1,t=this._string.charAt(this._currentIndex++);if('0'==t)e=!1;else if('1'==t)e=!0;else return;return this._skipOptionalSpacesOrDelimiter(),e}},i.prototype.parseSegment=function(){var e=this._string[this._currentIndex],a=this._pathSegTypeFromChar(e);if(a==window.SVGPathSeg.PATHSEG_UNKNOWN){if(this._previousCommand==window.SVGPathSeg.PATHSEG_UNKNOWN)return null;if(a=this._nextCommandHelper(e,this._previousCommand),a==window.SVGPathSeg.PATHSEG_UNKNOWN)return null}else this._currentIndex++;switch(this._previousCommand=a,a){case window.SVGPathSeg.PATHSEG_MOVETO_REL:return new window.SVGPathSegMovetoRel(t,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_MOVETO_ABS:return new window.SVGPathSegMovetoAbs(t,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_REL:return new window.SVGPathSegLinetoRel(t,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_ABS:return new window.SVGPathSegLinetoAbs(t,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:return new window.SVGPathSegLinetoHorizontalRel(t,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:return new window.SVGPathSegLinetoHorizontalAbs(t,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:return new window.SVGPathSegLinetoVerticalRel(t,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:return new window.SVGPathSegLinetoVerticalAbs(t,this._parseNumber());case window.SVGPathSeg.PATHSEG_CLOSEPATH:return this._skipOptionalSpaces(),new window.SVGPathSegClosePath(t);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:var i={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoCubicRel(t,i.x,i.y,i.x1,i.y1,i.x2,i.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:var i={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoCubicAbs(t,i.x,i.y,i.x1,i.y1,i.x2,i.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:var i={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoCubicSmoothRel(t,i.x,i.y,i.x2,i.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:var i={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoCubicSmoothAbs(t,i.x,i.y,i.x2,i.y2);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:var i={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoQuadraticRel(t,i.x,i.y,i.x1,i.y1);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:var i={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoQuadraticAbs(t,i.x,i.y,i.x1,i.y1);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:return new window.SVGPathSegCurvetoQuadraticSmoothRel(t,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:return new window.SVGPathSegCurvetoQuadraticSmoothAbs(t,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_ARC_REL:var i={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegArcRel(t,i.x,i.y,i.x1,i.y1,i.arcAngle,i.arcLarge,i.arcSweep);case window.SVGPathSeg.PATHSEG_ARC_ABS:var i={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegArcAbs(t,i.x,i.y,i.x1,i.y1,i.arcAngle,i.arcLarge,i.arcSweep);default:throw'Unknown path seg type.';}};var r=new a,n=new i(e);if(!n.initialCommandIsMoveTo())return[];for(;n.hasMoreData();){var s=n.parseSegment();if(!s)return[];r.appendSegment(s)}return r.pathSegList})}(),D.axis=function(){},D.axis.labels=function(e){var t=this.internal;arguments.length&&(Object.keys(e).forEach(function(a){t.axis.setLabelText(a,e[a])}),t.axis.updateLabels())},D.axis.max=function(e){var t=this.internal,a=t.config;return arguments.length?void('object'===('undefined'===typeof e?'undefined':_(e))?(y(e.x)&&(a.axis_x_max=e.x),y(e.y)&&(a.axis_y_max=e.y),y(e.y2)&&(a.axis_y2_max=e.y2)):a.axis_y_max=a.axis_y2_max=e,t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})):{x:a.axis_x_max,y:a.axis_y_max,y2:a.axis_y2_max}},D.axis.min=function(e){var t=this.internal,a=t.config;return arguments.length?void('object'===('undefined'===typeof e?'undefined':_(e))?(y(e.x)&&(a.axis_x_min=e.x),y(e.y)&&(a.axis_y_min=e.y),y(e.y2)&&(a.axis_y2_min=e.y2)):a.axis_y_min=a.axis_y2_min=e,t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})):{x:a.axis_x_min,y:a.axis_y_min,y2:a.axis_y2_min}},D.axis.range=function(e){return arguments.length?void(A(e.max)&&this.axis.max(e.max),A(e.min)&&this.axis.min(e.min)):{max:this.axis.max(),min:this.axis.min()}},D.category=function(e,t){var a=this.internal,i=a.config;return 1<arguments.length&&(i.axis_x_categories[e]=t,a.redraw()),i.axis_x_categories[e]},D.categories=function(e){var t=this.internal,a=t.config;return arguments.length?(a.axis_x_categories=e,t.redraw(),a.axis_x_categories):a.axis_x_categories},D.resize=function(e){var t=this.internal,a=t.config;a.size_width=e?e.width:null,a.size_height=e?e.height:null,this.flush()},D.flush=function(){var e=this.internal;e.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})},D.destroy=function(){var e=this.internal;if(window.clearInterval(e.intervalForObserveInserted),void 0!==e.resizeTimeout&&window.clearTimeout(e.resizeTimeout),window.detachEvent)window.detachEvent('onresize',e.resizeIfElementDisplayed);else if(window.removeEventListener)window.removeEventListener('resize',e.resizeIfElementDisplayed);else{var t=window.onresize;t&&t.add&&t.remove&&t.remove(e.resizeFunction)}return e.resizeFunction.remove(),e.selectChart.classed('c3',!1).html(''),Object.keys(e).forEach(function(t){e[t]=null}),null},D.color=function(e){var t=this.internal;return t.color(e)},D.data=function(e){var t=this.internal.data.targets;return'undefined'===typeof e?t:t.filter(function(a){return 0<=[].concat(e).indexOf(a.id)})},D.data.shown=function(e){return this.internal.filterTargetsToShow(this.data(e))},D.data.values=function(e){var t=null,a;return e&&(a=this.data(e),t=a[0]?a[0].values.map(function(e){return e.value}):null),t},D.data.names=function(e){return this.internal.clearLegendItemTextBoxCache(),this.internal.updateDataAttributes('names',e)},D.data.colors=function(e){return this.internal.updateDataAttributes('colors',e)},D.data.axes=function(e){return this.internal.updateDataAttributes('axes',e)},D.flow=function(e){var a=this.internal,r=[],t=a.getMaxDataCount(),n=0,s=0,o,i,d,l,g,c,p,_;if(e.json)i=a.convertJsonToData(e.json,e.keys);else if(e.rows)i=a.convertRowsToData(e.rows);else if(e.columns)i=a.convertColumnsToData(e.columns);else return;o=a.convertDataToTargets(i,!0),a.data.targets.forEach(function(e){var t=!1,d,i;for(d=0;d<o.length;d++)if(e.id===o[d].id){for(t=!0,e.values[e.values.length-1]&&(s=e.values[e.values.length-1].index+1),n=o[d].values.length,i=0;i<n;i++)o[d].values[i].index=s+i,a.isTimeSeries()||(o[d].values[i].x=s+i);e.values=e.values.concat(o[d].values),o.splice(d,1);break}t||r.push(e.id)}),a.data.targets.forEach(function(e){var t,i;for(t=0;t<r.length;t++)if(e.id===r[t])for(s=e.values[e.values.length-1].index+1,i=0;i<n;i++)e.values.push({id:e.id,index:s+i,x:a.isTimeSeries()?a.getOtherTargetX(s+i):s+i,value:null})}),a.data.targets.length&&o.forEach(function(e){var t=[],r;for(r=a.data.targets[0].values[0].index;r<s;r++)t.push({id:e.id,index:r,x:a.isTimeSeries()?a.getOtherTargetX(r):r,value:null});e.values.forEach(function(e){e.index+=s,a.isTimeSeries()||(e.x+=s)}),e.values=t.concat(e.values)}),a.data.targets=a.data.targets.concat(o),d=a.getMaxDataCount(),g=a.data.targets[0],c=g.values[0],A(e.to)?(n=0,_=a.isTimeSeries()?a.parseDate(e.to):e.to,g.values.forEach(function(e){e.x<_&&n++})):A(e.length)&&(n=e.length),t?1===t&&a.isTimeSeries()&&(p=(g.values[g.values.length-1].x-c.x)/2,l=[new Date(+c.x-p),new Date(+c.x+p)],a.updateXDomain(null,!0,!0,!1,l)):(p=a.isTimeSeries()?1<g.values.length?g.values[g.values.length-1].x-c.x:c.x-a.getXDomain(a.data.targets)[0]:1,l=[c.x-p,c.x],a.updateXDomain(null,!0,!0,!1,l)),a.updateTargets(a.data.targets),a.redraw({flow:{index:c.index,length:n,duration:y(e.duration)?e.duration:a.config.transition_duration,done:e.done,orgDataCount:t},withLegend:!0,withTransition:1<t,withTrimXDomain:!1,withUpdateXAxis:!0})},F.generateFlow=function(e){var t=this,a=t.config,i=t.d3;return function(){var r=e.targets,n=e.flow,s=e.drawBar,o=e.drawLine,d=e.drawArea,l=e.cx,g=e.cy,c=e.xv,_=e.xForText,h=e.yForText,x=e.duration,u=1,y=n.index,m=n.length,S=t.getValueOnIndex(t.data.targets[0].values,y),f=t.getValueOnIndex(t.data.targets[0].values,y+m),T=t.x.domain(),A=n.duration||x,b=n.done||function(){},P=t.generateWait(),L=t.xgrid||i.selectAll([]),C=t.xgridLines||i.selectAll([]),V=t.mainRegion||i.selectAll([]),G=t.mainText||i.selectAll([]),w=t.mainBar||i.selectAll([]),E=t.mainLine||i.selectAll([]),I=t.mainArea||i.selectAll([]),R=t.mainCircle||i.selectAll([]),k,O,D;t.flowing=!0,t.data.targets.forEach(function(e){e.values.splice(0,m)}),D=t.updateXDomain(r,!0,!0),t.updateXGrid&&t.updateXGrid(!0),n.orgDataCount?1===n.orgDataCount||(S&&S.x)===(f&&f.x)?k=t.x(T[0])-t.x(D[0]):t.isTimeSeries()?k=t.x(T[0])-t.x(D[0]):k=t.x(S.x)-t.x(f.x):1===t.data.targets[0].values.length?t.isTimeSeries()?(S=t.getValueOnIndex(t.data.targets[0].values,0),f=t.getValueOnIndex(t.data.targets[0].values,t.data.targets[0].values.length-1),k=t.x(S.x)-t.x(f.x)):k=v(D)/2:k=t.x(T[0])-t.x(D[0]),u=v(T)/v(D),O='translate('+k+',0) scale('+u+',1)',t.hideXGridFocus(),i.transition().ease('linear').duration(A).each(function(){P.add(t.axes.x.transition().call(t.xAxis)),P.add(w.transition().attr('transform',O)),P.add(E.transition().attr('transform',O)),P.add(I.transition().attr('transform',O)),P.add(R.transition().attr('transform',O)),P.add(G.transition().attr('transform',O)),P.add(V.filter(t.isRegionOnX).transition().attr('transform',O)),P.add(L.transition().attr('transform',O)),P.add(C.transition().attr('transform',O))}).call(P,function(){var e=[],r=[],n=[],x;if(m){for(x=0;x<m;x++)e.push('.'+p.shape+'-'+(y+x)),r.push('.'+p.text+'-'+(y+x)),n.push('.'+p.eventRect+'-'+(y+x));t.svg.selectAll('.'+p.shapes).selectAll(e).remove(),t.svg.selectAll('.'+p.texts).selectAll(r).remove(),t.svg.selectAll('.'+p.eventRects).selectAll(n).remove(),t.svg.select('.'+p.xgrid).remove()}L.attr('transform',null).attr(t.xgridAttr),C.attr('transform',null),C.select('line').attr('x1',a.axis_rotated?0:c).attr('x2',a.axis_rotated?t.width:c),C.select('text').attr('x',a.axis_rotated?t.width:0).attr('y',c),w.attr('transform',null).attr('d',s),E.attr('transform',null).attr('d',o),I.attr('transform',null).attr('d',d),R.attr('transform',null).attr('cx',l).attr('cy',g),G.attr('transform',null).attr('x',_).attr('y',h).style('fill-opacity',t.opacityForText.bind(t)),V.attr('transform',null),V.select('rect').filter(t.isRegionOnX).attr('x',t.regionX.bind(t)).attr('width',t.regionWidth.bind(t)),a.interaction_enabled&&t.redrawEventRect(),b(),t.flowing=!1})}},D.focus=function(e){var t=this.internal,a;e=t.mapToTargetIds(e),a=t.svg.selectAll(t.selectorTargets(e.filter(t.isTargetToShow,t))),this.revert(),this.defocus(),a.classed(p.focused,!0).classed(p.defocused,!1),t.hasArcType()&&t.expandArc(e),t.toggleFocusLegend(e,!0),t.focusedTargetIds=e,t.defocusedTargetIds=t.defocusedTargetIds.filter(function(t){return 0>e.indexOf(t)})},D.defocus=function(e){var t=this.internal,a;e=t.mapToTargetIds(e),a=t.svg.selectAll(t.selectorTargets(e.filter(t.isTargetToShow,t))),a.classed(p.focused,!1).classed(p.defocused,!0),t.hasArcType()&&t.unexpandArc(e),t.toggleFocusLegend(e,!1),t.focusedTargetIds=t.focusedTargetIds.filter(function(t){return 0>e.indexOf(t)}),t.defocusedTargetIds=e},D.revert=function(e){var t=this.internal,a;e=t.mapToTargetIds(e),a=t.svg.selectAll(t.selectorTargets(e)),a.classed(p.focused,!1).classed(p.defocused,!1),t.hasArcType()&&t.unexpandArc(e),t.config.legend_show&&(t.showLegend(e.filter(t.isLegendToShow.bind(t))),t.legend.selectAll(t.selectorLegends(e)).filter(function(){return t.d3.select(this).classed(p.legendItemFocused)}).classed(p.legendItemFocused,!1)),t.focusedTargetIds=[],t.defocusedTargetIds=[]},D.xgrids=function(e){var t=this.internal,a=t.config;return e?(a.grid_x_lines=e,t.redrawWithoutRescale(),a.grid_x_lines):a.grid_x_lines},D.xgrids.add=function(e){var t=this.internal;return this.xgrids(t.config.grid_x_lines.concat(e?e:[]))},D.xgrids.remove=function(e){var t=this.internal;t.removeGridLines(e,!0)},D.ygrids=function(e){var t=this.internal,a=t.config;return e?(a.grid_y_lines=e,t.redrawWithoutRescale(),a.grid_y_lines):a.grid_y_lines},D.ygrids.add=function(e){var t=this.internal;return this.ygrids(t.config.grid_y_lines.concat(e?e:[]))},D.ygrids.remove=function(e){var t=this.internal;t.removeGridLines(e,!1)},D.groups=function(e){var t=this.internal,a=t.config;return T(e)?a.data_groups:(a.data_groups=e,t.redraw(),a.data_groups)},D.legend=function(){},D.legend.show=function(e){var t=this.internal;t.showLegend(t.mapToTargetIds(e)),t.updateAndRedraw({withLegend:!0})},D.legend.hide=function(e){var t=this.internal;t.hideLegend(t.mapToTargetIds(e)),t.updateAndRedraw({withLegend:!0})},D.load=function(e){var t=this.internal,a=t.config;return e.xs&&t.addXs(e.xs),'names'in e&&D.data.names.bind(this)(e.names),'classes'in e&&Object.keys(e.classes).forEach(function(t){a.data_classes[t]=e.classes[t]}),'categories'in e&&t.isCategorized()&&(a.axis_x_categories=e.categories),'axes'in e&&Object.keys(e.axes).forEach(function(t){a.data_axes[t]=e.axes[t]}),'colors'in e&&Object.keys(e.colors).forEach(function(t){a.data_colors[t]=e.colors[t]}),'cacheIds'in e&&t.hasCaches(e.cacheIds)?void t.load(t.getCaches(e.cacheIds),e.done):void('unload'in e?t.unload(t.mapToTargetIds('boolean'===typeof e.unload&&e.unload?null:e.unload),function(){t.loadFromArgs(e)}):t.loadFromArgs(e))},D.unload=function(e){var t=this.internal;e=e||{},e instanceof Array?e={ids:e}:'string'===typeof e&&(e={ids:[e]}),t.unload(t.mapToTargetIds(e.ids),function(){t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),e.done&&e.done()})},D.regions=function(e){var t=this.internal,a=t.config;return e?(a.regions=e,t.redrawWithoutRescale(),a.regions):a.regions},D.regions.add=function(e){var t=this.internal,a=t.config;return e?(a.regions=a.regions.concat(e),t.redrawWithoutRescale(),a.regions):a.regions},D.regions.remove=function(e){var t=this.internal,a=t.config,i,r,n;return e=e||{},i=t.getOption(e,'duration',a.transition_duration),r=t.getOption(e,'classes',[p.region]),n=t.main.select('.'+p.regions).selectAll(r.map(function(e){return'.'+e})),(i?n.transition().duration(i):n).style('opacity',0).remove(),a.regions=a.regions.filter(function(e){var t=!1;return!e['class']||(e['class'].split(' ').forEach(function(e){0<=r.indexOf(e)&&(t=!0)}),!t)}),a.regions},D.selected=function(e){var t=this.internal,a=t.d3;return a.merge(t.main.selectAll('.'+p.shapes+t.getTargetSelectorSuffix(e)).selectAll('.'+p.shape).filter(function(){return a.select(this).classed(p.SELECTED)}).map(function(e){return e.map(function(e){var t=e.__data__;return t.data?t.data:t})}))},D.select=function(e,t,a){var r=this.internal,n=r.d3,s=r.config;s.data_selection_enabled&&r.main.selectAll('.'+p.shapes).selectAll('.'+p.shape).each(function(o,d){var i=n.select(this),l=o.data?o.data.id:o.id,g=r.getToggle(this,o).bind(r),c=s.data_selection_grouped||!e||0<=e.indexOf(l),_=!t||0<=t.indexOf(d),h=i.classed(p.SELECTED);i.classed(p.line)||i.classed(p.area)||(c&&_?s.data_selection_isselectable(o)&&!h&&g(!0,i.classed(p.SELECTED,!0),o,d):A(a)&&a&&h&&g(!1,i.classed(p.SELECTED,!1),o,d))})},D.unselect=function(e,t){var a=this.internal,r=a.d3,n=a.config;n.data_selection_enabled&&a.main.selectAll('.'+p.shapes).selectAll('.'+p.shape).each(function(s,o){var i=r.select(this),d=s.data?s.data.id:s.id,l=a.getToggle(this,s).bind(a),g=n.data_selection_grouped||!e||0<=e.indexOf(d),c=!t||0<=t.indexOf(o),_=i.classed(p.SELECTED);i.classed(p.line)||i.classed(p.area)||g&&c&&n.data_selection_isselectable(s)&&_&&l(!1,i.classed(p.SELECTED,!1),s,o)})},D.show=function(e,t){var a=this.internal,i;e=a.mapToTargetIds(e),t=t||{},a.removeHiddenTargetIds(e),i=a.svg.selectAll(a.selectorTargets(e)),i.transition().style('opacity',1,'important').call(a.endall,function(){i.style('opacity',null).style('opacity',1)}),t.withLegend&&a.showLegend(e),a.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},D.hide=function(e,t){var a=this.internal,i;e=a.mapToTargetIds(e),t=t||{},a.addHiddenTargetIds(e),i=a.svg.selectAll(a.selectorTargets(e)),i.transition().style('opacity',0,'important').call(a.endall,function(){i.style('opacity',null).style('opacity',0)}),t.withLegend&&a.hideLegend(e),a.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},D.toggle=function(e,t){var a=this,i=this.internal;i.mapToTargetIds(e).forEach(function(e){i.isTargetToShow(e)?a.hide(e,t):a.show(e,t)})},D.tooltip=function(){},D.tooltip.show=function(e){var t=this.internal,a,i;e.mouse&&(i=e.mouse),e.data?t.isMultipleX()?(i=[t.x(e.data.x),t.getYScale(e.data.id)(e.data.value)],a=null):a=y(e.data.index)?e.data.index:t.getIndexByX(e.data.x):'undefined'===typeof e.x?'undefined'!==typeof e.index&&(a=e.index):a=t.getIndexByX(e.x),t.dispatchEvent('mouseover',a,i),t.dispatchEvent('mousemove',a,i),t.config.tooltip_onshow.call(t,e.data)},D.tooltip.hide=function(){this.internal.dispatchEvent('mouseout',0),this.internal.config.tooltip_onhide.call(this)},D.transform=function(e,t){var a=this.internal,i=0<=['pie','donut'].indexOf(e)?{withTransform:!0}:null;a.transformTo(t,e,i)},F.transformTo=function(e,t,a){var i=this,r=!i.hasArcType(),n=a||{withTransitionForAxis:r};n.withTransitionForTransform=!1,i.transiting=!1,i.setTargetType(e,t),i.updateTargets(i.data.targets),i.updateAndRedraw(n)},D.x=function(e){var t=this.internal;return arguments.length&&(t.updateTargetX(t.data.targets,e),t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),t.data.xs},D.xs=function(e){var t=this.internal;return arguments.length&&(t.updateTargetXs(t.data.targets,e),t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),t.data.xs},D.zoom=function(e){var t=this.internal;return e&&(t.isTimeSeries()&&(e=e.map(function(e){return t.parseDate(e)})),t.brush.extent(e),t.redraw({withUpdateXDomain:!0,withY:t.config.zoom_rescale}),t.config.zoom_onzoom.call(this,t.x.orgDomain())),t.brush.extent()},D.zoom.enable=function(e){var t=this.internal;t.config.zoom_enabled=e,t.updateAndRedraw()},D.unzoom=function(){var e=this.internal;e.brush.clear().update(),e.redraw({withUpdateXDomain:!0})},D.zoom.max=function(e){var t=this.internal,a=t.config,i=t.d3;return 0===e||e?void(a.zoom_x_max=i.max([t.orgXDomain[1],e])):a.zoom_x_max},D.zoom.min=function(e){var t=this.internal,a=t.config,i=t.d3;return 0===e||e?void(a.zoom_x_min=i.min([t.orgXDomain[0],e])):a.zoom_x_min},D.zoom.range=function(e){return arguments.length?void(A(e.max)&&this.domain.max(e.max),A(e.min)&&this.domain.min(e.min)):{max:this.domain.max(),min:this.domain.min()}},F.initPie=function(){var e=this,t=e.d3;e.pie=t.layout.pie().value(function(e){return e.values.reduce(function(e,t){return e+t.value},0)}),e.pie.sort(e.getOrderFunction()||null)},F.updateRadius=function(){var e=this,t=e.config,a=t.gauge_width||t.donut_width,i=e.filterTargetsToShow(e.data.targets).length*e.config.gauge_arcs_minWidth;e.radiusExpanded=d(e.arcWidth,e.arcHeight)/2*(e.hasType('gauge')?0.85:1),e.radius=0.95*e.radiusExpanded,e.innerRadiusRatio=a?(e.radius-a)/e.radius:0.6,e.innerRadius=e.hasType('donut')||e.hasType('gauge')?e.radius*e.innerRadiusRatio:0,e.gaugeArcWidth=a?a:i<=e.radius-e.innerRadius?e.radius-e.innerRadius:i<=e.radius?i:e.radius},F.updateArc=function(){var e=this;e.svgArc=e.getSvgArc(),e.svgArcExpanded=e.getSvgArcExpanded(),e.svgArcExpandedSub=e.getSvgArcExpanded(0.98)},F.updateAngle=function(e){var t=this,a=t.config,i=!1,r=0,n,s,o,d;return a?(t.pie(t.filterTargetsToShow(t.data.targets)).forEach(function(a){i||a.data.id!==e.data.id||(i=!0,e=a,e.index=r),r++}),isNaN(e.startAngle)&&(e.startAngle=0),isNaN(e.endAngle)&&(e.endAngle=e.startAngle),t.isGaugeType(e.data)&&(n=a.gauge_min,s=a.gauge_max,o=l*(a.gauge_fullCircle?2:1)/(s-n),d=e.value<n?0:e.value<s?e.value-n:s-n,e.startAngle=a.gauge_startingAngle,e.endAngle=e.startAngle+o*d),i?e:null):null},F.getSvgArc=function(){var e=this,t=e.hasType('gauge'),a=e.gaugeArcWidth/e.filterTargetsToShow(e.data.targets).length,i=e.d3.svg.arc().outerRadius(function(i){return t?e.radius-a*i.index:e.radius}).innerRadius(function(i){return t?e.radius-a*(i.index+1):e.innerRadius}),r=function(t,a){var r;return a?i(t):(r=e.updateAngle(t),r?i(r):'M 0 0')};return r.centroid=i.centroid,r},F.getSvgArcExpanded=function(e){e=e||1;var t=this,a=t.hasType('gauge'),i=t.gaugeArcWidth/t.filterTargetsToShow(t.data.targets).length,r=d(t.radiusExpanded*e-t.radius,0.8*i-100*(1-e)),n=t.d3.svg.arc().outerRadius(function(n){return a?t.radius-i*n.index+r:t.radiusExpanded*e}).innerRadius(function(e){return a?t.radius-i*(e.index+1):t.innerRadius});return function(e){var a=t.updateAngle(e);return a?n(a):'M 0 0'}},F.getArc=function(e,t,a){return a||this.isArcType(e.data)?this.svgArc(e,t):'M 0 0'},F.transformForArcLabel=function(e){var t=this,a=t.config,o=t.updateAngle(e),d='',g=t.hasType('gauge'),p,c,_,x,h;if(o&&!g)p=this.svgArc.centroid(o),c=isNaN(p[0])?0:p[0],_=isNaN(p[1])?0:p[1],x=n(c*c+_*_),h=t.hasType('donut')&&a.donut_label_ratio?m(a.donut_label_ratio)?a.donut_label_ratio(e,t.radius,x):a.donut_label_ratio:t.hasType('pie')&&a.pie_label_ratio?m(a.pie_label_ratio)?a.pie_label_ratio(e,t.radius,x):a.pie_label_ratio:t.radius&&x?(0.375<36/t.radius?1.175-36/t.radius:0.8)*t.radius/x:0,d='translate('+c*h+','+_*h+')';else if(o&&g&&1<t.filterTargetsToShow(t.data.targets).length){var u=s(o.endAngle-l/2);c=r(o.endAngle-l/2)*(t.radiusExpanded+25),_=u*(t.radiusExpanded+15-i(10*u))+3,d='translate('+c+','+_+')'}return d},F.getArcRatio=function(e){var t=this,a=t.config,i=l*(t.hasType('gauge')&&!a.gauge_fullCircle?1:2);return e?(e.endAngle-e.startAngle)/i:null},F.convertToArcData=function(e){return this.addName({id:e.data.id,value:e.value,ratio:this.getArcRatio(e),index:e.index})},F.textForArcLabel=function(e){var t=this,a,i,r,n,s;return t.shouldShowArcLabel()?(a=t.updateAngle(e),i=a?a.value:null,r=t.getArcRatio(a),n=e.data.id,!t.hasType('gauge')&&!t.meetsArcLabelThreshold(r))?'':(s=t.getArcLabelFormat(),s?s(i,r,n):t.defaultArcValueFormat(i,r)):''},F.textForGaugeMinMax=function(e,t){var a=this,i=a.getGaugeLabelExtents();return i?i(e,t):e},F.expandArc=function(e){var t=this,a;return t.transiting?void(a=window.setInterval(function(){t.transiting||(window.clearInterval(a),0<t.legend.selectAll('.c3-legend-item-focused').size()&&t.expandArc(e))},10)):void(e=t.mapToTargetIds(e),t.svg.selectAll(t.selectorTargets(e,'.'+p.chartArc)).each(function(e){t.shouldExpand(e.data.id)&&t.d3.select(this).selectAll('path').transition().duration(t.expandDuration(e.data.id)).attr('d',t.svgArcExpanded).transition().duration(2*t.expandDuration(e.data.id)).attr('d',t.svgArcExpandedSub).each(function(e){t.isDonutType(e.data)})}))},F.unexpandArc=function(e){var t=this;t.transiting||(e=t.mapToTargetIds(e),t.svg.selectAll(t.selectorTargets(e,'.'+p.chartArc)).selectAll('path').transition().duration(function(e){return t.expandDuration(e.data.id)}).attr('d',t.svgArc),t.svg.selectAll('.'+p.arc))},F.expandDuration=function(e){var t=this,a=t.config;return t.isDonutType(e)?a.donut_expand_duration:t.isGaugeType(e)?a.gauge_expand_duration:t.isPieType(e)?a.pie_expand_duration:50},F.shouldExpand=function(e){var t=this,a=t.config;return t.isDonutType(e)&&a.donut_expand||t.isGaugeType(e)&&a.gauge_expand||t.isPieType(e)&&a.pie_expand},F.shouldShowArcLabel=function(){var e=this,t=e.config,a=!0;return e.hasType('donut')?a=t.donut_label_show:e.hasType('pie')&&(a=t.pie_label_show),a},F.meetsArcLabelThreshold=function(e){var t=this,a=t.config,i=t.hasType('donut')?a.donut_label_threshold:a.pie_label_threshold;return e>=i},F.getArcLabelFormat=function(){var e=this,t=e.config,a=t.pie_label_format;return e.hasType('gauge')?a=t.gauge_label_format:e.hasType('donut')&&(a=t.donut_label_format),a},F.getGaugeLabelExtents=function(){var e=this,t=e.config;return t.gauge_label_extents},F.getArcTitle=function(){var e=this;return e.hasType('donut')?e.config.donut_title:''},F.updateTargetsForArc=function(e){var t=this,a=t.main,i=t.classChartArc.bind(t),r=t.classArcs.bind(t),n=t.classFocus.bind(t),s,o;s=a.select('.'+p.chartArcs).selectAll('.'+p.chartArc).data(t.pie(e)).attr('class',function(e){return i(e)+n(e.data)}),o=s.enter().append('g').attr('class',i),o.append('g').attr('class',r),o.append('text').attr('dy',t.hasType('gauge')?'-.1em':'.35em').style('opacity',0).style('text-anchor','middle').style('pointer-events','none')},F.initArc=function(){var e=this;e.arcs=e.main.select('.'+p.chart).append('g').attr('class',p.chartArcs).attr('transform',e.getTranslate('arc')),e.arcs.append('text').attr('class',p.chartArcsTitle).style('text-anchor','middle').text(e.getArcTitle())},F.redrawArc=function(e,t,a){var n=this,i=n.d3,o=n.config,d=n.main,g=n.hasType('gauge'),c,_,h;if(c=d.selectAll('.'+p.arcs).selectAll('.'+p.arc).data(n.arcData.bind(n)),c.enter().append('path').attr('class',n.classArc.bind(n)).style('fill',function(e){return n.color(e.data)}).style('cursor',function(e){return o.interaction_enabled&&o.data_selection_isselectable(e)?'pointer':null}).each(function(e){n.isGaugeType(e.data)&&(e.startAngle=e.endAngle=o.gauge_startingAngle),this._current=e}),g&&(h=d.selectAll('.'+p.arcs).selectAll('.'+p.arcLabelLine).data(n.arcData.bind(n)),h.enter().append('rect').attr('class',function(e){return p.arcLabelLine+' '+p.target+' '+p.target+'-'+e.data.id}),1===n.filterTargetsToShow(n.data.targets).length?h.style('display','none'):h.style('fill',function(e){return 0<o.color_pattern.length?n.levelColor(e.data.values[0].value):n.color(e.data)}).style('display',o.gauge_labelLine_show?'':'none').each(function(e){var t=0,a=2,o=0,d=0,g='';if(0>n.hiddenTargetIds.indexOf(e.data.id)){var c=n.updateAngle(e),p=n.gaugeArcWidth/n.filterTargetsToShow(n.data.targets).length*(c.index+1),_=c.endAngle-l/2,h=n.radius-p,u=_-(0===h?0:1/h);t=n.radiusExpanded-n.radius+p,o=r(u)*h,d=s(u)*h,g='rotate('+180*_/l+', '+o+', '+d+')'}i.select(this).attr({x:o,y:d,width:t,height:a,transform:g}).style('stroke-dasharray','0, '+(t+a)+', 0')})),c.attr('transform',function(e){return!n.isGaugeType(e.data)&&a?'scale(0)':''}).on('mouseover',o.interaction_enabled?function(e){var t,a;n.transiting||(t=n.updateAngle(e),t&&(a=n.convertToArcData(t),n.expandArc(t.data.id),n.api.focus(t.data.id),n.toggleFocusLegend(t.data.id,!0),n.config.data_onmouseover(a,this)))}:null).on('mousemove',o.interaction_enabled?function(e){var t=n.updateAngle(e),a,i;t&&(a=n.convertToArcData(t),i=[a],n.showTooltip(i,this))}:null).on('mouseout',o.interaction_enabled?function(e){var t,a;n.transiting||(t=n.updateAngle(e),t&&(a=n.convertToArcData(t),n.unexpandArc(t.data.id),n.api.revert(),n.revertLegend(),n.hideTooltip(),n.config.data_onmouseout(a,this)))}:null).on('click',o.interaction_enabled?function(e,t){var a=n.updateAngle(e),i;a&&(i=n.convertToArcData(a),n.toggleShape&&n.toggleShape(this,i,t),n.config.data_onclick.call(n.api,i,this))}:null).each(function(){n.transiting=!0}).transition().duration(e).attrTween('d',function(e){var t=n.updateAngle(e),a;return t?(isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle),a=i.interpolate(this._current,t),this._current=a(0),function(i){var t=a(i);return t.data=e.data,n.getArc(t,!0)}):function(){return'M 0 0'}}).attr('transform',a?'scale(1)':'').style('fill',function(e){return n.levelColor?n.levelColor(e.data.values[0].value):n.color(e.data.id)}).call(n.endall,function(){n.transiting=!1}),c.exit().transition().duration(t).style('opacity',0).remove(),d.selectAll('.'+p.chartArc).select('text').style('opacity',0).attr('class',function(e){return n.isGaugeType(e.data)?p.gaugeValue:''}).text(n.textForArcLabel.bind(n)).attr('transform',n.transformForArcLabel.bind(n)).style('font-size',function(e){return n.isGaugeType(e.data)&&1===n.filterTargetsToShow(n.data.targets).length?Math.round(n.radius/5)+'px':''}).transition().duration(e).style('opacity',function(e){return n.isTargetToShow(e.data.id)&&n.isArcType(e.data)?1:0}),d.select('.'+p.chartArcsTitle).style('opacity',n.hasType('donut')||g?1:0),g){var x=0;_=n.arcs.select('g.'+p.chartArcsBackground).selectAll('path.'+p.chartArcsBackground).data(n.data.targets),_.enter().append('path'),_.attr('class',function(e,t){return p.chartArcsBackground+' '+p.chartArcsBackground+'-'+t}).attr('d',function(e){if(0<=n.hiddenTargetIds.indexOf(e.id))return'M 0 0';var t={data:[{value:o.gauge_max}],startAngle:o.gauge_startingAngle,endAngle:-1*o.gauge_startingAngle*(o.gauge_fullCircle?l:1),index:x++};return n.getArc(t,!0,!0)}),_.exit().remove(),n.arcs.select('.'+p.chartArcsGaugeUnit).attr('dy','.75em').text(o.gauge_label_show?o.gauge_units:''),n.arcs.select('.'+p.chartArcsGaugeMin).attr('dx',-1*(n.innerRadius+(n.radius-n.innerRadius)/(o.gauge_fullCircle?1:2))+'px').attr('dy','1.2em').text(o.gauge_label_show?n.textForGaugeMinMax(o.gauge_min,!1):''),n.arcs.select('.'+p.chartArcsGaugeMax).attr('dx',n.innerRadius+(n.radius-n.innerRadius)/(o.gauge_fullCircle?1:2)+'px').attr('dy','1.2em').text(o.gauge_label_show?n.textForGaugeMinMax(o.gauge_max,!0):'')}},F.initGauge=function(){var e=this.arcs;this.hasType('gauge')&&(e.append('g').attr('class',p.chartArcsBackground),e.append('text').attr('class',p.chartArcsGaugeUnit).style('text-anchor','middle').style('pointer-events','none'),e.append('text').attr('class',p.chartArcsGaugeMin).style('text-anchor','middle').style('pointer-events','none'),e.append('text').attr('class',p.chartArcsGaugeMax).style('text-anchor','middle').style('pointer-events','none'))},F.getGaugeLabelHeight=function(){return this.config.gauge_label_show?20:0},F.hasCaches=function(e){for(var t=0;t<e.length;t++)if(!(e[t]in this.cache))return!1;return!0},F.addCache=function(e,t){this.cache[e]=this.cloneTarget(t)},F.getCaches=function(e){var t=[],a;for(a=0;a<e.length;a++)e[a]in this.cache&&t.push(this.cloneTarget(this.cache[e[a]]));return t},F.categoryName=function(e){var t=this.config;return e<t.axis_x_categories.length?t.axis_x_categories[e]:e},F.generateClass=function(e,t){return' '+e+' '+e+this.getTargetSelectorSuffix(t)},F.classText=function(e){return this.generateClass(p.text,e.index)},F.classTexts=function(e){return this.generateClass(p.texts,e.id)},F.classShape=function(e){return this.generateClass(p.shape,e.index)},F.classShapes=function(e){return this.generateClass(p.shapes,e.id)},F.classLine=function(e){return this.classShape(e)+this.generateClass(p.line,e.id)},F.classLines=function(e){return this.classShapes(e)+this.generateClass(p.lines,e.id)},F.classCircle=function(e){return this.classShape(e)+this.generateClass(p.circle,e.index)},F.classCircles=function(e){return this.classShapes(e)+this.generateClass(p.circles,e.id)},F.classBar=function(e){return this.classShape(e)+this.generateClass(p.bar,e.index)},F.classBars=function(e){return this.classShapes(e)+this.generateClass(p.bars,e.id)},F.classArc=function(e){return this.classShape(e.data)+this.generateClass(p.arc,e.data.id)},F.classArcs=function(e){return this.classShapes(e.data)+this.generateClass(p.arcs,e.data.id)},F.classArea=function(e){return this.classShape(e)+this.generateClass(p.area,e.id)},F.classAreas=function(e){return this.classShapes(e)+this.generateClass(p.areas,e.id)},F.classRegion=function(e,t){return this.generateClass(p.region,t)+' '+('class'in e?e['class']:'')},F.classEvent=function(e){return this.generateClass(p.eventRect,e.index)},F.classTarget=function(e){var t=this,a=t.config.data_classes[e],i='';return a&&(i=' '+p.target+'-'+a),t.generateClass(p.target,e)+i},F.classFocus=function(e){return this.classFocused(e)+this.classDefocused(e)},F.classFocused=function(e){return' '+(0<=this.focusedTargetIds.indexOf(e.id)?p.focused:'')},F.classDefocused=function(e){return' '+(0<=this.defocusedTargetIds.indexOf(e.id)?p.defocused:'')},F.classChartText=function(e){return p.chartText+this.classTarget(e.id)},F.classChartLine=function(e){return p.chartLine+this.classTarget(e.id)},F.classChartBar=function(e){return p.chartBar+this.classTarget(e.id)},F.classChartArc=function(e){return p.chartArc+this.classTarget(e.data.id)},F.getTargetSelectorSuffix=function(e){return e||0===e?('-'+e).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,'-'):''},F.selectorTarget=function(e,t){return(t||'')+'.'+p.target+this.getTargetSelectorSuffix(e)},F.selectorTargets=function(e,t){var a=this;return e=e||[],e.length?e.map(function(e){return a.selectorTarget(e,t)}):null},F.selectorLegend=function(e){return'.'+p.legendItem+this.getTargetSelectorSuffix(e)},F.selectorLegends=function(e){var t=this;return e&&e.length?e.map(function(e){return t.selectorLegend(e)}):null},F.getClipPath=function(e){var t=0<=window.navigator.appVersion.toLowerCase().indexOf('msie 9.');return'url('+(t?'':document.URL.split('#')[0])+'#'+e+')'},F.appendClip=function(e,t){return e.append('clipPath').attr('id',t).append('rect')},F.getAxisClipX=function(e){var t=g(30,this.margin.left);return e?-(1+t):-(t-1)},F.getAxisClipY=function(e){return e?-20:-this.margin.top},F.getXAxisClipX=function(){var e=this;return e.getAxisClipX(!e.config.axis_rotated)},F.getXAxisClipY=function(){var e=this;return e.getAxisClipY(!e.config.axis_rotated)},F.getYAxisClipX=function(){var e=this;return e.config.axis_y_inner?-1:e.getAxisClipX(e.config.axis_rotated)},F.getYAxisClipY=function(){var e=this;return e.getAxisClipY(e.config.axis_rotated)},F.getAxisClipWidth=function(e){var t=this,a=g(30,t.margin.left),i=g(30,t.margin.right);return e?t.width+2+a+i:t.margin.left+20},F.getAxisClipHeight=function(e){return(e?this.margin.bottom:this.margin.top+this.height)+20},F.getXAxisClipWidth=function(){var e=this;return e.getAxisClipWidth(!e.config.axis_rotated)},F.getXAxisClipHeight=function(){var e=this;return e.getAxisClipHeight(!e.config.axis_rotated)},F.getYAxisClipWidth=function(){var e=this;return e.getAxisClipWidth(e.config.axis_rotated)+(e.config.axis_y_inner?20:0)},F.getYAxisClipHeight=function(){var e=this;return e.getAxisClipHeight(e.config.axis_rotated)},F.generateColor=function(){var e=this,t=e.config,a=e.d3,i=t.data_colors,r=C(t.color_pattern)?t.color_pattern:a.scale.category10().range(),n=t.data_color,s=[];return function(e){var t=e.id||e.data&&e.data.id||e,a;return i[t]instanceof Function?a=i[t](e):i[t]?a=i[t]:(0>s.indexOf(t)&&s.push(t),a=r[s.indexOf(t)%r.length],i[t]=a),n instanceof Function?n(a,e):a}},F.generateLevelColor=function(){var e=this,t=e.config,a=t.color_pattern,i=t.color_threshold,r='value'===i.unit,n=i.values&&i.values.length?i.values:[],s=i.max||100;return C(t.color_threshold)?function(e){var t=a[a.length-1],o,i;for(o=0;o<n.length;o++)if(i=r?e:100*e/s,i<n[o]){t=a[o];break}return t}:null},F.getDefaultConfig=function(){var e={bindto:'#chart',svg_classname:void 0,size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,zoom_enabled:!1,zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:function(){},zoom_onzoomstart:function(){},zoom_onzoomend:function(){},zoom_x_min:void 0,zoom_x_max:void 0,interaction_brighten:!0,interaction_enabled:!0,onmouseover:function(){},onmouseout:function(){},onresize:function(){},onresized:function(){},oninit:function(){},onrendered:function(){},transition_duration:350,data_x:void 0,data_xs:{},data_xFormat:'%Y-%m-%d',data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(e){return e},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_order:'desc',data_regions:{},data_color:void 0,data_colors:{},data_hide:!1,data_filter:void 0,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_onclick:function(){},data_onmouseover:function(){},data_onmouseout:function(){},data_onselected:function(){},data_onunselected:function(){},data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:void 0,data_keys:void 0,data_empty_label_text:'',subchart_show:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:!0,legend_hide:!1,legend_position:'bottom',legend_inset_anchor:'top-left',legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onmouseover:void 0,legend_item_onmouseout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,axis_rotated:!1,axis_x_show:!0,axis_x_type:'indexed',axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_x_inner:void 0,axis_y_show:!0,axis_y_type:void 0,axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:void 0,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_time_value:void 0,axis_y_tick_time_interval:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y2_show:!1,axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:void 0,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_padding:{},axis_y2_default:void 0,grid_x_show:!1,grid_x_type:'tick',grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_lines_front:!0,point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_select_r:void 0,line_connectNull:!1,line_step_type:'step',bar_width:void 0,bar_width_ratio:0.6,bar_width_max:void 0,bar_zerobased:!0,bar_space:0,area_zerobased:!0,area_above:!1,pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:0.05,pie_label_ratio:void 0,pie_expand:{},pie_expand_duration:50,gauge_fullCircle:!1,gauge_label_show:!0,gauge_labelLine_show:!0,gauge_label_format:void 0,gauge_min:0,gauge_max:100,gauge_startingAngle:-1*l/2,gauge_label_extents:void 0,gauge_units:void 0,gauge_width:void 0,gauge_arcs_minWidth:5,gauge_expand:{},gauge_expand_duration:50,donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:0.05,donut_label_ratio:void 0,donut_width:void 0,donut_title:'',donut_expand:{},donut_expand_duration:50,spline_interpolation_type:'cardinal',regions:[],tooltip_show:!0,tooltip_grouped:!0,tooltip_order:void 0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:function(e,t,a,i){return this.getTooltipContent?this.getTooltipContent(e,t,a,i):''},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:'0px',left:'50px'},tooltip_onshow:function(){},tooltip_onhide:function(){},title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:'top-center'};return Object.keys(this.additionalConfig).forEach(function(t){e[t]=this.additionalConfig[t]},this),e},F.additionalConfig={},F.loadConfig=function(e){function t(){var e=r.shift();return e&&i&&'object'===('undefined'===typeof i?'undefined':_(i))&&e in i?(i=i[e],t()):e?void 0:i}var a=this.config,i,r,n;Object.keys(a).forEach(function(s){i=e,r=s.split('_'),n=t(),A(n)&&(a[s]=n)})},F.convertUrlToData=function(e,t,a,i,r){var n=this,s=t?t:'csv',o=n.d3.xhr(e);a&&Object.keys(a).forEach(function(e){o.header(e,a[e])}),o.get(function(e,t){var a=t.response||t.responseText,o;if(!t)throw new Error(e.responseURL+' '+e.status+' ('+e.statusText+')');o='json'===s?n.convertJsonToData(JSON.parse(a),i):'tsv'===s?n.convertTsvToData(a):n.convertCsvToData(a),r.call(n,o)})},F.convertXsvToData=function(e,t){var a=t.parseRows(e),i;return 1===a.length?(i=[{}],a[0].forEach(function(e){i[0][e]=null})):i=t.parse(e),i},F.convertCsvToData=function(e){return this.convertXsvToData(e,this.d3.csv)},F.convertTsvToData=function(e){return this.convertXsvToData(e,this.d3.tsv)},F.convertJsonToData=function(e,t){var a=this,i=[],r,n;return t?(t.x?(r=t.value.concat(t.x),a.config.data_x=t.x):r=t.value,i.push(r),e.forEach(function(e){var t=[];r.forEach(function(i){var r=a.findValueInJson(e,i);T(r)&&(r=null),t.push(r)}),i.push(t)}),n=a.convertRowsToData(i)):(Object.keys(e).forEach(function(t){i.push([t].concat(e[t]))}),n=a.convertColumnsToData(i)),n},F.findValueInJson=function(e,t){t=t.replace(/\[(\w+)\]/g,'.$1'),t=t.replace(/^\./,'');for(var a=t.split('.'),r=0,i;r<a.length;++r)if(i=a[r],i in e)e=e[i];else return;return e},F.convertRowsToData=function(e){for(var t=[],a=e[0],r=1,i;r<e.length;r++){i={};for(var n=0;n<e[r].length;n++){if(T(e[r][n]))throw new Error('Source data is missing a component at ('+r+','+n+')!');i[a[n]]=e[r][n]}t.push(i)}return t},F.convertColumnsToData=function(e){for(var t=[],a=0,i;a<e.length;a++){i=e[a][0];for(var r=1;r<e[a].length;r++){if(T(t[r-1])&&(t[r-1]={}),T(e[a][r]))throw new Error('Source data is missing a component at ('+a+','+r+')!');t[r-1][i]=e[a][r]}}return t},F.convertDataToTargets=function(e,t){var a=this,r=a.config,i=a.d3.keys(e[0]).filter(a.isNotX,a),n=a.d3.keys(e[0]).filter(a.isX,a),s;return i.forEach(function(s){var i=a.getXKey(s);a.isCustomX()||a.isTimeSeries()?0<=n.indexOf(i)?a.data.xs[s]=(t&&a.data.xs[s]?a.data.xs[s]:[]).concat(e.map(function(e){return e[i]}).filter(y).map(function(e,t){return a.generateTargetX(e,s,t)})):r.data_x?a.data.xs[s]=a.getOtherTargetXs():C(r.data_xs)&&(a.data.xs[s]=a.getXValuesOfXKey(i,a.data.targets)):a.data.xs[s]=e.map(function(e,t){return t})}),i.forEach(function(e){if(!a.data.xs[e])throw new Error('x is not defined for id = "'+e+'".')}),s=i.map(function(t,n){var s=r.data_idConverter(t);return{id:s,id_org:t,values:e.map(function(e,o){var i=a.getXKey(t),d=e[i],l=null===e[t]||isNaN(e[t])?null:+e[t],g;return a.isCustomX()&&a.isCategorized()&&!T(d)?(0===n&&0===o&&(r.axis_x_categories=[]),g=r.axis_x_categories.indexOf(d),-1===g&&(g=r.axis_x_categories.length,r.axis_x_categories.push(d))):g=a.generateTargetX(d,t,o),(T(e[t])||a.data.xs[t].length<=o)&&(g=void 0),{x:g,value:l,id:s}}).filter(function(e){return A(e.x)})}}),s.forEach(function(e){var t;r.data_xSort&&(e.values=e.values.sort(function(e,t){var a=e.x||0===e.x?e.x:Infinity,i=t.x||0===t.x?t.x:Infinity;return a-i})),t=0,e.values.forEach(function(e){e.index=t++}),a.data.xs[e.id].sort(function(e,t){return e-t})}),a.hasNegativeValue=a.hasNegativeValueInTargets(s),a.hasPositiveValue=a.hasPositiveValueInTargets(s),r.data_type&&a.setTargetType(a.mapToIds(s).filter(function(e){return!(e in r.data_types)}),r.data_type),s.forEach(function(e){a.addCache(e.id_org,e)}),s},F.isX=function(e){var t=this,a=t.config;return a.data_x&&e===a.data_x||C(a.data_xs)&&G(a.data_xs,e)},F.isNotX=function(e){return!this.isX(e)},F.getXKey=function(e){var t=this,a=t.config;return a.data_x?a.data_x:C(a.data_xs)?a.data_xs[e]:null},F.getXValuesOfXKey=function(e,t){var a=this,i=t&&C(t)?a.mapToIds(t):[],r;return i.forEach(function(t){a.getXKey(t)===e&&(r=a.data.xs[t])}),r},F.getIndexByX=function(e){var t=this,a=t.filterByX(t.data.targets,e);return a.length?a[0].index:null},F.getXValue=function(e,t){var a=this;return e in a.data.xs&&a.data.xs[e]&&y(a.data.xs[e][t])?a.data.xs[e][t]:t},F.getOtherTargetXs=function(){var e=this,t=Object.keys(e.data.xs);return t.length?e.data.xs[t[0]]:null},F.getOtherTargetX=function(e){var t=this.getOtherTargetXs();return t&&e<t.length?t[e]:null},F.addXs=function(e){var t=this;Object.keys(e).forEach(function(a){t.config.data_xs[a]=e[a]})},F.hasMultipleX=function(e){return 1<this.d3.set(Object.keys(e).map(function(t){return e[t]})).size()},F.isMultipleX=function(){return C(this.config.data_xs)||!this.config.data_xSort||this.hasType('scatter')},F.addName=function(e){var t=this,a;return e&&(a=t.config.data_names[e.id],e.name=void 0===a?e.id:a),e},F.getValueOnIndex=function(e,t){var a=e.filter(function(e){return e.index===t});return a.length?a[0]:null},F.updateTargetX=function(e,a){var r=this;e.forEach(function(e){e.values.forEach(function(t,n){t.x=r.generateTargetX(a[n],e.id,n)}),r.data.xs[e.id]=a})},F.updateTargetXs=function(e,a){var i=this;e.forEach(function(e){a[e.id]&&i.updateTargetX([e],a[e.id])})},F.generateTargetX=function(e,t,a){var i=this,r;return r=i.isTimeSeries()?e?i.parseDate(e):i.parseDate(i.getXValue(t,a)):i.isCustomX()&&!i.isCategorized()?y(e)?+e:i.getXValue(t,a):a,r},F.cloneTarget=function(e){return{id:e.id,id_org:e.id_org,values:e.values.map(function(e){return{x:e.x,value:e.value,id:e.id}})}},F.updateXs=function(){var e=this;e.data.targets.length&&(e.xs=[],e.data.targets[0].values.forEach(function(t){e.xs[t.index]=t.x}))},F.getPrevX=function(e){var t=this.xs[e-1];return'undefined'===typeof t?null:t},F.getNextX=function(e){var t=this.xs[e+1];return'undefined'===typeof t?null:t},F.getMaxDataCount=function(){var e=this;return e.d3.max(e.data.targets,function(e){return e.values.length})},F.getMaxDataCountTarget=function(e){var t=e.length,a=0,i;return 1<t?e.forEach(function(e){e.values.length>a&&(i=e,a=e.values.length)}):i=t?e[0]:null,i},F.getEdgeX=function(e){var t=this;return e.length?[t.d3.min(e,function(e){return e.values[0].x}),t.d3.max(e,function(e){return e.values[e.values.length-1].x})]:[0,0]},F.mapToIds=function(e){return e.map(function(e){return e.id})},F.mapToTargetIds=function(e){var t=this;return e?[].concat(e):t.mapToIds(t.data.targets)},F.hasTarget=function(e,t){var a=this.mapToIds(e),r;for(r=0;r<a.length;r++)if(a[r]===t)return!0;return!1},F.isTargetToShow=function(e){return 0>this.hiddenTargetIds.indexOf(e)},F.isLegendToShow=function(e){return 0>this.hiddenLegendIds.indexOf(e)},F.filterTargetsToShow=function(e){var a=this;return e.filter(function(e){return a.isTargetToShow(e.id)})},F.mapTargetsToUniqueXs=function(e){var t=this,a=t.d3.set(t.d3.merge(e.map(function(e){return e.values.map(function(e){return+e.x})}))).values();return a=t.isTimeSeries()?a.map(function(e){return new Date(+e)}):a.map(function(e){return+e}),a.sort(function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN})},F.addHiddenTargetIds=function(e){e=e instanceof Array?e:Array(e);for(var t=0;t<e.length;t++)0>this.hiddenTargetIds.indexOf(e[t])&&(this.hiddenTargetIds=this.hiddenTargetIds.concat(e[t]))},F.removeHiddenTargetIds=function(e){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(t){return 0>e.indexOf(t)})},F.addHiddenLegendIds=function(e){e=e instanceof Array?e:Array(e);for(var t=0;t<e.length;t++)0>this.hiddenLegendIds.indexOf(e[t])&&(this.hiddenLegendIds=this.hiddenLegendIds.concat(e[t]))},F.removeHiddenLegendIds=function(e){this.hiddenLegendIds=this.hiddenLegendIds.filter(function(t){return 0>e.indexOf(t)})},F.getValuesAsIdKeyed=function(e){var a={};return e.forEach(function(e){a[e.id]=[],e.values.forEach(function(t){a[e.id].push(t.value)})}),a},F.checkValueInTargets=function(e,t){var a=Object.keys(e),r,i,n;for(r=0;r<a.length;r++)for(n=e[a[r]].values,i=0;i<n.length;i++)if(t(n[i].value))return!0;return!1},F.hasNegativeValueInTargets=function(e){return this.checkValueInTargets(e,function(e){return 0>e})},F.hasPositiveValueInTargets=function(e){return this.checkValueInTargets(e,function(e){return 0<e})},F.isOrderDesc=function(){var e=this.config;return'string'===typeof e.data_order&&'desc'===e.data_order.toLowerCase()},F.isOrderAsc=function(){var e=this.config;return'string'===typeof e.data_order&&'asc'===e.data_order.toLowerCase()},F.getOrderFunction=function(){var e=this,t=e.config,a=e.isOrderAsc(),r=e.isOrderDesc();if(a||r)return function(e,t){var a=function(e,t){return e+i(t.value)},n=e.values.reduce(a,0),s=t.values.reduce(a,0);return r?s-n:n-s};if(m(t.data_order))return t.data_order;if(S(t.data_order)){var n=t.data_order;return function(e,t){return n.indexOf(e.id)-n.indexOf(t.id)}}},F.orderTargets=function(e){var t=this.getOrderFunction();return t&&(e.sort(t),(this.isOrderAsc()||this.isOrderDesc())&&e.reverse()),e},F.filterByX=function(e,t){return this.d3.merge(e.map(function(e){return e.values})).filter(function(e){return 0===e.x-t})},F.filterRemoveNull=function(e){return e.filter(function(e){return y(e.value)})},F.filterByXDomain=function(e,t){return e.map(function(e){return{id:e.id,id_org:e.id_org,values:e.values.filter(function(e){return t[0]<=e.x&&e.x<=t[1]})}})},F.hasDataLabel=function(){var e=this.config;return'boolean'===typeof e.data_labels&&e.data_labels||'object'===_(e.data_labels)&&C(e.data_labels)},F.getDataLabelLength=function(e,t,a){var i=this,r=[0,0];return i.selectChart.select('svg').selectAll('.dummy').data([e,t]).enter().append('text').text(function(e){return i.dataLabelFormat(e.id)(e)}).each(function(e,t){r[t]=this.getBoundingClientRect()[a]*1.3}).remove(),r},F.isNoneArc=function(e){return this.hasTarget(this.data.targets,e.id)},F.isArc=function(e){return'data'in e&&this.hasTarget(this.data.targets,e.data.id)},F.findSameXOfValues=function(e,t){var a=e[t].x,r=[],n;for(n=t-1;0<=n&&a===e[n].x;n--)r.push(e[n]);for(n=t;n<e.length&&a===e[n].x;n++)r.push(e[n]);return r},F.findClosestFromTargets=function(e,t){var a=this,i;return i=e.map(function(e){return a.findClosest(e.values,t)}),a.findClosest(i,t)},F.findClosest=function(e,t){var a=this,i=a.config.point_sensitivity,r;return e.filter(function(e){return e&&a.isBarType(e.id)}).forEach(function(e){var t=a.main.select('.'+p.bars+a.getTargetSelectorSuffix(e.id)+' .'+p.bar+'-'+e.index).node();!r&&a.isWithinBar(t)&&(r=e)}),e.filter(function(e){return e&&!a.isBarType(e.id)}).forEach(function(e){var n=a.dist(e,t);n<i&&(i=n,r=e)}),r},F.dist=function(e,t){var a=this,i=a.config,r=i.axis_rotated?1:0,s=i.axis_rotated?0:1,d=a.circleY(e,e.index),l=a.x(e.x);return n(o(l-t[r],2)+o(d-t[s],2))},F.convertValuesToStep=function(e){var t=[].concat(e),a;if(!this.isCategorized())return e;for(a=e.length+1;0<a;a--)t[a]=t[a-1];return t[0]={x:t[0].x-1,value:t[0].value,id:t[0].id},t[e.length+1]={x:t[e.length].x+1,value:t[e.length].value,id:t[e.length].id},t},F.updateDataAttributes=function(e,t){var a=this,i=a.config,r=i['data_'+e];return'undefined'===typeof t?r:(Object.keys(t).forEach(function(e){r[e]=t[e]}),a.redraw({withLegend:!0}),r)},F.load=function(e,a){var i=this;e&&(a.filter&&(e=e.filter(a.filter)),(a.type||a.types)&&e.forEach(function(e){var t=a.types&&a.types[e.id]?a.types[e.id]:a.type;i.setTargetType(e.id,t)}),i.data.targets.forEach(function(t){for(var a=0;a<e.length;a++)if(t.id===e[a].id){t.values=e[a].values,e.splice(a,1);break}}),i.data.targets=i.data.targets.concat(e)),i.updateTargets(i.data.targets),i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),a.done&&a.done()},F.loadFromArgs=function(e){var t=this;e.data?t.load(t.convertDataToTargets(e.data),e):e.url?t.convertUrlToData(e.url,e.mimeType,e.headers,e.keys,function(a){t.load(t.convertDataToTargets(a),e)}):e.json?t.load(t.convertDataToTargets(t.convertJsonToData(e.json,e.keys)),e):e.rows?t.load(t.convertDataToTargets(t.convertRowsToData(e.rows)),e):e.columns?t.load(t.convertDataToTargets(t.convertColumnsToData(e.columns)),e):t.load(null,e)},F.unload=function(e,t){var a=this;return t||(t=function(){}),e=e.filter(function(e){return a.hasTarget(a.data.targets,e)}),e&&0!==e.length?void(a.svg.selectAll(e.map(function(e){return a.selectorTarget(e)})).transition().style('opacity',0).remove().call(a.endall,t),e.forEach(function(e){a.withoutFadeIn[e]=!1,a.legend&&a.legend.selectAll('.'+p.legendItem+a.getTargetSelectorSuffix(e)).remove(),a.data.targets=a.data.targets.filter(function(a){return a.id!==e})})):void t()},F.getYDomainMin=function(e){var t=this,a=t.config,i=t.mapToIds(e),r=t.getValuesAsIdKeyed(e),n,s,o,d,l,g;if(0<a.data_groups.length)for(g=t.hasNegativeValueInTargets(e),n=0;n<a.data_groups.length;n++)if(d=a.data_groups[n].filter(function(e){return 0<=i.indexOf(e)}),0!==d.length)for(o=d[0],g&&r[o]&&r[o].forEach(function(e,t){r[o][t]=0>e?e:0}),s=1;s<d.length;s++)(l=d[s],!!r[l])&&r[l].forEach(function(e,a){t.axis.getId(l)===t.axis.getId(o)&&r[o]&&!(g&&0<+e)&&(r[o][a]+=+e)});return t.d3.min(Object.keys(r).map(function(e){return t.d3.min(r[e])}))},F.getYDomainMax=function(e){var t=this,a=t.config,i=t.mapToIds(e),r=t.getValuesAsIdKeyed(e),n,s,o,d,l,g;if(0<a.data_groups.length)for(g=t.hasPositiveValueInTargets(e),n=0;n<a.data_groups.length;n++)if(d=a.data_groups[n].filter(function(e){return 0<=i.indexOf(e)}),0!==d.length)for(o=d[0],g&&r[o]&&r[o].forEach(function(e,t){r[o][t]=0<e?e:0}),s=1;s<d.length;s++)(l=d[s],!!r[l])&&r[l].forEach(function(e,a){t.axis.getId(l)===t.axis.getId(o)&&r[o]&&!(g&&0>+e)&&(r[o][a]+=+e)});return t.d3.max(Object.keys(r).map(function(e){return t.d3.max(r[e])}))},F.getYDomain=function(e,a,t){var r=this,n=r.config,s=e.filter(function(e){return r.axis.getId(e.id)===a}),o=t?r.filterByXDomain(s,t):s,d='y2'===a?n.axis_y2_min:n.axis_y_min,l='y2'===a?n.axis_y2_max:n.axis_y_max,c=r.getYDomainMin(o),p=r.getYDomainMax(o),_='y2'===a?n.axis_y2_center:n.axis_y_center,h=r.hasType('bar',o)&&n.bar_zerobased||r.hasType('area',o)&&n.area_zerobased,x='y2'===a?n.axis_y2_inverted:n.axis_y_inverted,u=r.hasDataLabel()&&n.axis_rotated,m=r.hasDataLabel()&&!n.axis_rotated,S,f,T,A,b,P,L,V,G,w,E;return(c=y(d)?d:y(l)?c<l?c:l-10:c,p=y(l)?l:y(d)?d<p?p:d+10:p,0===o.length)?'y2'===a?r.y2.domain():r.y.domain():(isNaN(c)&&(c=0),isNaN(p)&&(p=c),c===p&&(0>c?p=0:c=0),w=0<=c&&0<=p,E=0>=c&&0>=p,(y(d)&&w||y(l)&&E)&&(h=!1),h&&(w&&(c=0),E&&(p=0)),f=i(p-c),T=A=b=0.1*f,'undefined'!==typeof _&&(P=g(i(c),i(p)),p=_+P,c=_-P),u?(L=r.getDataLabelLength(c,p,'width'),V=v(r.y.range()),G=[L[0]/V,L[1]/V],A+=f*(G[1]/(1-G[0]-G[1])),b+=f*(G[0]/(1-G[0]-G[1]))):m&&(L=r.getDataLabelLength(c,p,'height'),A+=r.axis.convertPixelsToAxisPadding(L[1],f),b+=r.axis.convertPixelsToAxisPadding(L[0],f)),'y'===a&&C(n.axis_y_padding)&&(A=r.axis.getPadding(n.axis_y_padding,'top',A,f),b=r.axis.getPadding(n.axis_y_padding,'bottom',b,f)),'y2'===a&&C(n.axis_y2_padding)&&(A=r.axis.getPadding(n.axis_y2_padding,'top',A,f),b=r.axis.getPadding(n.axis_y2_padding,'bottom',b,f)),h&&(w&&(b=c),E&&(A=-p)),S=[c-b,p+A],x?S.reverse():S)},F.getXDomainMin=function(e){var a=this,t=a.config;return A(t.axis_x_min)?a.isTimeSeries()?this.parseDate(t.axis_x_min):t.axis_x_min:a.d3.min(e,function(e){return a.d3.min(e.values,function(e){return e.x})})},F.getXDomainMax=function(e){var a=this,t=a.config;return A(t.axis_x_max)?a.isTimeSeries()?this.parseDate(t.axis_x_max):t.axis_x_max:a.d3.max(e,function(e){return a.d3.max(e.values,function(e){return e.x})})},F.getXDomainPadding=function(e){var t=this,a=t.config,i=e[1]-e[0],r,n,s,o;return t.isCategorized()?n=0:t.hasType('bar')?(r=t.getMaxDataCount(),n=1<r?i/(r-1)/2:0.5):n=0.01*i,'object'===_(a.axis_x_padding)&&C(a.axis_x_padding)?(s=y(a.axis_x_padding.left)?a.axis_x_padding.left:n,o=y(a.axis_x_padding.right)?a.axis_x_padding.right:n):'number'===typeof a.axis_x_padding?s=o=a.axis_x_padding:s=o=n,{left:s,right:o}},F.getXDomain=function(e){var t=this,a=[t.getXDomainMin(e),t.getXDomainMax(e)],i=a[0],r=a[1],n=t.getXDomainPadding(a),s=0,o=0;return 0!==i-r||t.isCategorized()||(t.isTimeSeries()?(i=new Date(0.5*i.getTime()),r=new Date(1.5*r.getTime())):(i=0===i?1:0.5*i,r=0===r?-1:1.5*r)),(i||0===i)&&(s=t.isTimeSeries()?new Date(i.getTime()-n.left):i-n.left),(r||0===r)&&(o=t.isTimeSeries()?new Date(r.getTime()+n.right):r+n.right),[s,o]},F.updateXDomain=function(e,t,a,i,r){var n=this,s=n.config;return a&&(n.x.domain(r?r:n.d3.extent(n.getXDomain(e))),n.orgXDomain=n.x.domain(),s.zoom_enabled&&n.zoom.scale(n.x).updateScaleExtent(),n.subX.domain(n.x.domain()),n.brush&&n.brush.scale(n.subX)),t&&(n.x.domain(r?r:!n.brush||n.brush.empty()?n.orgXDomain:n.brush.extent()),s.zoom_enabled&&n.zoom.scale(n.x).updateScaleExtent()),i&&n.x.domain(n.trimXDomain(n.x.orgDomain())),n.x.domain()},F.trimXDomain=function(e){var t=this.getZoomDomain(),a=t[0],i=t[1];return e[0]<=a&&(e[1]=+e[1]+(a-e[0]),e[0]=a),i<=e[1]&&(e[0]=+e[0]-(e[1]-i),e[1]=i),e},F.drag=function(e){var t=this,a=t.config,i=t.main,r=t.d3,n,s,o,l,c,_,h,x;!t.hasArcType()&&a.data_selection_enabled&&(!a.zoom_enabled||t.zoom.altDomain)&&a.data_selection_multiple&&(n=t.dragStart[0],s=t.dragStart[1],o=e[0],l=e[1],c=d(n,o),_=g(n,o),h=a.data_selection_grouped?t.margin.top:d(s,l),x=a.data_selection_grouped?t.height:g(s,l),i.select('.'+p.dragarea).attr('x',c).attr('y',h).attr('width',_-c).attr('height',x-h),i.selectAll('.'+p.shapes).selectAll('.'+p.shape).filter(function(e){return a.data_selection_isselectable(e)}).each(function(e,a){var i=r.select(this),n=i.classed(p.SELECTED),s=i.classed(p.INCLUDED),o=!1,d,l,g,u,y,m;if(i.classed(p.circle))d=1*i.attr('cx'),l=1*i.attr('cy'),y=t.togglePoint,o=c<d&&d<_&&h<l&&l<x;else if(i.classed(p.bar))m=E(this),d=m.x,l=m.y,g=m.width,u=m.height,y=t.togglePath,o=!(_<d||d+g<c)&&!(x<l||l+u<h);else return;o^s&&(i.classed(p.INCLUDED,!s),i.classed(p.SELECTED,!n),y.call(t,!n,i,e,a))}))},F.dragstart=function(e){var t=this,a=t.config;t.hasArcType()||!a.data_selection_enabled||(t.dragStart=e,t.main.select('.'+p.chart).append('rect').attr('class',p.dragarea).style('opacity',0.1),t.dragging=!0)},F.dragend=function(){var e=this,t=e.config;e.hasArcType()||!t.data_selection_enabled||(e.main.select('.'+p.dragarea).transition().duration(100).style('opacity',0).remove(),e.main.selectAll('.'+p.shape).classed(p.INCLUDED,!1),e.dragging=!1)},F.getYFormat=function(e){var t=this,a=e&&!t.hasType('gauge')?t.defaultArcValueFormat:t.yFormat,i=e&&!t.hasType('gauge')?t.defaultArcValueFormat:t.y2Format;return function(e,r,n){var s='y2'===t.axis.getId(n)?i:a;return s.call(t,e,r)}},F.yFormat=function(e){var t=this,a=t.config,i=a.axis_y_tick_format?a.axis_y_tick_format:t.defaultValueFormat;return i(e)},F.y2Format=function(e){var t=this,a=t.config,i=a.axis_y2_tick_format?a.axis_y2_tick_format:t.defaultValueFormat;return i(e)},F.defaultValueFormat=function(e){return y(e)?+e:''},F.defaultArcValueFormat=function(e,t){return(100*t).toFixed(1)+'%'},F.dataLabelFormat=function(e){var t=this,a=t.config.data_labels,i=function(e){return y(e)?+e:''},r;return r='function'===typeof a.format?a.format:'object'===_(a.format)?a.format[e]?!0===a.format[e]?i:a.format[e]:function(){return''}:i,r},F.initGrid=function(){var e=this,t=e.config,a=e.d3;e.grid=e.main.append('g').attr('clip-path',e.clipPathForGrid).attr('class',p.grid),t.grid_x_show&&e.grid.append('g').attr('class',p.xgrids),t.grid_y_show&&e.grid.append('g').attr('class',p.ygrids),t.grid_focus_show&&e.grid.append('g').attr('class',p.xgridFocus).append('line').attr('class',p.xgridFocus),e.xgrid=a.selectAll([]),t.grid_lines_front||e.initGridLines()},F.initGridLines=function(){var e=this,t=e.d3;e.gridLines=e.main.append('g').attr('clip-path',e.clipPathForGrid).attr('class',p.grid+' '+p.gridLines),e.gridLines.append('g').attr('class',p.xgridLines),e.gridLines.append('g').attr('class',p.ygridLines),e.xgridLines=t.selectAll([])},F.updateXGrid=function(e){var t=this,a=t.config,i=t.d3,r=t.generateGridData(a.grid_x_type,t.x),n=t.isCategorized()?t.xAxis.tickOffset():0;t.xgridAttr=a.axis_rotated?{x1:0,x2:t.width,y1:function(e){return t.x(e)-n},y2:function(e){return t.x(e)-n}}:{x1:function(e){return t.x(e)+n},x2:function(e){return t.x(e)+n},y1:0,y2:t.height},t.xgrid=t.main.select('.'+p.xgrids).selectAll('.'+p.xgrid).data(r),t.xgrid.enter().append('line').attr('class',p.xgrid),e||t.xgrid.attr(t.xgridAttr).style('opacity',function(){return+i.select(this).attr(a.axis_rotated?'y1':'x1')===(a.axis_rotated?t.height:0)?0:1}),t.xgrid.exit().remove()},F.updateYGrid=function(){var e=this,t=e.config,a=e.yAxis.tickValues()||e.y.ticks(t.grid_y_ticks);e.ygrid=e.main.select('.'+p.ygrids).selectAll('.'+p.ygrid).data(a),e.ygrid.enter().append('line').attr('class',p.ygrid),e.ygrid.attr('x1',t.axis_rotated?e.y:0).attr('x2',t.axis_rotated?e.y:e.width).attr('y1',t.axis_rotated?0:e.y).attr('y2',t.axis_rotated?e.height:e.y),e.ygrid.exit().remove(),e.smoothLines(e.ygrid,'grid')},F.gridTextAnchor=function(e){return e.position?e.position:'end'},F.gridTextDx=function(e){return'start'===e.position?4:'middle'===e.position?0:-4},F.xGridTextX=function(e){return'start'===e.position?-this.height:'middle'===e.position?-this.height/2:0},F.yGridTextX=function(e){return'start'===e.position?0:'middle'===e.position?this.width/2:this.width},F.updateGrid=function(e){var t=this,a=t.main,i=t.config,r,n,s;t.grid.style('visibility',t.hasArcType()?'hidden':'visible'),a.select('line.'+p.xgridFocus).style('visibility','hidden'),i.grid_x_show&&t.updateXGrid(),t.xgridLines=a.select('.'+p.xgridLines).selectAll('.'+p.xgridLine).data(i.grid_x_lines),r=t.xgridLines.enter().append('g').attr('class',function(e){return p.xgridLine+(e['class']?' '+e['class']:'')}),r.append('line').style('opacity',0),r.append('text').attr('text-anchor',t.gridTextAnchor).attr('transform',i.axis_rotated?'':'rotate(-90)').attr('dx',t.gridTextDx).attr('dy',-5).style('opacity',0),t.xgridLines.exit().transition().duration(e).style('opacity',0).remove(),i.grid_y_show&&t.updateYGrid(),t.ygridLines=a.select('.'+p.ygridLines).selectAll('.'+p.ygridLine).data(i.grid_y_lines),n=t.ygridLines.enter().append('g').attr('class',function(e){return p.ygridLine+(e['class']?' '+e['class']:'')}),n.append('line').style('opacity',0),n.append('text').attr('text-anchor',t.gridTextAnchor).attr('transform',i.axis_rotated?'rotate(-90)':'').attr('dx',t.gridTextDx).attr('dy',-5).style('opacity',0),s=t.yv.bind(t),t.ygridLines.select('line').transition().duration(e).attr('x1',i.axis_rotated?s:0).attr('x2',i.axis_rotated?s:t.width).attr('y1',i.axis_rotated?0:s).attr('y2',i.axis_rotated?t.height:s).style('opacity',1),t.ygridLines.select('text').transition().duration(e).attr('x',i.axis_rotated?t.xGridTextX.bind(t):t.yGridTextX.bind(t)).attr('y',s).text(function(e){return e.text}).style('opacity',1),t.ygridLines.exit().transition().duration(e).style('opacity',0).remove()},F.redrawGrid=function(e){var t=this,a=t.config,i=t.xv.bind(t),r=t.xgridLines.select('line'),n=t.xgridLines.select('text');return[(e?r.transition():r).attr('x1',a.axis_rotated?0:i).attr('x2',a.axis_rotated?t.width:i).attr('y1',a.axis_rotated?i:0).attr('y2',a.axis_rotated?i:t.height).style('opacity',1),(e?n.transition():n).attr('x',a.axis_rotated?t.yGridTextX.bind(t):t.xGridTextX.bind(t)).attr('y',i).text(function(e){return e.text}).style('opacity',1)]},F.showXGridFocus=function(e){var t=this,a=t.config,i=e.filter(function(e){return e&&y(e.value)}),r=t.main.selectAll('line.'+p.xgridFocus),n=t.xx.bind(t);!a.tooltip_show||t.hasType('scatter')||t.hasArcType()||(r.style('visibility','visible').data([i[0]]).attr(a.axis_rotated?'y1':'x1',n).attr(a.axis_rotated?'y2':'x2',n),t.smoothLines(r,'grid'))},F.hideXGridFocus=function(){this.main.select('line.'+p.xgridFocus).style('visibility','hidden')},F.updateXgridFocus=function(){var e=this,t=e.config;e.main.select('line.'+p.xgridFocus).attr('x1',t.axis_rotated?0:-10).attr('x2',t.axis_rotated?e.width:-10).attr('y1',t.axis_rotated?-10:0).attr('y2',t.axis_rotated?-10:e.height)},F.generateGridData=function(e,t){var a=this,r=[],n=a.main.select('.'+p.axisX).selectAll('.tick').size(),s,o,d,l;if('year'===e)for(s=a.getXDomain(),o=s[0].getFullYear(),d=s[1].getFullYear(),l=o;l<=d;l++)r.push(new Date(l+'-01-01 00:00:00'));else r=t.ticks(10),r.length>n&&(r=r.filter(function(e){return 0>(''+e).indexOf('.')}));return r},F.getGridFilterToRemove=function(e){return e?function(t){var a=!1;return[].concat(e).forEach(function(e){('value'in e&&t.value===e.value||'class'in e&&t['class']===e['class'])&&(a=!0)}),a}:function(){return!0}},F.removeGridLines=function(e,t){var a=this,i=a.config,r=a.getGridFilterToRemove(e),n=function(e){return!r(e)},s=t?p.xgridLines:p.ygridLines,o=t?p.xgridLine:p.ygridLine;a.main.select('.'+s).selectAll('.'+o).filter(r).transition().duration(i.transition_duration).style('opacity',0).remove(),t?i.grid_x_lines=i.grid_x_lines.filter(n):i.grid_y_lines=i.grid_y_lines.filter(n)},F.initEventRect=function(){var e=this;e.main.select('.'+p.chart).append('g').attr('class',p.eventRects).style('fill-opacity',0)},F.redrawEventRect=function(){var e=this,t=e.config,a=e.isMultipleX(),i=e.main.select('.'+p.eventRects).style('cursor',t.zoom_enabled?t.axis_rotated?'ns-resize':'ew-resize':null).classed(p.eventRectsMultiple,a).classed(p.eventRectsSingle,!a),r,n;i.selectAll('.'+p.eventRect).remove(),e.eventRect=i.selectAll('.'+p.eventRect),a?(r=e.eventRect.data([0]),e.generateEventRectsForMultipleXs(r.enter()),e.updateEventRect(r)):(n=e.getMaxDataCountTarget(e.data.targets),i.datum(n?n.values:[]),e.eventRect=i.selectAll('.'+p.eventRect),r=e.eventRect.data(function(e){return e}),e.generateEventRectsForSingleX(r.enter()),e.updateEventRect(r),r.exit().remove())},F.updateEventRect=function(e){var t=this,a=t.config,i,r,n,s,o,d;e=e||t.eventRect.data(function(e){return e}),t.isMultipleX()?(i=0,r=0,n=t.width,s=t.height):((t.isCustomX()||t.isTimeSeries())&&!t.isCategorized()?(t.updateXs(),o=function(e){var i=t.getPrevX(e.index),r=t.getNextX(e.index);return null===i&&null===r?a.axis_rotated?t.height:t.width:(null===i&&(i=t.x.domain()[0]),null===r&&(r=t.x.domain()[1]),g(0,(t.x(r)-t.x(i))/2))},d=function(e){var a=t.getPrevX(e.index),i=t.getNextX(e.index),r=t.data.xs[e.id][e.index];return null===a&&null===i?0:(null===a&&(a=t.x.domain()[0]),(t.x(r)+t.x(a))/2)}):(o=t.getEventRectWidth(),d=function(e){return t.x(e.x)-o/2}),i=a.axis_rotated?0:d,r=a.axis_rotated?d:0,n=a.axis_rotated?t.width:o,s=a.axis_rotated?o:t.height),e.attr('class',t.classEvent.bind(t)).attr('x',i).attr('y',r).attr('width',n).attr('height',s)},F.generateEventRectsForSingleX=function(e){var a=this,t=a.d3,i=a.config;e.append('rect').attr('class',a.classEvent.bind(a)).style('cursor',i.data_selection_enabled&&i.data_selection_grouped?'pointer':null).on('mouseover',function(e){var t=e.index;a.dragging||a.flowing||a.hasArcType()||(i.point_focus_expand_enabled&&a.expandCircles(t,null,!0),a.expandBars(t,null,!0),a.main.selectAll('.'+p.shape+'-'+t).each(function(e){i.data_onmouseover.call(a.api,e)}))}).on('mouseout',function(e){var t=e.index;!a.config||a.hasArcType()||(a.hideXGridFocus(),a.hideTooltip(),a.unexpandCircles(),a.unexpandBars(),a.main.selectAll('.'+p.shape+'-'+t).each(function(e){i.data_onmouseout.call(a.api,e)}))}).on('mousemove',function(e){var r=e.index,n=a.svg.select('.'+p.eventRect+'-'+r),s;a.dragging||a.flowing||a.hasArcType()||(a.isStepType(e)&&'step-after'===a.config.line_step_type&&t.mouse(this)[0]<a.x(a.getXValue(e.id,r))&&(r-=1),s=a.filterTargetsToShow(a.data.targets).map(function(e){return a.addName(a.getValueOnIndex(e.values,r))}),i.tooltip_grouped&&(a.showTooltip(s,this),a.showXGridFocus(s)),i.tooltip_grouped&&(!i.data_selection_enabled||i.data_selection_grouped)||a.main.selectAll('.'+p.shape+'-'+r).each(function(){t.select(this).classed(p.EXPANDED,!0),i.data_selection_enabled&&n.style('cursor',i.data_selection_grouped?'pointer':null),i.tooltip_grouped||(a.hideXGridFocus(),a.hideTooltip(),!i.data_selection_grouped&&(a.unexpandCircles(r),a.unexpandBars(r)))}).filter(function(e){return a.isWithinShape(this,e)}).each(function(e){i.data_selection_enabled&&(i.data_selection_grouped||i.data_selection_isselectable(e))&&n.style('cursor','pointer'),i.tooltip_grouped||(a.showTooltip([e],this),a.showXGridFocus([e]),i.point_focus_expand_enabled&&a.expandCircles(r,e.id,!0),a.expandBars(r,e.id,!0))}))}).on('click',function(e){var r=e.index;return a.hasArcType()||!a.toggleShape?void 0:a.cancelClick?void(a.cancelClick=!1):void(a.isStepType(e)&&'step-after'===i.line_step_type&&t.mouse(this)[0]<a.x(a.getXValue(e.id,r))&&(r-=1),a.main.selectAll('.'+p.shape+'-'+r).each(function(e){(i.data_selection_grouped||a.isWithinShape(this,e))&&(a.toggleShape(this,e,r),a.config.data_onclick.call(a.api,e,this))}))}).call(i.data_selection_draggable&&a.drag?t.behavior.drag().origin(Object).on('drag',function(){a.drag(t.mouse(this))}).on('dragstart',function(){a.dragstart(t.mouse(this))}).on('dragend',function(){a.dragend()}):function(){})},F.generateEventRectsForMultipleXs=function(e){function t(){a.svg.select('.'+p.eventRect).style('cursor',null),a.hideXGridFocus(),a.hideTooltip(),a.unexpandCircles(),a.unexpandBars()}var a=this,i=a.d3,r=a.config;e.append('rect').attr('x',0).attr('y',0).attr('width',a.width).attr('height',a.height).attr('class',p.eventRect).on('mouseout',function(){!a.config||a.hasArcType()||t()}).on('mousemove',function(){var e=a.filterTargetsToShow(a.data.targets),n,s,o,d;if(!a.dragging)return a.hasArcType(e)?void 0:(n=i.mouse(this),s=a.findClosestFromTargets(e,n),a.mouseover&&(!s||s.id!==a.mouseover.id)&&(r.data_onmouseout.call(a.api,a.mouseover),a.mouseover=void 0),s?void(o=a.isScatterType(s)||!r.tooltip_grouped?[s]:a.filterByX(e,s.x),d=o.map(function(e){return a.addName(e)}),a.showTooltip(d,this),r.point_focus_expand_enabled&&a.expandCircles(s.index,s.id,!0),a.expandBars(s.index,s.id,!0),a.showXGridFocus(d),(a.isBarType(s.id)||a.dist(s,n)<r.point_sensitivity)&&(a.svg.select('.'+p.eventRect).style('cursor','pointer'),!a.mouseover&&(r.data_onmouseover.call(a.api,s),a.mouseover=s))):void t())}).on('click',function(){var e=a.filterTargetsToShow(a.data.targets),t,n;a.hasArcType(e)||(t=i.mouse(this),n=a.findClosestFromTargets(e,t),!n||(a.isBarType(n.id)||a.dist(n,t)<r.point_sensitivity)&&a.main.selectAll('.'+p.shapes+a.getTargetSelectorSuffix(n.id)).selectAll('.'+p.shape+'-'+n.index).each(function(){(r.data_selection_grouped||a.isWithinShape(this,n))&&(a.toggleShape(this,n,n.index),a.config.data_onclick.call(a.api,n,this))}))}).call(r.data_selection_draggable&&a.drag?i.behavior.drag().origin(Object).on('drag',function(){a.drag(i.mouse(this))}).on('dragstart',function(){a.dragstart(i.mouse(this))}).on('dragend',function(){a.dragend()}):function(){})},F.dispatchEvent=function(e,t,a){var i=this,r='.'+p.eventRect+(i.isMultipleX()?'':'-'+t),n=i.main.select(r).node(),s=n.getBoundingClientRect(),o=s.left+(a?a[0]:0),d=s.top+(a?a[1]:0),l=document.createEvent('MouseEvents');l.initMouseEvent(e,!0,!0,window,0,o,d,o,d,!1,!1,!1,!1,0,null),n.dispatchEvent(l)},F.initLegend=function(){var e=this;return e.legendItemTextBox={},e.legendHasRendered=!1,e.legend=e.svg.append('g').attr('transform',e.getTranslate('legend')),e.config.legend_show?void e.updateLegendWithDefaults():(e.legend.style('visibility','hidden'),void(e.hiddenLegendIds=e.mapToIds(e.data.targets)))},F.updateLegendWithDefaults=function(){var e=this;e.updateLegend(e.mapToIds(e.data.targets),{withTransform:!1,withTransitionForTransform:!1,withTransition:!1})},F.updateSizeForLegend=function(e,t){var a=this,i=a.config,r={top:a.isLegendTop?a.getCurrentPaddingTop()+i.legend_inset_y+5.5:a.currentHeight-e-a.getCurrentPaddingBottom()-i.legend_inset_y,left:a.isLegendLeft?a.getCurrentPaddingLeft()+i.legend_inset_x+0.5:a.currentWidth-t-a.getCurrentPaddingRight()-i.legend_inset_x+0.5};a.margin3={top:a.isLegendRight?0:a.isLegendInset?r.top:a.currentHeight-e,right:NaN,bottom:0,left:a.isLegendRight?a.currentWidth-t:a.isLegendInset?r.left:0}},F.transformLegend=function(e){var t=this;(e?t.legend.transition():t.legend).attr('transform',t.getTranslate('legend'))},F.updateLegendStep=function(e){this.legendStep=e},F.updateLegendItemWidth=function(e){this.legendItemWidth=e},F.updateLegendItemHeight=function(e){this.legendItemHeight=e},F.getLegendWidth=function(){var e=this;return e.config.legend_show?e.isLegendRight||e.isLegendInset?e.legendItemWidth*(e.legendStep+1):e.currentWidth:0},F.getLegendHeight=function(){var e=this,t=0;return e.config.legend_show&&(e.isLegendRight?t=e.currentHeight:t=g(20,e.legendItemHeight)*(e.legendStep+1)),t},F.opacityForLegend=function(e){return e.classed(p.legendItemHidden)?null:1},F.opacityForUnfocusedLegend=function(e){return e.classed(p.legendItemHidden)?null:0.3},F.toggleFocusLegend=function(e,t){var a=this;e=a.mapToTargetIds(e),a.legend.selectAll('.'+p.legendItem).filter(function(t){return 0<=e.indexOf(t)}).classed(p.legendItemFocused,t).transition().duration(100).style('opacity',function(){var e=t?a.opacityForLegend:a.opacityForUnfocusedLegend;return e.call(a,a.d3.select(this))})},F.revertLegend=function(){var e=this,t=e.d3;e.legend.selectAll('.'+p.legendItem).classed(p.legendItemFocused,!1).transition().duration(100).style('opacity',function(){return e.opacityForLegend(t.select(this))})},F.showLegend=function(e){var t=this,a=t.config;a.legend_show||(a.legend_show=!0,t.legend.style('visibility','visible'),!t.legendHasRendered&&t.updateLegendWithDefaults()),t.removeHiddenLegendIds(e),t.legend.selectAll(t.selectorLegends(e)).style('visibility','visible').transition().style('opacity',function(){return t.opacityForLegend(t.d3.select(this))})},F.hideLegend=function(e){var t=this,a=t.config;a.legend_show&&L(e)&&(a.legend_show=!1,t.legend.style('visibility','hidden')),t.addHiddenLegendIds(e),t.legend.selectAll(t.selectorLegends(e)).style('opacity',0).style('visibility','hidden')},F.clearLegendItemTextBoxCache=function(){this.legendItemTextBox={}},F.updateLegend=function(e,t,a){function i(e,t){return n.legendItemTextBox[t]||(n.legendItemTextBox[t]=n.getTextRect(e.textContent,p.legendItem,e)),n.legendItemTextBox[t]}function r(t,a,r){function l(e,t){t||(C=(L-x-v)/2,C<_&&(C=(L-v)/2,x=0,T++)),f[e]=T,S[T]=n.isLegendInset?10:C,u[e]=x,x+=v}var p=r===e.length-1,A=i(t,a),b=A.width+h+(p&&!(n.isLegendRight||n.isLegendInset)?0:d)+s.legend_padding,P=A.height+o,v=n.isLegendRight||n.isLegendInset?P:b,L=n.isLegendRight||n.isLegendInset?n.getLegendHeight():n.getLegendWidth(),C,V;return 0===r&&(x=0,T=0,g=0,c=0),s.legend_show&&!n.isLegendToShow(a)?void(y[a]=m[a]=f[a]=u[a]=0):void(y[a]=b,m[a]=P,(!g||b>=g)&&(g=b),(!c||P>=c)&&(c=P),V=n.isLegendRight||n.isLegendInset?c:g,s.legend_equally?(Object.keys(y).forEach(function(e){y[e]=g}),Object.keys(m).forEach(function(e){m[e]=c}),C=(L-V*e.length)/2,C<_?(x=0,T=0,e.forEach(function(e){l(e)})):l(a,!0)):l(a))}var n=this,s=n.config,o=4,d=10,g=0,c=0,_=10,h=s.legend_item_tile_width+5,x=0,u={},y={},m={},S=[0],f={},T=0,b,P,v,L,C,G,w,E,I,R,l,k,O,D,F,X;e=e.filter(function(e){return!A(s.data_names[e])||null!==s.data_names[e]}),t=t||{},l=V(t,'withTransition',!0),k=V(t,'withTransitionForTransform',!0),n.isLegendInset&&(T=s.legend_inset_step?s.legend_inset_step:e.length,n.updateLegendStep(T)),n.isLegendRight?(b=function(e){return g*f[e]},L=function(e){return S[f[e]]+u[e]}):n.isLegendInset?(b=function(e){return g*f[e]+10},L=function(e){return S[f[e]]+u[e]}):(b=function(e){return S[f[e]]+u[e]},L=function(e){return c*f[e]}),P=function(e,t){return b(e,t)+4+s.legend_item_tile_width},C=function(e,t){return L(e,t)+9},v=function(e,t){return b(e,t)},G=function(e,t){return L(e,t)-5},w=function(e,t){return b(e,t)-2},E=function(e,t){return b(e,t)-2+s.legend_item_tile_width},I=function(e,t){return L(e,t)+4},R=n.legend.selectAll('.'+p.legendItem).data(e).enter().append('g').attr('class',function(e){return n.generateClass(p.legendItem,e)}).style('visibility',function(e){return n.isLegendToShow(e)?'visible':'hidden'}).style('cursor','pointer').on('click',function(e){s.legend_item_onclick?s.legend_item_onclick.call(n,e):n.d3.event.altKey?(n.api.hide(),n.api.show(e)):(n.api.toggle(e),n.isTargetToShow(e)?n.api.focus(e):n.api.revert())}).on('mouseover',function(e){s.legend_item_onmouseover?s.legend_item_onmouseover.call(n,e):(n.d3.select(this).classed(p.legendItemFocused,!0),!n.transiting&&n.isTargetToShow(e)&&n.api.focus(e))}).on('mouseout',function(e){s.legend_item_onmouseout?s.legend_item_onmouseout.call(n,e):(n.d3.select(this).classed(p.legendItemFocused,!1),n.api.revert())}),R.append('text').text(function(e){return A(s.data_names[e])?s.data_names[e]:e}).each(function(e,t){r(this,e,t)}).style('pointer-events','none').attr('x',n.isLegendRight||n.isLegendInset?P:-200).attr('y',n.isLegendRight||n.isLegendInset?-200:C),R.append('rect').attr('class',p.legendItemEvent).style('fill-opacity',0).attr('x',n.isLegendRight||n.isLegendInset?v:-200).attr('y',n.isLegendRight||n.isLegendInset?-200:G),R.append('line').attr('class',p.legendItemTile).style('stroke',n.color).style('pointer-events','none').attr('x1',n.isLegendRight||n.isLegendInset?w:-200).attr('y1',n.isLegendRight||n.isLegendInset?-200:I).attr('x2',n.isLegendRight||n.isLegendInset?E:-200).attr('y2',n.isLegendRight||n.isLegendInset?-200:I).attr('stroke-width',s.legend_item_tile_height),X=n.legend.select('.'+p.legendBackground+' rect'),n.isLegendInset&&0<g&&0===X.size()&&(X=n.legend.insert('g','.'+p.legendItem).attr('class',p.legendBackground).append('rect')),O=n.legend.selectAll('text').data(e).text(function(e){return A(s.data_names[e])?s.data_names[e]:e}).each(function(e,t){r(this,e,t)}),(l?O.transition():O).attr('x',P).attr('y',C),D=n.legend.selectAll('rect.'+p.legendItemEvent).data(e),(l?D.transition():D).attr('width',function(e){return y[e]}).attr('height',function(e){return m[e]}).attr('x',v).attr('y',G),F=n.legend.selectAll('line.'+p.legendItemTile).data(e),(l?F.transition():F).style('stroke',n.levelColor?function(e){return n.levelColor(n.cache[e].values[0].value)}:n.color).attr('x1',w).attr('y1',I).attr('x2',E).attr('y2',I),X&&(l?X.transition():X).attr('height',n.getLegendHeight()-12).attr('width',g*(T+1)+10),n.legend.selectAll('.'+p.legendItem).classed(p.legendItemHidden,function(e){return!n.isTargetToShow(e)}),n.updateLegendItemWidth(g),n.updateLegendItemHeight(c),n.updateLegendStep(T),n.updateSizes(),n.updateScales(),n.updateSvgSize(),n.transformAll(k,a),n.legendHasRendered=!0},F.initRegion=function(){var e=this;e.region=e.main.append('g').attr('clip-path',e.clipPath).attr('class',p.regions)},F.updateRegion=function(e){var t=this,a=t.config;t.region.style('visibility',t.hasArcType()?'hidden':'visible'),t.mainRegion=t.main.select('.'+p.regions).selectAll('.'+p.region).data(a.regions),t.mainRegion.enter().append('g').append('rect').style('fill-opacity',0),t.mainRegion.attr('class',t.classRegion.bind(t)),t.mainRegion.exit().transition().duration(e).style('opacity',0).remove()},F.redrawRegion=function(e){var t=this,a=t.mainRegion.selectAll('rect').each(function(){var e=t.d3.select(this.parentNode).datum();t.d3.select(this).datum(e)}),i=t.regionX.bind(t),r=t.regionY.bind(t),n=t.regionWidth.bind(t),s=t.regionHeight.bind(t);return[(e?a.transition():a).attr('x',i).attr('y',r).attr('width',n).attr('height',s).style('fill-opacity',function(e){return y(e.opacity)?e.opacity:0.1})]},F.regionX=function(e){var t=this,a=t.config,i='y'===e.axis?t.y:t.y2,r;return r='y'===e.axis||'y2'===e.axis?a.axis_rotated?'start'in e?i(e.start):0:0:a.axis_rotated?0:'start'in e?t.x(t.isTimeSeries()?t.parseDate(e.start):e.start):0,r},F.regionY=function(e){var t=this,a=t.config,i='y'===e.axis?t.y:t.y2,r;return r='y'===e.axis||'y2'===e.axis?a.axis_rotated?0:'end'in e?i(e.end):0:a.axis_rotated?'start'in e?t.x(t.isTimeSeries()?t.parseDate(e.start):e.start):0:0,r},F.regionWidth=function(e){var t=this,a=t.config,i=t.regionX(e),r='y'===e.axis?t.y:t.y2,n;return n='y'===e.axis||'y2'===e.axis?a.axis_rotated?'end'in e?r(e.end):t.width:t.width:a.axis_rotated?t.width:'end'in e?t.x(t.isTimeSeries()?t.parseDate(e.end):e.end):t.width,n<i?0:n-i},F.regionHeight=function(e){var t=this,a=t.config,i=this.regionY(e),r='y'===e.axis?t.y:t.y2,n;return n='y'===e.axis||'y2'===e.axis?a.axis_rotated?t.height:'start'in e?r(e.start):t.height:a.axis_rotated?'end'in e?t.x(t.isTimeSeries()?t.parseDate(e.end):e.end):t.height:t.height,n<i?0:n-i},F.isRegionOnX=function(e){return!e.axis||'x'===e.axis},F.getScale=function(e,t,a){return(a?this.d3.time.scale():this.d3.scale.linear()).range([e,t])},F.getX=function(e,t,a,i){var r=this,n=r.getScale(e,t,r.isTimeSeries()),s=a?n.domain(a):n,o;for(o in r.isCategorized()?(i=i||function(){return 0},n=function(e,t){var a=s(e)+i(e);return t?a:c(a)}):n=function(e,t){var a=s(e);return t?a:c(a)},s)n[o]=s[o];return n.orgDomain=function(){return s.domain()},r.isCategorized()&&(n.domain=function(e){return arguments.length?(s.domain(e),n):(e=this.orgDomain(),[e[0],e[1]+1])}),n},F.getY=function(e,t,a){var i=this.getScale(e,t,this.isTimeSeriesY());return a&&i.domain(a),i},F.getYScale=function(e){return'y2'===this.axis.getId(e)?this.y2:this.y},F.getSubYScale=function(e){return'y2'===this.axis.getId(e)?this.subY2:this.subY},F.updateScales=function(){var e=this,t=e.config,a=!e.x;e.xMin=t.axis_rotated?1:0,e.xMax=t.axis_rotated?e.height:e.width,e.yMin=t.axis_rotated?0:e.height,e.yMax=t.axis_rotated?e.width:1,e.subXMin=e.xMin,e.subXMax=e.xMax,e.subYMin=t.axis_rotated?0:e.height2,e.subYMax=t.axis_rotated?e.width2:1,e.x=e.getX(e.xMin,e.xMax,a?void 0:e.x.orgDomain(),function(){return e.xAxis.tickOffset()}),e.y=e.getY(e.yMin,e.yMax,a?t.axis_y_default:e.y.domain()),e.y2=e.getY(e.yMin,e.yMax,a?t.axis_y2_default:e.y2.domain()),e.subX=e.getX(e.xMin,e.xMax,e.orgXDomain,function(t){return t%1?0:e.subXAxis.tickOffset()}),e.subY=e.getY(e.subYMin,e.subYMax,a?t.axis_y_default:e.subY.domain()),e.subY2=e.getY(e.subYMin,e.subYMax,a?t.axis_y2_default:e.subY2.domain()),e.xAxisTickFormat=e.axis.getXAxisTickFormat(),e.xAxisTickValues=e.axis.getXAxisTickValues(),e.yAxisTickValues=e.axis.getYAxisTickValues(),e.y2AxisTickValues=e.axis.getY2AxisTickValues(),e.xAxis=e.axis.getXAxis(e.x,e.xOrient,e.xAxisTickFormat,e.xAxisTickValues,t.axis_x_tick_outer),e.subXAxis=e.axis.getXAxis(e.subX,e.subXOrient,e.xAxisTickFormat,e.xAxisTickValues,t.axis_x_tick_outer),e.yAxis=e.axis.getYAxis(e.y,e.yOrient,t.axis_y_tick_format,e.yAxisTickValues,t.axis_y_tick_outer),e.y2Axis=e.axis.getYAxis(e.y2,e.y2Orient,t.axis_y2_tick_format,e.y2AxisTickValues,t.axis_y2_tick_outer),a||(e.brush&&e.brush.scale(e.subX),t.zoom_enabled&&e.zoom.scale(e.x)),e.updateArc&&e.updateArc()},F.selectPoint=function(e,t,a){var i=this,n=i.config,s=(n.axis_rotated?i.circleY:i.circleX).bind(i),o=(n.axis_rotated?i.circleX:i.circleY).bind(i),d=i.pointSelectR.bind(i);n.data_onselected.call(i.api,t,e.node()),i.main.select('.'+p.selectedCircles+i.getTargetSelectorSuffix(t.id)).selectAll('.'+p.selectedCircle+'-'+a).data([t]).enter().append('circle').attr('class',function(){return i.generateClass(p.selectedCircle,a)}).attr('cx',s).attr('cy',o).attr('stroke',function(){return i.color(t)}).attr('r',function(e){return 1.4*i.pointSelectR(e)}).transition().duration(100).attr('r',d)},F.unselectPoint=function(e,t,a){var i=this;i.config.data_onunselected.call(i.api,t,e.node()),i.main.select('.'+p.selectedCircles+i.getTargetSelectorSuffix(t.id)).selectAll('.'+p.selectedCircle+'-'+a).transition().duration(100).attr('r',0).remove()},F.togglePoint=function(e,t,a,r){e?this.selectPoint(t,a,r):this.unselectPoint(t,a,r)},F.selectPath=function(e,t){var a=this;a.config.data_onselected.call(a,t,e.node()),a.config.interaction_brighten&&e.transition().duration(100).style('fill',function(){return a.d3.rgb(a.color(t)).brighter(0.75)})},F.unselectPath=function(e,t){var a=this;a.config.data_onunselected.call(a,t,e.node()),a.config.interaction_brighten&&e.transition().duration(100).style('fill',function(){return a.color(t)})},F.togglePath=function(e,t,a,r){e?this.selectPath(t,a,r):this.unselectPath(t,a,r)},F.getToggle=function(e,t){var a=this,i;return'circle'===e.nodeName?a.isStepType(t)?i=function(){}:i=a.togglePoint:'path'===e.nodeName&&(i=a.togglePath),i},F.toggleShape=function(e,t,a){var i=this,r=i.d3,n=i.config,s=r.select(e),o=s.classed(p.SELECTED),l=i.getToggle(e,t).bind(i);n.data_selection_enabled&&n.data_selection_isselectable(t)&&(!n.data_selection_multiple&&i.main.selectAll('.'+p.shapes+(n.data_selection_grouped?i.getTargetSelectorSuffix(t.id):'')).selectAll('.'+p.shape).each(function(e,t){var a=r.select(this);a.classed(p.SELECTED)&&l(!1,a.classed(p.SELECTED,!1),e,t)}),s.classed(p.SELECTED,!o),l(!o,s,t,a))},F.initBar=function(){var e=this;e.main.select('.'+p.chart).append('g').attr('class',p.chartBars)},F.updateTargetsForBar=function(e){var t=this,a=t.config,i=t.classChartBar.bind(t),r=t.classBars.bind(t),n=t.classFocus.bind(t),s,o;s=t.main.select('.'+p.chartBars).selectAll('.'+p.chartBar).data(e).attr('class',function(e){return i(e)+n(e)}),o=s.enter().append('g').attr('class',i).style('pointer-events','none'),o.append('g').attr('class',r).style('cursor',function(e){return a.data_selection_isselectable(e)?'pointer':null})},F.updateBar=function(e){var t=this,a=t.barData.bind(t),i=t.classBar.bind(t),r=t.initialOpacity.bind(t),n=function(e){return t.color(e.id)};t.mainBar=t.main.selectAll('.'+p.bars).selectAll('.'+p.bar).data(a),t.mainBar.enter().append('path').attr('class',i).style('stroke',n).style('fill',n),t.mainBar.style('opacity',r),t.mainBar.exit().transition().duration(e).remove()},F.redrawBar=function(e,t){return[(t?this.mainBar.transition(Math.random().toString()):this.mainBar).attr('d',e).style('stroke',this.color).style('fill',this.color).style('opacity',1)]},F.getBarW=function(e,t){var a=this,i=a.config,r='number'===typeof i.bar_width?i.bar_width:t?e.tickInterval()*i.bar_width_ratio/t:0;return i.bar_width_max&&r>i.bar_width_max?i.bar_width_max:r},F.getBars=function(e,t){var a=this;return(t?a.main.selectAll('.'+p.bars+a.getTargetSelectorSuffix(t)):a.main).selectAll('.'+p.bar+(y(e)?'-'+e:''))},F.expandBars=function(e,t,a){var i=this;a&&i.unexpandBars(),i.getBars(e,t).classed(p.EXPANDED,!0)},F.unexpandBars=function(e){var t=this;t.getBars(e).classed(p.EXPANDED,!1)},F.generateDrawBar=function(e,t){var a=this,r=a.config,n=a.generateGetBarPoints(e,t);return function(e,t){var a=n(e,t),i=r.axis_rotated?1:0,s=r.axis_rotated?0:1,o='M '+a[0][i]+','+a[0][s]+' L'+a[1][i]+','+a[1][s]+' L'+a[2][i]+','+a[2][s]+' L'+a[3][i]+','+a[3][s]+' z';return o}},F.generateGetBarPoints=function(e,t){var a=this,i=t?a.subXAxis:a.xAxis,r=e.__max__+1,n=a.getBarW(i,r),s=a.getShapeX(n,r,e,!!t),o=a.getShapeY(!!t),l=a.getShapeOffset(a.isBarType,e,!!t),g=n*(a.config.bar_space/2),c=t?a.getSubYScale:a.getYScale;return function(e,t){var i=c.call(a,e.id)(0),r=l(e,t)||i,d=s(e),p=o(e);return a.config.axis_rotated&&(0<e.value&&p<i||0>e.value&&i<p)&&(p=i),[[d+g,r],[d+g,p-(i-r)],[d+n-g,p-(i-r)],[d+n-g,r]]}},F.isWithinBar=function(e){var t=this.d3.mouse(e),a=e.getBoundingClientRect(),i=e.pathSegList.getItem(0),r=e.pathSegList.getItem(1),n=d(i.x,r.x),s=d(i.y,r.y),o=a.width,l=a.height,g=2;return n-g<t[0]&&t[0]<n+o+g&&s-g<t[1]&&t[1]<s+l+g},F.getShapeIndices=function(e){var t=this,a=t.config,r={},n=0,i,s;return t.filterTargetsToShow(t.data.targets.filter(e,t)).forEach(function(e){for(i=0;i<a.data_groups.length;i++)if(!(0>a.data_groups[i].indexOf(e.id)))for(s=0;s<a.data_groups[i].length;s++)if(a.data_groups[i][s]in r){r[e.id]=r[a.data_groups[i][s]];break}T(r[e.id])&&(r[e.id]=n++)}),r.__max__=n-1,r},F.getShapeX=function(e,t,a,i){var r=this,n=i?r.subX:r.x;return function(i){var r=i.id in a?a[i.id]:0;return i.x||0===i.x?n(i.x)-e*(t/2-r):0}},F.getShapeY=function(e){var t=this;return function(a){var i=e?t.getSubYScale(a.id):t.getYScale(a.id);return i(a.value)}},F.getShapeOffset=function(e,a,t){var r=this,n=r.orderTargets(r.filterTargetsToShow(r.data.targets.filter(e,r))),s=n.map(function(e){return e.id});return function(e,o){var i=t?r.getSubYScale(e.id):r.getYScale(e.id),d=i(0),l=d;return n.forEach(function(n){var t=r.isStepType(e)?r.convertValuesToStep(n.values):n.values;n.id===e.id||a[n.id]!==a[e.id]||s.indexOf(n.id)<s.indexOf(e.id)&&(('undefined'===typeof t[o]||+t[o].x!==+e.x)&&(o=-1,t.forEach(function(t,a){t.x===e.x&&(o=a)})),o in t&&0<=t[o].value*e.value&&(l+=i(t[o].value)-d))}),l}},F.isWithinShape=function(e,t){var a=this,i=a.d3.select(e),r;return a.isTargetToShow(t.id)?'circle'===e.nodeName?r=a.isStepType(t)?a.isWithinStep(e,a.getYScale(t.id)(t.value)):a.isWithinCircle(e,1.5*a.pointSelectR(t)):'path'===e.nodeName&&(r=!i.classed(p.bar)||a.isWithinBar(e)):r=!1,r},F.getInterpolate=function(e){var t=this,a=t.isInterpolationType(t.config.spline_interpolation_type)?t.config.spline_interpolation_type:'cardinal';return t.isSplineType(e)?a:t.isStepType(e)?t.config.line_step_type:'linear'},F.initLine=function(){var e=this;e.main.select('.'+p.chart).append('g').attr('class',p.chartLines)},F.updateTargetsForLine=function(e){var a=this,t=a.config,i=a.classChartLine.bind(a),r=a.classLines.bind(a),n=a.classAreas.bind(a),s=a.classCircles.bind(a),o=a.classFocus.bind(a),d,l;d=a.main.select('.'+p.chartLines).selectAll('.'+p.chartLine).data(e).attr('class',function(e){return i(e)+o(e)}),l=d.enter().append('g').attr('class',i).style('opacity',0).style('pointer-events','none'),l.append('g').attr('class',r),l.append('g').attr('class',n),l.append('g').attr('class',function(e){return a.generateClass(p.selectedCircles,e.id)}),l.append('g').attr('class',s).style('cursor',function(e){return t.data_selection_isselectable(e)?'pointer':null}),e.forEach(function(e){a.main.selectAll('.'+p.selectedCircles+a.getTargetSelectorSuffix(e.id)).selectAll('.'+p.selectedCircle).each(function(t){t.value=e.values[t.index].value})})},F.updateLine=function(e){var t=this;t.mainLine=t.main.selectAll('.'+p.lines).selectAll('.'+p.line).data(t.lineData.bind(t)),t.mainLine.enter().append('path').attr('class',t.classLine.bind(t)).style('stroke',t.color),t.mainLine.style('opacity',t.initialOpacity.bind(t)).style('shape-rendering',function(e){return t.isStepType(e)?'crispEdges':''}).attr('transform',null),t.mainLine.exit().transition().duration(e).style('opacity',0).remove()},F.redrawLine=function(e,t){return[(t?this.mainLine.transition(Math.random().toString()):this.mainLine).attr('d',e).style('stroke',this.color).style('opacity',1)]},F.generateDrawLine=function(e,t){var a=this,r=a.config,i=a.d3.svg.line(),n=a.generateGetLinePoints(e,t),s=t?a.getSubYScale:a.getYScale,o=function(e){return(t?a.subxx:a.xx).call(a,e)},d=function(e,t){return 0<r.data_groups.length?n(e,t)[0][1]:s.call(a,e.id)(e.value)};return i=r.axis_rotated?i.x(d).y(o):i.x(o).y(d),r.line_connectNull||(i=i.defined(function(e){return null!=e.value})),function(e){var n=r.line_connectNull?a.filterRemoveNull(e.values):e.values,o=t?a.x:a.subX,d=s.call(a,e.id),l=0,g=0,c;return a.isLineType(e)?r.data_regions[e.id]?c=a.lineWithRegions(n,o,d,r.data_regions[e.id]):(a.isStepType(e)&&(n=a.convertValuesToStep(n)),c=i.interpolate(a.getInterpolate(e))(n)):(n[0]&&(l=o(n[0].x),g=d(n[0].value)),c=r.axis_rotated?'M '+g+' '+l:'M '+l+' '+g),c?c:'M 0 0'}},F.generateGetLinePoints=function(e,t){var a=this,r=a.config,i=e.__max__+1,n=a.getShapeX(0,i,e,!!t),s=a.getShapeY(!!t),o=a.getShapeOffset(a.isLineType,e,!!t),l=t?a.getSubYScale:a.getYScale;return function(e,t){var i=l.call(a,e.id)(0),d=o(e,t)||i,g=n(e),c=s(e);return r.axis_rotated&&(0<e.value&&c<i||0>e.value&&i<c)&&(c=i),[[g,c-(i-d)],[g,c-(i-d)],[g,c-(i-d)],[g,c-(i-d)]]}},F.lineWithRegions=function(e,t,a,r){function d(e,t){var a;for(a=0;a<t.length;a++)if(t[a].start<e&&e<=t[a].end)return!0;return!1}function l(e){return'M'+e[0][0]+' '+e[0][1]+' '+e[1][0]+' '+e[1][1]}var g=this,c=g.config,p='M',s=g.isCategorized()?0.5:0,_=[],h,i,x,u,y,m,S,f,b,P,v,L;if(A(r))for(h=0;h<r.length;h++)_[h]={},_[h].start=T(r[h].start)?e[0].x:g.isTimeSeries()?g.parseDate(r[h].start):r[h].start,_[h].end=T(r[h].end)?e[e.length-1].x:g.isTimeSeries()?g.parseDate(r[h].end):r[h].end;for(v=c.axis_rotated?function(e){return a(e.value)}:function(e){return t(e.x)},L=c.axis_rotated?function(e){return t(e.x)}:function(e){return a(e.value)},x=g.isTimeSeries()?function(e,i,r,n){var s=e.x.getTime(),o=i.x-e.x,d=new Date(s+o*r),g=new Date(s+o*(r+n)),p;return p=c.axis_rotated?[[a(y(r)),t(d)],[a(y(r+n)),t(g)]]:[[t(d),a(y(r))],[t(g),a(y(r+n))]],l(p)}:function(e,i,r,n){var s;return s=c.axis_rotated?[[a(y(r),!0),t(u(r))],[a(y(r+n),!0),t(u(r+n))]]:[[t(u(r),!0),a(y(r))],[t(u(r+n),!0),a(y(r+n))]],l(s)},h=0;h<e.length;h++){if(T(_)||!d(e[h].x,_))p+=' '+v(e[h])+' '+L(e[h]);else for(u=g.getScale(e[h-1].x+s,e[h].x+s,g.isTimeSeries()),y=g.getScale(e[h-1].value,e[h].value),m=t(e[h].x)-t(e[h-1].x),S=a(e[h].value)-a(e[h-1].value),f=n(o(m,2)+o(S,2)),b=2/f,P=2*b,i=b;1>=i;i+=P)p+=x(e[h-1],e[h],i,b);e[h].x}return p},F.updateArea=function(e){var t=this,a=t.d3;t.mainArea=t.main.selectAll('.'+p.areas).selectAll('.'+p.area).data(t.lineData.bind(t)),t.mainArea.enter().append('path').attr('class',t.classArea.bind(t)).style('fill',t.color).style('opacity',function(){return t.orgAreaOpacity=+a.select(this).style('opacity'),0}),t.mainArea.style('opacity',t.orgAreaOpacity),t.mainArea.exit().transition().duration(e).style('opacity',0).remove()},F.redrawArea=function(e,t){return[(t?this.mainArea.transition(Math.random().toString()):this.mainArea).attr('d',e).style('fill',this.color).style('opacity',this.orgAreaOpacity)]},F.generateDrawArea=function(e,t){var a=this,r=a.config,i=a.d3.svg.area(),n=a.generateGetAreaPoints(e,t),s=t?a.getSubYScale:a.getYScale,o=function(e){return(t?a.subxx:a.xx).call(a,e)},d=function(e,t){return 0<r.data_groups.length?n(e,t)[0][1]:s.call(a,e.id)(a.getAreaBaseValue(e.id))},l=function(e,t){return 0<r.data_groups.length?n(e,t)[1][1]:s.call(a,e.id)(e.value)};return i=r.axis_rotated?i.x0(d).x1(l).y(o):i.x(o).y0(r.area_above?0:d).y1(l),r.line_connectNull||(i=i.defined(function(e){return null!==e.value})),function(e){var t=r.line_connectNull?a.filterRemoveNull(e.values):e.values,n=0,s=0,o;return a.isAreaType(e)?(a.isStepType(e)&&(t=a.convertValuesToStep(t)),o=i.interpolate(a.getInterpolate(e))(t)):(t[0]&&(n=a.x(t[0].x),s=a.getYScale(e.id)(t[0].value)),o=r.axis_rotated?'M '+s+' '+n:'M '+n+' '+s),o?o:'M 0 0'}},F.getAreaBaseValue=function(){return 0},F.generateGetAreaPoints=function(e,t){var a=this,r=a.config,i=e.__max__+1,n=a.getShapeX(0,i,e,!!t),s=a.getShapeY(!!t),o=a.getShapeOffset(a.isAreaType,e,!!t),l=t?a.getSubYScale:a.getYScale;return function(e,t){var i=l.call(a,e.id)(0),d=o(e,t)||i,g=n(e),c=s(e);return r.axis_rotated&&(0<e.value&&c<i||0>e.value&&i<c)&&(c=i),[[g,d],[g,c-(i-d)],[g,c-(i-d)],[g,d]]}},F.updateCircle=function(){var e=this;e.mainCircle=e.main.selectAll('.'+p.circles).selectAll('.'+p.circle).data(e.lineOrScatterData.bind(e)),e.mainCircle.enter().append('circle').attr('class',e.classCircle.bind(e)).attr('r',e.pointR.bind(e)).style('fill',e.color),e.mainCircle.style('opacity',e.initialOpacityForCircle.bind(e)),e.mainCircle.exit().remove()},F.redrawCircle=function(e,t,a){var i=this.main.selectAll('.'+p.selectedCircle);return[(a?this.mainCircle.transition(Math.random().toString()):this.mainCircle).style('opacity',this.opacityForCircle.bind(this)).style('fill',this.color).attr('cx',e).attr('cy',t),(a?i.transition(Math.random().toString()):i).attr('cx',e).attr('cy',t)]},F.circleX=function(e){return e.x||0===e.x?this.x(e.x):null},F.updateCircleY=function(){var e=this,t,a;0<e.config.data_groups.length?(t=e.getShapeIndices(e.isLineType),a=e.generateGetLinePoints(t),e.circleY=function(e,t){return a(e,t)[0][1]}):e.circleY=function(t){return e.getYScale(t.id)(t.value)}},F.getCircles=function(e,t){var a=this;return(t?a.main.selectAll('.'+p.circles+a.getTargetSelectorSuffix(t)):a.main).selectAll('.'+p.circle+(y(e)?'-'+e:''))},F.expandCircles=function(e,t,a){var i=this,n=i.pointExpandedR.bind(i);a&&i.unexpandCircles(),i.getCircles(e,t).classed(p.EXPANDED,!0).attr('r',n)},F.unexpandCircles=function(e){var t=this,a=t.pointR.bind(t);t.getCircles(e).filter(function(){return t.d3.select(this).classed(p.EXPANDED)}).classed(p.EXPANDED,!1).attr('r',a)},F.pointR=function(e){var t=this,a=t.config;return t.isStepType(e)?0:m(a.point_r)?a.point_r(e):a.point_r},F.pointExpandedR=function(e){var t=this,a=t.config;return a.point_focus_expand_enabled?m(a.point_focus_expand_r)?a.point_focus_expand_r(e):a.point_focus_expand_r?a.point_focus_expand_r:1.75*t.pointR(e):t.pointR(e)},F.pointSelectR=function(e){var t=this,a=t.config;return m(a.point_select_r)?a.point_select_r(e):a.point_select_r?a.point_select_r:4*t.pointR(e)},F.isWithinCircle=function(e,t){var a=this.d3,i=a.mouse(e),r=a.select(e),s=+r.attr('cx'),d=+r.attr('cy');return n(o(s-i[0],2)+o(d-i[1],2))<t},F.isWithinStep=function(e,t){return 30>i(t-this.d3.mouse(e)[1])},F.getCurrentWidth=function(){var e=this,t=e.config;return t.size_width?t.size_width:e.getParentWidth()},F.getCurrentHeight=function(){var e=this,t=e.config,a=t.size_height?t.size_height:e.getParentHeight();return 0<a?a:320/(e.hasType('gauge')&&!t.gauge_fullCircle?2:1)},F.getCurrentPaddingTop=function(){var e=this,t=e.config,a=y(t.padding_top)?t.padding_top:0;return e.title&&e.title.node()&&(a+=e.getTitlePadding()),a},F.getCurrentPaddingBottom=function(){var e=this.config;return y(e.padding_bottom)?e.padding_bottom:0},F.getCurrentPaddingLeft=function(e){var t=this,a=t.config;return y(a.padding_left)?a.padding_left:a.axis_rotated?!a.axis_x_show||a.axis_x_inner?1:g(b(t.getAxisWidthByAxisId('x',e)),40):!a.axis_y_show||a.axis_y_inner?t.axis.getYAxisLabelPosition().isOuter?30:1:b(t.getAxisWidthByAxisId('y',e))},F.getCurrentPaddingRight=function(){var e=this,t=e.config,a=e.isLegendRight?e.getLegendWidth()+20:0;return y(t.padding_right)?t.padding_right+1:t.axis_rotated?10+a:!t.axis_y2_show||t.axis_y2_inner?2+a+(e.axis.getY2AxisLabelPosition().isOuter?20:0):b(e.getAxisWidthByAxisId('y2'))+a},F.getParentRectValue=function(e){for(var t=this.selectChart.node(),a;t&&'BODY'!==t.tagName;){try{a=t.getBoundingClientRect()[e]}catch(i){'width'===e&&(a=t.offsetWidth)}if(a)break;t=t.parentNode}return a},F.getParentWidth=function(){return this.getParentRectValue('width')},F.getParentHeight=function(){var e=this.selectChart.style('height');return 0<e.indexOf('px')?+e.replace('px',''):0},F.getSvgLeft=function(e){var t=this,a=t.config,i=a.axis_rotated||!a.axis_rotated&&!a.axis_y_inner,r=a.axis_rotated?p.axisX:p.axisY,n=t.main.select('.'+r).node(),s=n&&i?n.getBoundingClientRect():{right:0},o=t.selectChart.node().getBoundingClientRect(),d=t.hasArcType(),l=s.right-o.left-(d?0:t.getCurrentPaddingLeft(e));return 0<l?l:0},F.getAxisWidthByAxisId=function(e,t){var a=this,i=a.axis.getLabelPositionById(e);return a.axis.getMaxTickWidth(e,t)+(i.isInner?20:40)},F.getHorizontalAxisHeight=function(e){var t=this,a=t.config,i=30;return'x'!==e||a.axis_x_show?'x'===e&&a.axis_x_height?a.axis_x_height:'y'!==e||a.axis_y_show?'y2'!==e||a.axis_y2_show?('x'===e&&!a.axis_rotated&&a.axis_x_tick_rotate&&(i=30+t.axis.getMaxTickWidth(e)*r(l*(90-a.axis_x_tick_rotate)/180)),'y'===e&&a.axis_rotated&&a.axis_y_tick_rotate&&(i=30+t.axis.getMaxTickWidth(e)*r(l*(90-a.axis_y_tick_rotate)/180)),i+(t.axis.getLabelPositionById(e).isInner?0:10)+('y2'===e?-10:0)):t.rotated_padding_top:!a.legend_show||t.isLegendRight||t.isLegendInset?1:10:8},F.getEventRectWidth=function(){return g(0,this.xAxis.tickInterval())},F.initBrush=function(){var e=this,t=e.d3;e.brush=t.svg.brush().on('brush',function(){e.redrawForBrush()}),e.brush.update=function(){return e.context&&e.context.select('.'+p.brush).call(this),this},e.brush.scale=function(t){return e.config.axis_rotated?this.y(t):this.x(t)}},F.initSubchart=function(){var e=this,t=e.config,a=e.context=e.svg.append('g').attr('transform',e.getTranslate('context')),i=t.subchart_show?'visible':'hidden';a.style('visibility',i),a.append('g').attr('clip-path',e.clipPathForSubchart).attr('class',p.chart),a.select('.'+p.chart).append('g').attr('class',p.chartBars),a.select('.'+p.chart).append('g').attr('class',p.chartLines),a.append('g').attr('clip-path',e.clipPath).attr('class',p.brush).call(e.brush),e.axes.subx=a.append('g').attr('class',p.axisX).attr('transform',e.getTranslate('subx')).attr('clip-path',t.axis_rotated?'':e.clipPathForXAxis).style('visibility',t.subchart_axis_x_show?i:'hidden')},F.updateTargetsForSubchart=function(e){var t=this,a=t.context,i=t.config,r=t.classChartBar.bind(t),n=t.classBars.bind(t),s=t.classChartLine.bind(t),o=t.classLines.bind(t),d=t.classAreas.bind(t),l,g,c,_;i.subchart_show&&(_=a.select('.'+p.chartBars).selectAll('.'+p.chartBar).data(e).attr('class',r),c=_.enter().append('g').style('opacity',0).attr('class',r),c.append('g').attr('class',n),g=a.select('.'+p.chartLines).selectAll('.'+p.chartLine).data(e).attr('class',s),l=g.enter().append('g').style('opacity',0).attr('class',s),l.append('g').attr('class',o),l.append('g').attr('class',d),a.selectAll('.'+p.brush+' rect').attr(i.axis_rotated?'width':'height',i.axis_rotated?t.width2:t.height2))},F.updateBarForSubchart=function(e){var t=this;t.contextBar=t.context.selectAll('.'+p.bars).selectAll('.'+p.bar).data(t.barData.bind(t)),t.contextBar.enter().append('path').attr('class',t.classBar.bind(t)).style('stroke','none').style('fill',t.color),t.contextBar.style('opacity',t.initialOpacity.bind(t)),t.contextBar.exit().transition().duration(e).style('opacity',0).remove()},F.redrawBarForSubchart=function(e,t,a){(t?this.contextBar.transition(Math.random().toString()).duration(a):this.contextBar).attr('d',e).style('opacity',1)},F.updateLineForSubchart=function(e){var t=this;t.contextLine=t.context.selectAll('.'+p.lines).selectAll('.'+p.line).data(t.lineData.bind(t)),t.contextLine.enter().append('path').attr('class',t.classLine.bind(t)).style('stroke',t.color),t.contextLine.style('opacity',t.initialOpacity.bind(t)),t.contextLine.exit().transition().duration(e).style('opacity',0).remove()},F.redrawLineForSubchart=function(e,t,a){(t?this.contextLine.transition(Math.random().toString()).duration(a):this.contextLine).attr('d',e).style('opacity',1)},F.updateAreaForSubchart=function(e){var t=this,a=t.d3;t.contextArea=t.context.selectAll('.'+p.areas).selectAll('.'+p.area).data(t.lineData.bind(t)),t.contextArea.enter().append('path').attr('class',t.classArea.bind(t)).style('fill',t.color).style('opacity',function(){return t.orgAreaOpacity=+a.select(this).style('opacity'),0}),t.contextArea.style('opacity',0),t.contextArea.exit().transition().duration(e).style('opacity',0).remove()},F.redrawAreaForSubchart=function(e,t,a){(t?this.contextArea.transition(Math.random().toString()).duration(a):this.contextArea).attr('d',e).style('fill',this.color).style('opacity',this.orgAreaOpacity)},F.redrawSubchart=function(e,t,a,i,r,n,s){var o=this,d=o.d3,l=o.config,g,c,p;o.context.style('visibility',l.subchart_show?'visible':'hidden'),l.subchart_show&&(d.event&&'zoom'===d.event.type&&o.brush.extent(o.x.orgDomain()).update(),e&&(!o.brush.empty()&&o.brush.extent(o.x.orgDomain()).update(),g=o.generateDrawArea(r,!0),c=o.generateDrawBar(n,!0),p=o.generateDrawLine(s,!0),o.updateBarForSubchart(a),o.updateLineForSubchart(a),o.updateAreaForSubchart(a),o.redrawBarForSubchart(c,a,a),o.redrawLineForSubchart(p,a,a),o.redrawAreaForSubchart(g,a,a)))},F.redrawForBrush=function(){var e=this,t=e.x;e.redraw({withTransition:!1,withY:e.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1}),e.config.subchart_onbrush.call(e.api,t.orgDomain())},F.transformContext=function(e,t){var a=this,i;t&&t.axisSubX?i=t.axisSubX:(i=a.context.select('.'+p.axisX),e&&(i=i.transition())),a.context.attr('transform',a.getTranslate('context')),i.attr('transform',a.getTranslate('subx'))},F.getDefaultExtent=function(){var e=this,t=e.config,a=m(t.axis_x_extent)?t.axis_x_extent(e.getXDomain(e.data.targets)):t.axis_x_extent;return e.isTimeSeries()&&(a=[e.parseDate(a[0]),e.parseDate(a[1])]),a},F.initText=function(){var e=this;e.main.select('.'+p.chart).append('g').attr('class',p.chartTexts),e.mainText=e.d3.selectAll([])},F.updateTargetsForText=function(e){var t=this,a=t.classChartText.bind(t),i=t.classTexts.bind(t),r=t.classFocus.bind(t),n,s;n=t.main.select('.'+p.chartTexts).selectAll('.'+p.chartText).data(e).attr('class',function(e){return a(e)+r(e)}),s=n.enter().append('g').attr('class',a).style('opacity',0).style('pointer-events','none'),s.append('g').attr('class',i)},F.updateText=function(e){var t=this,a=t.config,i=t.barOrLineData.bind(t),r=t.classText.bind(t);t.mainText=t.main.selectAll('.'+p.texts).selectAll('.'+p.text).data(i),t.mainText.enter().append('text').attr('class',r).attr('text-anchor',function(e){return a.axis_rotated?0>e.value?'end':'start':'middle'}).style('stroke','none').style('fill',function(e){return t.color(e)}).style('fill-opacity',0),t.mainText.text(function(e,a,i){return t.dataLabelFormat(e.id)(e.value,e.id,a,i)}),t.mainText.exit().transition().duration(e).style('fill-opacity',0).remove()},F.redrawText=function(e,t,a,i){return[(i?this.mainText.transition():this.mainText).attr('x',e).attr('y',t).style('fill',this.color).style('fill-opacity',a?0:this.opacityForText.bind(this))]},F.getTextRect=function(e,t,a){var i=this.d3.select('body').append('div').classed('c3',!0),r=i.append('svg').style('visibility','hidden').style('position','fixed').style('top',0).style('left',0),n=this.d3.select(a).style('font'),s;return r.selectAll('.dummy').data([e]).enter().append('text').classed(t?t:'',!0).style('font',n).text(e).each(function(){s=this.getBoundingClientRect()}),i.remove(),s},F.generateXYForText=function(e,t,a,i){var r=this,n=r.generateGetAreaPoints(e,!1),s=r.generateGetBarPoints(t,!1),o=r.generateGetLinePoints(a,!1),l=i?r.getXForText:r.getYForText;return function(e,t){var a=r.isAreaType(e)?n:r.isBarType(e)?s:o;return l.call(r,a(e,t),e,this)}},F.getXForText=function(e,t,a){var i=this,r=a.getBoundingClientRect(),n,s;return i.config.axis_rotated?(s=i.isBarType(t)?4:6,n=e[2][1]+s*(0>t.value?-1:1)):n=i.hasType('bar')?(e[2][0]+e[0][0])/2:e[0][0],null===t.value&&(n>i.width?n=i.width-r.width:0>n&&(n=4)),n},F.getYForText=function(e,t,a){var i=this,r=a.getBoundingClientRect(),n;return i.config.axis_rotated?n=(e[0][0]+e[2][0]+0.6*r.height)/2:(n=e[2][1],0>t.value||0===t.value&&!i.hasPositiveValue?(n+=r.height,i.isBarType(t)&&i.isSafari()?n-=3:!i.isBarType(t)&&i.isChrome()&&(n+=3)):n+=i.isBarType(t)?-3:-6),null!==t.value||i.config.axis_rotated||(n<r.height?n=r.height:n>this.height&&(n=this.height-4)),n},F.initTitle=function(){var e=this;e.title=e.svg.append('text').text(e.config.title_text).attr('class',e.CLASS.title)},F.redrawTitle=function(){var e=this;e.title.attr('x',e.xForTitle.bind(e)).attr('y',e.yForTitle.bind(e))},F.xForTitle=function(){var e=this,t=e.config,a=t.title_position||'left',i;return i=0<=a.indexOf('right')?e.currentWidth-e.getTextRect(e.title.node().textContent,e.CLASS.title,e.title.node()).width-t.title_padding.right:0<=a.indexOf('center')?(e.currentWidth-e.getTextRect(e.title.node().textContent,e.CLASS.title,e.title.node()).width)/2:t.title_padding.left,i},F.yForTitle=function(){var e=this;return e.config.title_padding.top+e.getTextRect(e.title.node().textContent,e.CLASS.title,e.title.node()).height},F.getTitlePadding=function(){var e=this;return e.yForTitle()+e.config.title_padding.bottom},F.initTooltip=function(){var e=this,t=e.config,a;if(e.tooltip=e.selectChart.style('position','relative').append('div').attr('class',p.tooltipContainer).style('position','absolute').style('pointer-events','none').style('display','none'),t.tooltip_init_show){if(e.isTimeSeries()&&f(t.tooltip_init_x)){for(t.tooltip_init_x=e.parseDate(t.tooltip_init_x),a=0;a<e.data.targets[0].values.length&&0!==e.data.targets[0].values[a].x-t.tooltip_init_x;a++);t.tooltip_init_x=a}e.tooltip.html(t.tooltip_contents.call(e,e.data.targets.map(function(a){return e.addName(a.values[t.tooltip_init_x])}),e.axis.getXAxisTickFormat(),e.getYFormat(e.hasArcType()),e.color)),e.tooltip.style('top',t.tooltip_init_position.top).style('left',t.tooltip_init_position.left).style('display','block')}},F.getTooltipSortFunction=function(){var e=this,t=e.config;if(0===t.data_groups.length||void 0!==t.tooltip_order){var i=t.tooltip_order;void 0===i&&(i=t.data_order);var r=function(e){return e?e.value:null};if(f(i)&&'asc'===i.toLowerCase())return function(e,t){return r(e)-r(t)};if(f(i)&&'desc'===i.toLowerCase())return function(e,t){return r(t)-r(e)};if(m(i)){var a=i;return void 0===t.tooltip_order&&(a=function(e,t){return i(e?{id:e.id,values:[e]}:null,t?{id:t.id,values:[t]}:null)}),a}if(S(i))return function(e,t){return i.indexOf(e.id)-i.indexOf(t.id)}}else{var n=e.orderTargets(e.data.targets).map(function(e){return e.id});return(e.isOrderAsc()||e.isOrderDesc())&&(n=n.reverse()),function(e,t){return n.indexOf(e.id)-n.indexOf(t.id)}}},F.getTooltipContent=function(e,t,a,r){var n=this,s=n.config,o=s.tooltip_format_title||t,d=s.tooltip_format_name||function(e){return e},l=s.tooltip_format_value||a,g=this.getTooltipSortFunction(),c,p,i,_,h,x;for(g&&e.sort(g),p=0;p<e.length;p++)if(e[p]&&(e[p].value||0===e[p].value)&&(c||(i=w(o?o(e[p].x):e[p].x),c='<table class=\''+n.CLASS.tooltip+'\'>'+(i||0===i?'<tr><th colspan=\'2\'>'+i+'</th></tr>':'')),_=w(l(e[p].value,e[p].ratio,e[p].id,e[p].index,e)),void 0!==_)){if(null===e[p].name)continue;h=w(d(e[p].name,e[p].ratio,e[p].id,e[p].index)),x=n.levelColor?n.levelColor(e[p].value):r(e[p].id),c+='<tr class=\''+n.CLASS.tooltipName+'-'+n.getTargetSelectorSuffix(e[p].id)+'\'>',c+='<td class=\'name\'><span style=\'background-color:'+x+'\'></span>'+h+'</td>',c+='<td class=\'value\'>'+_+'</td>',c+='</tr>'}return c+'</table>'},F.tooltipPosition=function(e,t,a,i){var r=this,n=r.config,s=r.d3,o=r.hasArcType(),d=s.mouse(i),l,g,c,p,_;return o?(g=(r.width-(r.isLegendRight?r.getLegendWidth():0))/2+d[0],p=(r.hasType('gauge')?r.height:r.height/2)+d[1]+20):(l=r.getSvgLeft(!0),n.axis_rotated?(g=l+d[0]+100,c=g+t,_=r.currentWidth-r.getCurrentPaddingRight(),p=r.x(e[0].x)+20):(g=l+r.getCurrentPaddingLeft(!0)+r.x(e[0].x)+20,c=g+t,_=l+r.currentWidth-r.getCurrentPaddingRight(),p=d[1]+15),c>_&&(g-=c-_+20),p+a>r.currentHeight&&(p-=a+30)),0>p&&(p=0),{top:p,left:g}},F.showTooltip=function(e,t){var a=this,i=a.config,r=a.hasArcType(),n=e.filter(function(e){return e&&y(e.value)}),s=i.tooltip_position||F.tooltipPosition,o,d,l;0!==n.length&&i.tooltip_show&&(a.tooltip.html(i.tooltip_contents.call(a,e,a.axis.getXAxisTickFormat(),a.getYFormat(r),a.color)).style('display','block'),o=a.tooltip.property('offsetWidth'),d=a.tooltip.property('offsetHeight'),l=s.call(this,n,o,d,t),a.tooltip.style('top',l.top+'px').style('left',l.left+'px'))},F.hideTooltip=function(){this.tooltip.style('display','none')},F.setTargetType=function(e,t){var a=this,i=a.config;a.mapToTargetIds(e).forEach(function(e){a.withoutFadeIn[e]=t===i.data_types[e],i.data_types[e]=t}),e||(i.data_type=t)},F.hasType=function(e,t){var a=this,i=a.config.data_types,r=!1;return t=t||a.data.targets,t&&t.length?t.forEach(function(a){var n=i[a.id];(n&&0<=n.indexOf(e)||!n&&'line'===e)&&(r=!0)}):Object.keys(i).length?Object.keys(i).forEach(function(t){i[t]===e&&(r=!0)}):r=a.config.data_type===e,r},F.hasArcType=function(e){return this.hasType('pie',e)||this.hasType('donut',e)||this.hasType('gauge',e)},F.isLineType=function(e){var t=this.config,a=f(e)?e:e.id;return!t.data_types[a]||0<=['line','spline','area','area-spline','step','area-step'].indexOf(t.data_types[a])},F.isStepType=function(e){var t=f(e)?e:e.id;return 0<=['step','area-step'].indexOf(this.config.data_types[t])},F.isSplineType=function(e){var t=f(e)?e:e.id;return 0<=['spline','area-spline'].indexOf(this.config.data_types[t])},F.isAreaType=function(e){var t=f(e)?e:e.id;return 0<=['area','area-spline','area-step'].indexOf(this.config.data_types[t])},F.isBarType=function(e){var t=f(e)?e:e.id;return'bar'===this.config.data_types[t]},F.isScatterType=function(e){var t=f(e)?e:e.id;return'scatter'===this.config.data_types[t]},F.isPieType=function(e){var t=f(e)?e:e.id;return'pie'===this.config.data_types[t]},F.isGaugeType=function(e){var t=f(e)?e:e.id;return'gauge'===this.config.data_types[t]},F.isDonutType=function(e){var t=f(e)?e:e.id;return'donut'===this.config.data_types[t]},F.isArcType=function(e){return this.isPieType(e)||this.isDonutType(e)||this.isGaugeType(e)},F.lineData=function(e){return this.isLineType(e)?[e]:[]},F.arcData=function(e){return this.isArcType(e.data)?[e]:[]},F.barData=function(e){return this.isBarType(e)?e.values:[]},F.lineOrScatterData=function(e){return this.isLineType(e)||this.isScatterType(e)?e.values:[]},F.barOrLineData=function(e){return this.isBarType(e)||this.isLineType(e)?e.values:[]},F.isInterpolationType=function(e){return 0<=['linear','linear-closed','basis','basis-open','basis-closed','bundle','cardinal','cardinal-open','cardinal-closed','monotone'].indexOf(e)},F.isSafari=function(){var e=window.navigator.userAgent;return 0<=e.indexOf('Safari')&&0>e.indexOf('Chrome')},F.isChrome=function(){var e=window.navigator.userAgent;return 0<=e.indexOf('Chrome')},F.initZoom=function(){var e=this,t=e.d3,a=e.config,i;e.zoom=t.behavior.zoom().on('zoomstart',function(){i=t.event.sourceEvent,e.zoom.altDomain=t.event.sourceEvent.altKey?e.x.orgDomain():null,a.zoom_onzoomstart.call(e.api,t.event.sourceEvent)}).on('zoom',function(){e.redrawForZoom.call(e)}).on('zoomend',function(){var r=t.event.sourceEvent;r&&i.clientX===r.clientX&&i.clientY===r.clientY||(e.redrawEventRect(),e.updateZoom(),a.zoom_onzoomend.call(e.api,e.x.orgDomain()))}),e.zoom.scale=function(e){return a.axis_rotated?this.y(e):this.x(e)},e.zoom.orgScaleExtent=function(){var t=a.zoom_extent?a.zoom_extent:[1,10];return[t[0],g(e.getMaxDataCount()/t[1],t[1])]},e.zoom.updateScaleExtent=function(){var t=v(e.x.orgDomain())/v(e.getZoomDomain()),a=this.orgScaleExtent();return this.scaleExtent([a[0]*t,a[1]*t]),this}},F.getZoomDomain=function(){var e=this,t=e.config,a=e.d3,i=a.min([e.orgXDomain[0],t.zoom_x_min]),r=a.max([e.orgXDomain[1],t.zoom_x_max]);return[i,r]},F.updateZoom=function(){var e=this,t=e.config.zoom_enabled?e.zoom:function(){};e.main.select('.'+p.zoomRect).call(t).on('dblclick.zoom',null),e.main.selectAll('.'+p.eventRect).call(t).on('dblclick.zoom',null)},F.redrawForZoom=function(){var e=this,t=e.d3,a=e.config,i=e.zoom,r=e.x;return a.zoom_enabled?0===e.filterTargetsToShow(e.data.targets).length?void 0:'mousemove'===t.event.sourceEvent.type&&i.altDomain?(r.domain(i.altDomain),void i.scale(r).updateScaleExtent()):void(e.isCategorized()&&r.orgDomain()[0]===e.orgXDomain[0]&&r.domain([e.orgXDomain[0]-1e-10,r.orgDomain()[1]]),e.redraw({withTransition:!1,withY:a.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),'mousemove'===t.event.sourceEvent.type&&(e.cancelClick=!0),a.zoom_onzoom.call(e.api,r.orgDomain())):void 0},O});